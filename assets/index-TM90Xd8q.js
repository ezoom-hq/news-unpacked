function zS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function WS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var __={exports:{}},Au={},w_={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo=Symbol.for("react.element"),KS=Symbol.for("react.portal"),qS=Symbol.for("react.fragment"),HS=Symbol.for("react.strict_mode"),GS=Symbol.for("react.profiler"),QS=Symbol.for("react.provider"),YS=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),JS=Symbol.for("react.suspense"),ZS=Symbol.for("react.memo"),eA=Symbol.for("react.lazy"),Og=Symbol.iterator;function tA(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var E_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T_=Object.assign,x_={};function us(t,e,n){this.props=t,this.context=e,this.refs=x_,this.updater=n||E_}us.prototype.isReactComponent={};us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S_(){}S_.prototype=us.prototype;function ff(t,e,n){this.props=t,this.context=e,this.refs=x_,this.updater=n||E_}var pf=ff.prototype=new S_;pf.constructor=ff;T_(pf,us.prototype);pf.isPureReactComponent=!0;var Fg=Array.isArray,A_=Object.prototype.hasOwnProperty,mf={current:null},I_={key:!0,ref:!0,__self:!0,__source:!0};function P_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)A_.call(e,r)&&!I_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zo,type:t,key:s,ref:o,props:i,_owner:mf.current}}function nA(t,e){return{$$typeof:Zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zo}function rA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jg=/\/+/g;function Nc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rA(""+t.key):e.toString(36)}function hl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zo:case KS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Nc(o,0):r,Fg(i)?(n="",t!=null&&(n=t.replace(jg,"$&/")+"/"),hl(i,e,n,"",function(c){return c})):i!=null&&(gf(i)&&(i=nA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Fg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Nc(s,a);o+=hl(s,e,n,u,i)}else if(u=tA(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Nc(s,a++),o+=hl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fa(t,e,n){if(t==null)return t;var r=[],i=0;return hl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},dl={transition:null},sA={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:dl,ReactCurrentOwner:mf};function C_(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Fa,forEach:function(t,e,n){Fa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fa(t,function(){e++}),e},toArray:function(t){return Fa(t,function(e){return e})||[]},only:function(t){if(!gf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=us;Z.Fragment=qS;Z.Profiler=GS;Z.PureComponent=ff;Z.StrictMode=HS;Z.Suspense=JS;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sA;Z.act=C_;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=T_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)A_.call(e,u)&&!I_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zo,type:t.type,key:i,ref:s,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:YS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QS,_context:t},t.Consumer=t};Z.createElement=P_;Z.createFactory=function(t){var e=P_.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:XS,render:t}};Z.isValidElement=gf;Z.lazy=function(t){return{$$typeof:eA,_payload:{_status:-1,_result:t},_init:iA}};Z.memo=function(t,e){return{$$typeof:ZS,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=dl.transition;dl.transition={};try{t()}finally{dl.transition=e}};Z.unstable_act=C_;Z.useCallback=function(t,e){return Et.current.useCallback(t,e)};Z.useContext=function(t){return Et.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};Z.useEffect=function(t,e){return Et.current.useEffect(t,e)};Z.useId=function(){return Et.current.useId()};Z.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return Et.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};Z.useRef=function(t){return Et.current.useRef(t)};Z.useState=function(t){return Et.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return Et.current.useTransition()};Z.version="18.3.1";w_.exports=Z;var V=w_.exports;const yf=WS(V),oA=zS({__proto__:null,default:yf},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA=V,lA=Symbol.for("react.element"),uA=Symbol.for("react.fragment"),cA=Object.prototype.hasOwnProperty,hA=aA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dA={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cA.call(e,r)&&!dA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lA,type:t,key:s,ref:o,props:i,_owner:hA.current}}Au.Fragment=uA;Au.jsx=R_;Au.jsxs=R_;__.exports=Au;var R=__.exports,Rh={},k_={exports:{}},Ot={},V_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var J=$.length;$.push(Q);e:for(;0<J;){var ve=J-1>>>1,le=$[ve];if(0<i(le,Q))$[ve]=Q,$[J]=le,J=ve;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],J=$.pop();if(J!==Q){$[0]=J;e:for(var ve=0,le=$.length,Pe=le>>>1;ve<Pe;){var vn=2*(ve+1)-1,_n=$[vn],wn=vn+1,En=$[wn];if(0>i(_n,J))wn<le&&0>i(En,_n)?($[ve]=En,$[wn]=J,ve=wn):($[ve]=_n,$[vn]=J,ve=vn);else if(wn<le&&0>i(En,J))$[ve]=En,$[wn]=J,ve=wn;else break e}}return Q}function i($,Q){var J=$.sortIndex-Q.sortIndex;return J!==0?J:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,p=3,g=!1,T=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=$)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function b($){if(I=!1,x($),!T)if(n(u)!==null)T=!0,zn(M);else{var Q=n(c);Q!==null&&de(b,Q.startTime-$)}}function M($,Q){T=!1,I&&(I=!1,w(y),y=-1),g=!0;var J=p;try{for(x(Q),d=n(u);d!==null&&(!(d.expirationTime>Q)||$&&!k());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,p=d.priorityLevel;var le=ve(d.expirationTime<=Q);Q=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(u)&&r(u),x(Q)}else r(u);d=n(u)}if(d!==null)var Pe=!0;else{var vn=n(c);vn!==null&&de(b,vn.startTime-Q),Pe=!1}return Pe}finally{d=null,p=J,g=!1}}var O=!1,A=null,y=-1,E=5,S=-1;function k(){return!(t.unstable_now()-S<E)}function D(){if(A!==null){var $=t.unstable_now();S=$;var Q=!0;try{Q=A(!0,$)}finally{Q?C():(O=!1,A=null)}}else O=!1}var C;if(typeof v=="function")C=function(){v(D)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,jt=We.port2;We.port1.onmessage=D,C=function(){jt.postMessage(null)}}else C=function(){P(D,0)};function zn($){A=$,O||(O=!0,C())}function de($,Q){y=P(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,zn(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var J=p;p=Q;try{return $()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=p;p=$;try{return Q()}finally{p=J}},t.unstable_scheduleCallback=function($,Q,J){var ve=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ve+J:ve):J=ve,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=J+le,$={id:h++,callback:Q,priorityLevel:$,startTime:J,expirationTime:le,sortIndex:-1},J>ve?($.sortIndex=J,e(c,$),n(u)===null&&$===n(c)&&(I?(w(y),y=-1):I=!0,de(b,J-ve))):($.sortIndex=le,e(u,$),T||g||(T=!0,zn(M))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var Q=p;return function(){var J=p;p=Q;try{return $.apply(this,arguments)}finally{p=J}}}})(D_);V_.exports=D_;var fA=V_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA=V,Mt=fA;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b_=new Set,wo={};function oi(t,e){qi(t,e),qi(t+"Capture",e)}function qi(t,e){for(wo[t]=e,t=0;t<e.length;t++)b_.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kh=Object.prototype.hasOwnProperty,mA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ug={},Bg={};function gA(t){return kh.call(Bg,t)?!0:kh.call(Ug,t)?!1:mA.test(t)?Bg[t]=!0:(Ug[t]=!0,!1)}function yA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vA(t,e,n,r){if(e===null||typeof e>"u"||yA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function _f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vf,_f);tt[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vf,_f);tt[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vf,_f);tt[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wf(t,e,n,r){var i=tt.hasOwnProperty(e)?tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vA(e,n,i,r)&&(n=null),r||i===null?gA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=pA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),wi=Symbol.for("react.portal"),Ei=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),Dh=Symbol.for("react.suspense"),bh=Symbol.for("react.suspense_list"),xf=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),L_=Symbol.for("react.offscreen"),$g=Symbol.iterator;function Ns(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,Mc;function Ks(t){if(Mc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mc=e&&e[1]||""}return`
`+Mc+t}var Lc=!1;function Oc(t,e){if(!t||Lc)return"";Lc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Lc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ks(t):""}function _A(t){switch(t.tag){case 5:return Ks(t.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 2:case 15:return t=Oc(t.type,!1),t;case 11:return t=Oc(t.type.render,!1),t;case 1:return t=Oc(t.type,!0),t;default:return""}}function Nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ei:return"Fragment";case wi:return"Portal";case Vh:return"Profiler";case Ef:return"StrictMode";case Dh:return"Suspense";case bh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M_:return(t.displayName||"Context")+".Consumer";case N_:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xf:return e=t.displayName||null,e!==null?e:Nh(t.type)||"Memo";case Qn:e=t._payload,t=t._init;try{return Nh(t(e))}catch{}}return null}function wA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nh(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EA(t){var e=O_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ua(t){t._valueTracker||(t._valueTracker=EA(t))}function F_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mh(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function j_(t,e){e=e.checked,e!=null&&wf(t,"checked",e,!1)}function Lh(t,e){j_(t,e);var n=gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oh(t,e.type,gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oh(t,e,n){(e!=="number"||bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qs=Array.isArray;function Fi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(qs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gr(n)}}function U_(t,e){var n=gr(e.value),r=gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,$_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TA=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(t){TA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),to[e]=to[t]})});function z_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||to.hasOwnProperty(t)&&to[t]?(""+e).trim():e+"px"}function W_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xA=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uh(t,e){if(e){if(xA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Bh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=null;function Sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zh=null,ji=null,Ui=null;function Hg(t){if(t=na(t)){if(typeof zh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ku(e),zh(t.stateNode,t.type,e))}}function K_(t){ji?Ui?Ui.push(t):Ui=[t]:ji=t}function q_(){if(ji){var t=ji,e=Ui;if(Ui=ji=null,Hg(t),e)for(t=0;t<e.length;t++)Hg(e[t])}}function H_(t,e){return t(e)}function G_(){}var Fc=!1;function Q_(t,e,n){if(Fc)return t(e,n);Fc=!0;try{return H_(t,e,n)}finally{Fc=!1,(ji!==null||Ui!==null)&&(G_(),q_())}}function To(t,e){var n=t.stateNode;if(n===null)return null;var r=ku(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Wh=!1;if(bn)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Wh=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Wh=!1}function SA(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var no=!1,Nl=null,Ml=!1,Kh=null,AA={onError:function(t){no=!0,Nl=t}};function IA(t,e,n,r,i,s,o,a,u){no=!1,Nl=null,SA.apply(AA,arguments)}function PA(t,e,n,r,i,s,o,a,u){if(IA.apply(this,arguments),no){if(no){var c=Nl;no=!1,Nl=null}else throw Error(U(198));Ml||(Ml=!0,Kh=c)}}function ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gg(t){if(ai(t)!==t)throw Error(U(188))}function CA(t){var e=t.alternate;if(!e){if(e=ai(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gg(i),t;if(s===r)return Gg(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function X_(t){return t=CA(t),t!==null?J_(t):null}function J_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J_(t);if(e!==null)return e;t=t.sibling}return null}var Z_=Mt.unstable_scheduleCallback,Qg=Mt.unstable_cancelCallback,RA=Mt.unstable_shouldYield,kA=Mt.unstable_requestPaint,ke=Mt.unstable_now,VA=Mt.unstable_getCurrentPriorityLevel,Af=Mt.unstable_ImmediatePriority,ew=Mt.unstable_UserBlockingPriority,Ll=Mt.unstable_NormalPriority,DA=Mt.unstable_LowPriority,tw=Mt.unstable_IdlePriority,Iu=null,dn=null;function bA(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:LA,NA=Math.log,MA=Math.LN2;function LA(t){return t>>>=0,t===0?32:31-(NA(t)/MA|0)|0}var $a=64,za=4194304;function Hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ol(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hs(a):(s&=o,s!==0&&(r=Hs(s)))}else o=n&~i,o!==0?r=Hs(o):s!==0&&(r=Hs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function OA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=OA(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function qh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nw(){var t=$a;return $a<<=1,!($a&4194240)&&($a=64),t}function jc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function jA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function If(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iw,Pf,sw,ow,aw,Hh=!1,Wa=[],ir=null,sr=null,or=null,xo=new Map,So=new Map,Xn=[],UA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yg(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function Ls(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=na(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BA(t,e,n,r,i){switch(e){case"focusin":return ir=Ls(ir,t,e,n,r,i),!0;case"dragenter":return sr=Ls(sr,t,e,n,r,i),!0;case"mouseover":return or=Ls(or,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Ls(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,So.set(s,Ls(So.get(s)||null,t,e,n,r,i)),!0}return!1}function lw(t){var e=$r(t.target);if(e!==null){var n=ai(e);if(n!==null){if(e=n.tag,e===13){if(e=Y_(n),e!==null){t.blockedOn=e,aw(t.priority,function(){sw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$h=r,n.target.dispatchEvent(r),$h=null}else return e=na(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function Xg(t,e,n){fl(t)&&n.delete(e)}function $A(){Hh=!1,ir!==null&&fl(ir)&&(ir=null),sr!==null&&fl(sr)&&(sr=null),or!==null&&fl(or)&&(or=null),xo.forEach(Xg),So.forEach(Xg)}function Os(t,e){t.blockedOn===e&&(t.blockedOn=null,Hh||(Hh=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,$A)))}function Ao(t){function e(i){return Os(i,t)}if(0<Wa.length){Os(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&Os(ir,t),sr!==null&&Os(sr,t),or!==null&&Os(or,t),xo.forEach(e),So.forEach(e),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)lw(n),n.blockedOn===null&&Xn.shift()}var Bi=$n.ReactCurrentBatchConfig,Fl=!0;function zA(t,e,n,r){var i=ae,s=Bi.transition;Bi.transition=null;try{ae=1,Cf(t,e,n,r)}finally{ae=i,Bi.transition=s}}function WA(t,e,n,r){var i=ae,s=Bi.transition;Bi.transition=null;try{ae=4,Cf(t,e,n,r)}finally{ae=i,Bi.transition=s}}function Cf(t,e,n,r){if(Fl){var i=Gh(t,e,n,r);if(i===null)Qc(t,e,r,jl,n),Yg(t,r);else if(BA(i,t,e,n,r))r.stopPropagation();else if(Yg(t,r),e&4&&-1<UA.indexOf(t)){for(;i!==null;){var s=na(i);if(s!==null&&iw(s),s=Gh(t,e,n,r),s===null&&Qc(t,e,r,jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qc(t,e,r,null,n)}}var jl=null;function Gh(t,e,n,r){if(jl=null,t=Sf(r),t=$r(t),t!==null)if(e=ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function uw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VA()){case Af:return 1;case ew:return 4;case Ll:case DA:return 16;case tw:return 536870912;default:return 16}default:return 16}}var er=null,Rf=null,pl=null;function cw(){if(pl)return pl;var t,e=Rf,n=e.length,r,i="value"in er?er.value:er.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pl=i.slice(t,1<r?1-r:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ka(){return!0}function Jg(){return!1}function Ft(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ka:Jg,this.isPropagationStopped=Jg,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),e}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=Ft(cs),ta=Te({},cs,{view:0,detail:0}),KA=Ft(ta),Uc,Bc,Fs,Pu=Te({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fs&&(Fs&&t.type==="mousemove"?(Uc=t.screenX-Fs.screenX,Bc=t.screenY-Fs.screenY):Bc=Uc=0,Fs=t),Uc)},movementY:function(t){return"movementY"in t?t.movementY:Bc}}),Zg=Ft(Pu),qA=Te({},Pu,{dataTransfer:0}),HA=Ft(qA),GA=Te({},ta,{relatedTarget:0}),$c=Ft(GA),QA=Te({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),YA=Ft(QA),XA=Te({},cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JA=Ft(XA),ZA=Te({},cs,{data:0}),ey=Ft(ZA),eI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nI[t])?!!e[t]:!1}function Vf(){return rI}var iI=Te({},ta,{key:function(t){if(t.key){var e=eI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sI=Ft(iI),oI=Te({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ty=Ft(oI),aI=Te({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),lI=Ft(aI),uI=Te({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),cI=Ft(uI),hI=Te({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dI=Ft(hI),fI=[9,13,27,32],Df=bn&&"CompositionEvent"in window,ro=null;bn&&"documentMode"in document&&(ro=document.documentMode);var pI=bn&&"TextEvent"in window&&!ro,hw=bn&&(!Df||ro&&8<ro&&11>=ro),ny=" ",ry=!1;function dw(t,e){switch(t){case"keyup":return fI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ti=!1;function mI(t,e){switch(t){case"compositionend":return fw(e);case"keypress":return e.which!==32?null:(ry=!0,ny);case"textInput":return t=e.data,t===ny&&ry?null:t;default:return null}}function gI(t,e){if(Ti)return t==="compositionend"||!Df&&dw(t,e)?(t=cw(),pl=Rf=er=null,Ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hw&&e.locale!=="ko"?null:e.data;default:return null}}var yI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yI[t.type]:e==="textarea"}function pw(t,e,n,r){K_(r),e=Ul(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var io=null,Io=null;function vI(t){Aw(t,0)}function Cu(t){var e=Ai(t);if(F_(e))return t}function _I(t,e){if(t==="change")return e}var mw=!1;if(bn){var zc;if(bn){var Wc="oninput"in document;if(!Wc){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Wc=typeof sy.oninput=="function"}zc=Wc}else zc=!1;mw=zc&&(!document.documentMode||9<document.documentMode)}function oy(){io&&(io.detachEvent("onpropertychange",gw),Io=io=null)}function gw(t){if(t.propertyName==="value"&&Cu(Io)){var e=[];pw(e,Io,t,Sf(t)),Q_(vI,e)}}function wI(t,e,n){t==="focusin"?(oy(),io=e,Io=n,io.attachEvent("onpropertychange",gw)):t==="focusout"&&oy()}function EI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cu(Io)}function TI(t,e){if(t==="click")return Cu(e)}function xI(t,e){if(t==="input"||t==="change")return Cu(e)}function SI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:SI;function Po(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kh.call(e,i)||!on(t[i],e[i]))return!1}return!0}function ay(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ly(t,e){var n=ay(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ay(n)}}function yw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vw(){for(var t=window,e=bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bl(t.document)}return e}function bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AI(t){var e=vw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yw(n.ownerDocument.documentElement,n)){if(r!==null&&bf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ly(n,s);var o=ly(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var II=bn&&"documentMode"in document&&11>=document.documentMode,xi=null,Qh=null,so=null,Yh=!1;function uy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yh||xi==null||xi!==bl(r)||(r=xi,"selectionStart"in r&&bf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),so&&Po(so,r)||(so=r,r=Ul(Qh,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xi)))}function qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionend:qa("Transition","TransitionEnd")},Kc={},_w={};bn&&(_w=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ru(t){if(Kc[t])return Kc[t];if(!Si[t])return t;var e=Si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _w)return Kc[t]=e[n];return t}var ww=Ru("animationend"),Ew=Ru("animationiteration"),Tw=Ru("animationstart"),xw=Ru("transitionend"),Sw=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){Sw.set(t,e),oi(e,[t])}for(var qc=0;qc<cy.length;qc++){var Hc=cy[qc],PI=Hc.toLowerCase(),CI=Hc[0].toUpperCase()+Hc.slice(1);Sr(PI,"on"+CI)}Sr(ww,"onAnimationEnd");Sr(Ew,"onAnimationIteration");Sr(Tw,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(xw,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function hy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PA(r,e,void 0,t),t.currentTarget=null}function Aw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;hy(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;hy(i,a,c),s=u}}}if(Ml)throw t=Kh,Ml=!1,Kh=null,t}function pe(t,e){var n=e[td];n===void 0&&(n=e[td]=new Set);var r=t+"__bubble";n.has(r)||(Iw(e,t,2,!1),n.add(r))}function Gc(t,e,n){var r=0;e&&(r|=4),Iw(n,t,r,e)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Ha]){t[Ha]=!0,b_.forEach(function(n){n!=="selectionchange"&&(RI.has(n)||Gc(n,!1,t),Gc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ha]||(e[Ha]=!0,Gc("selectionchange",!1,e))}}function Iw(t,e,n,r){switch(uw(e)){case 1:var i=zA;break;case 4:i=WA;break;default:i=Cf}n=i.bind(null,e,n,t),i=void 0,!Wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$r(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Q_(function(){var c=s,h=Sf(n),d=[];e:{var p=Sw.get(t);if(p!==void 0){var g=kf,T=t;switch(t){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":g=sI;break;case"focusin":T="focus",g=$c;break;case"focusout":T="blur",g=$c;break;case"beforeblur":case"afterblur":g=$c;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=lI;break;case ww:case Ew:case Tw:g=YA;break;case xw:g=cI;break;case"scroll":g=KA;break;case"wheel":g=dI;break;case"copy":case"cut":case"paste":g=JA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ty}var I=(e&4)!==0,P=!I&&t==="scroll",w=I?p!==null?p+"Capture":null:p;I=[];for(var v=c,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,w!==null&&(b=To(v,w),b!=null&&I.push(Ro(v,b,x)))),P)break;v=v.return}0<I.length&&(p=new g(p,T,null,n,h),d.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==$h&&(T=n.relatedTarget||n.fromElement)&&($r(T)||T[Nn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=c,T=T?$r(T):null,T!==null&&(P=ai(T),T!==P||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=c),g!==T)){if(I=Zg,b="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(I=ty,b="onPointerLeave",w="onPointerEnter",v="pointer"),P=g==null?p:Ai(g),x=T==null?p:Ai(T),p=new I(b,v+"leave",g,n,h),p.target=P,p.relatedTarget=x,b=null,$r(h)===c&&(I=new I(w,v+"enter",T,n,h),I.target=x,I.relatedTarget=P,b=I),P=b,g&&T)t:{for(I=g,w=T,v=0,x=I;x;x=gi(x))v++;for(x=0,b=w;b;b=gi(b))x++;for(;0<v-x;)I=gi(I),v--;for(;0<x-v;)w=gi(w),x--;for(;v--;){if(I===w||w!==null&&I===w.alternate)break t;I=gi(I),w=gi(w)}I=null}else I=null;g!==null&&dy(d,p,g,I,!1),T!==null&&P!==null&&dy(d,P,T,I,!0)}}e:{if(p=c?Ai(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=_I;else if(iy(p))if(mw)M=xI;else{M=EI;var O=wI}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=TI);if(M&&(M=M(t,c))){pw(d,M,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Oh(p,"number",p.value)}switch(O=c?Ai(c):window,t){case"focusin":(iy(O)||O.contentEditable==="true")&&(xi=O,Qh=c,so=null);break;case"focusout":so=Qh=xi=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,uy(d,n,h);break;case"selectionchange":if(II)break;case"keydown":case"keyup":uy(d,n,h)}var A;if(Df)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ti?dw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(hw&&n.locale!=="ko"&&(Ti||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ti&&(A=cw()):(er=h,Rf="value"in er?er.value:er.textContent,Ti=!0)),O=Ul(c,y),0<O.length&&(y=new ey(y,t,null,n,h),d.push({event:y,listeners:O}),A?y.data=A:(A=fw(n),A!==null&&(y.data=A)))),(A=pI?mI(t,n):gI(t,n))&&(c=Ul(c,"onBeforeInput"),0<c.length&&(h=new ey("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=A))}Aw(d,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=To(t,n),s!=null&&r.unshift(Ro(t,s,i)),s=To(t,e),s!=null&&r.push(Ro(t,s,i))),t=t.return}return r}function gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=To(n,s),u!=null&&o.unshift(Ro(n,u,a))):i||(u=To(n,s),u!=null&&o.push(Ro(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kI=/\r\n?/g,VI=/\u0000|\uFFFD/g;function fy(t){return(typeof t=="string"?t:""+t).replace(kI,`
`).replace(VI,"")}function Ga(t,e,n){if(e=fy(e),fy(t)!==e&&n)throw Error(U(425))}function Bl(){}var Xh=null,Jh=null;function Zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,DI=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(t){return py.resolve(null).then(t).catch(NI)}:ed;function NI(t){setTimeout(function(){throw t})}function Yc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ao(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function my(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),cn="__reactFiber$"+hs,ko="__reactProps$"+hs,Nn="__reactContainer$"+hs,td="__reactEvents$"+hs,MI="__reactListeners$"+hs,LI="__reactHandles$"+hs;function $r(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=my(t);t!==null;){if(n=t[cn])return n;t=my(t)}return e}t=n,n=t.parentNode}return null}function na(t){return t=t[cn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ku(t){return t[ko]||null}var nd=[],Ii=-1;function Ar(t){return{current:t}}function me(t){0>Ii||(t.current=nd[Ii],nd[Ii]=null,Ii--)}function he(t,e){Ii++,nd[Ii]=t.current,t.current=e}var yr={},mt=Ar(yr),At=Ar(!1),Xr=yr;function Hi(t,e){var n=t.type.contextTypes;if(!n)return yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function It(t){return t=t.childContextTypes,t!=null}function $l(){me(At),me(mt)}function gy(t,e,n){if(mt.current!==yr)throw Error(U(168));he(mt,e),he(At,n)}function Pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,wA(t)||"Unknown",i));return Te({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,Xr=mt.current,he(mt,t),he(At,At.current),!0}function yy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Pw(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,me(At),me(mt),he(mt,t)):me(At),he(At,n)}var In=null,Vu=!1,Xc=!1;function Cw(t){In===null?In=[t]:In.push(t)}function OI(t){Vu=!0,Cw(t)}function Ir(){if(!Xc&&In!==null){Xc=!0;var t=0,e=ae;try{var n=In;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,Vu=!1}catch(i){throw In!==null&&(In=In.slice(t+1)),Z_(Af,Ir),i}finally{ae=e,Xc=!1}}return null}var Pi=[],Ci=0,Wl=null,Kl=0,$t=[],zt=0,Jr=null,Pn=1,Cn="";function Or(t,e){Pi[Ci++]=Kl,Pi[Ci++]=Wl,Wl=t,Kl=e}function Rw(t,e,n){$t[zt++]=Pn,$t[zt++]=Cn,$t[zt++]=Jr,Jr=t;var r=Pn;t=Cn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var s=32-rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pn=1<<32-rn(e)+i|n<<i|r,Cn=s+t}else Pn=1<<s|n<<i|r,Cn=t}function Nf(t){t.return!==null&&(Or(t,1),Rw(t,1,0))}function Mf(t){for(;t===Wl;)Wl=Pi[--Ci],Pi[Ci]=null,Kl=Pi[--Ci],Pi[Ci]=null;for(;t===Jr;)Jr=$t[--zt],$t[zt]=null,Cn=$t[--zt],$t[zt]=null,Pn=$t[--zt],$t[zt]=null}var Dt=null,kt=null,ye=!1,tn=null;function kw(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,kt=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jr!==null?{id:Pn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,kt=null,!0):!1;default:return!1}}function rd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function id(t){if(ye){var e=kt;if(e){var n=e;if(!vy(t,e)){if(rd(t))throw Error(U(418));e=ar(n.nextSibling);var r=Dt;e&&vy(t,e)?kw(r,n):(t.flags=t.flags&-4097|2,ye=!1,Dt=t)}}else{if(rd(t))throw Error(U(418));t.flags=t.flags&-4097|2,ye=!1,Dt=t}}}function _y(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function Qa(t){if(t!==Dt)return!1;if(!ye)return _y(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zh(t.type,t.memoizedProps)),e&&(e=kt)){if(rd(t))throw Vw(),Error(U(418));for(;e;)kw(t,e),e=ar(e.nextSibling)}if(_y(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kt=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kt=null}}else kt=Dt?ar(t.stateNode.nextSibling):null;return!0}function Vw(){for(var t=kt;t;)t=ar(t.nextSibling)}function Gi(){kt=Dt=null,ye=!1}function Lf(t){tn===null?tn=[t]:tn.push(t)}var FI=$n.ReactCurrentBatchConfig;function js(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wy(t){var e=t._init;return e(t._payload)}function Dw(t){function e(w,v){if(t){var x=w.deletions;x===null?(w.deletions=[v],w.flags|=16):x.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=hr(w,v),w.index=0,w.sibling=null,w}function s(w,v,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<v?(w.flags|=2,v):x):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,x,b){return v===null||v.tag!==6?(v=ih(x,w.mode,b),v.return=w,v):(v=i(v,x),v.return=w,v)}function u(w,v,x,b){var M=x.type;return M===Ei?h(w,v,x.props.children,b,x.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qn&&wy(M)===v.type)?(b=i(v,x.props),b.ref=js(w,v,x),b.return=w,b):(b=Tl(x.type,x.key,x.props,null,w.mode,b),b.ref=js(w,v,x),b.return=w,b)}function c(w,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=sh(x,w.mode,b),v.return=w,v):(v=i(v,x.children||[]),v.return=w,v)}function h(w,v,x,b,M){return v===null||v.tag!==7?(v=Gr(x,w.mode,b,M),v.return=w,v):(v=i(v,x),v.return=w,v)}function d(w,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ih(""+v,w.mode,x),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ja:return x=Tl(v.type,v.key,v.props,null,w.mode,x),x.ref=js(w,null,v),x.return=w,x;case wi:return v=sh(v,w.mode,x),v.return=w,v;case Qn:var b=v._init;return d(w,b(v._payload),x)}if(qs(v)||Ns(v))return v=Gr(v,w.mode,x,null),v.return=w,v;Ya(w,v)}return null}function p(w,v,x,b){var M=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:a(w,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ja:return x.key===M?u(w,v,x,b):null;case wi:return x.key===M?c(w,v,x,b):null;case Qn:return M=x._init,p(w,v,M(x._payload),b)}if(qs(x)||Ns(x))return M!==null?null:h(w,v,x,b,null);Ya(w,x)}return null}function g(w,v,x,b,M){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(x)||null,a(v,w,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ja:return w=w.get(b.key===null?x:b.key)||null,u(v,w,b,M);case wi:return w=w.get(b.key===null?x:b.key)||null,c(v,w,b,M);case Qn:var O=b._init;return g(w,v,x,O(b._payload),M)}if(qs(b)||Ns(b))return w=w.get(x)||null,h(v,w,b,M,null);Ya(v,b)}return null}function T(w,v,x,b){for(var M=null,O=null,A=v,y=v=0,E=null;A!==null&&y<x.length;y++){A.index>y?(E=A,A=null):E=A.sibling;var S=p(w,A,x[y],b);if(S===null){A===null&&(A=E);break}t&&A&&S.alternate===null&&e(w,A),v=s(S,v,y),O===null?M=S:O.sibling=S,O=S,A=E}if(y===x.length)return n(w,A),ye&&Or(w,y),M;if(A===null){for(;y<x.length;y++)A=d(w,x[y],b),A!==null&&(v=s(A,v,y),O===null?M=A:O.sibling=A,O=A);return ye&&Or(w,y),M}for(A=r(w,A);y<x.length;y++)E=g(A,w,y,x[y],b),E!==null&&(t&&E.alternate!==null&&A.delete(E.key===null?y:E.key),v=s(E,v,y),O===null?M=E:O.sibling=E,O=E);return t&&A.forEach(function(k){return e(w,k)}),ye&&Or(w,y),M}function I(w,v,x,b){var M=Ns(x);if(typeof M!="function")throw Error(U(150));if(x=M.call(x),x==null)throw Error(U(151));for(var O=M=null,A=v,y=v=0,E=null,S=x.next();A!==null&&!S.done;y++,S=x.next()){A.index>y?(E=A,A=null):E=A.sibling;var k=p(w,A,S.value,b);if(k===null){A===null&&(A=E);break}t&&A&&k.alternate===null&&e(w,A),v=s(k,v,y),O===null?M=k:O.sibling=k,O=k,A=E}if(S.done)return n(w,A),ye&&Or(w,y),M;if(A===null){for(;!S.done;y++,S=x.next())S=d(w,S.value,b),S!==null&&(v=s(S,v,y),O===null?M=S:O.sibling=S,O=S);return ye&&Or(w,y),M}for(A=r(w,A);!S.done;y++,S=x.next())S=g(A,w,y,S.value,b),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?y:S.key),v=s(S,v,y),O===null?M=S:O.sibling=S,O=S);return t&&A.forEach(function(D){return e(w,D)}),ye&&Or(w,y),M}function P(w,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Ei&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ja:e:{for(var M=x.key,O=v;O!==null;){if(O.key===M){if(M=x.type,M===Ei){if(O.tag===7){n(w,O.sibling),v=i(O,x.props.children),v.return=w,w=v;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qn&&wy(M)===O.type){n(w,O.sibling),v=i(O,x.props),v.ref=js(w,O,x),v.return=w,w=v;break e}n(w,O);break}else e(w,O);O=O.sibling}x.type===Ei?(v=Gr(x.props.children,w.mode,b,x.key),v.return=w,w=v):(b=Tl(x.type,x.key,x.props,null,w.mode,b),b.ref=js(w,v,x),b.return=w,w=b)}return o(w);case wi:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(w,v.sibling),v=i(v,x.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=sh(x,w.mode,b),v.return=w,w=v}return o(w);case Qn:return O=x._init,P(w,v,O(x._payload),b)}if(qs(x))return T(w,v,x,b);if(Ns(x))return I(w,v,x,b);Ya(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,x),v.return=w,w=v):(n(w,v),v=ih(x,w.mode,b),v.return=w,w=v),o(w)):n(w,v)}return P}var Qi=Dw(!0),bw=Dw(!1),ql=Ar(null),Hl=null,Ri=null,Of=null;function Ff(){Of=Ri=Hl=null}function jf(t){var e=ql.current;me(ql),t._currentValue=e}function sd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $i(t,e){Hl=t,Of=Ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(Of!==t)if(t={context:t,memoizedValue:e,next:null},Ri===null){if(Hl===null)throw Error(U(308));Ri=t,Hl.dependencies={lanes:0,firstContext:t}}else Ri=Ri.next=t;return e}var zr=null;function Uf(t){zr===null?zr=[t]:zr.push(t)}function Nw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Uf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mn(t,n)}return i=r.interleaved,i===null?(e.next=e,Uf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mn(t,n)}function gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}function Ey(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gl(t,e,n,r){var i=t.updateQueue;Yn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,h=c=u=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,I=a;switch(p=e,g=n,I.tag){case 1:if(T=I.payload,typeof T=="function"){d=T.call(g,d,p);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,p=typeof T=="function"?T.call(g,d,p):T,p==null)break e;d=Te({},d,p);break e;case 2:Yn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ei|=o,t.lanes=o,t.memoizedState=d}}function Ty(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ra={},fn=Ar(ra),Vo=Ar(ra),Do=Ar(ra);function Wr(t){if(t===ra)throw Error(U(174));return t}function $f(t,e){switch(he(Do,e),he(Vo,t),he(fn,ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}me(fn),he(fn,e)}function Yi(){me(fn),me(Vo),me(Do)}function Lw(t){Wr(Do.current);var e=Wr(fn.current),n=jh(e,t.type);e!==n&&(he(Vo,t),he(fn,n))}function zf(t){Vo.current===t&&(me(fn),me(Vo))}var _e=Ar(0);function Ql(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jc=[];function Wf(){for(var t=0;t<Jc.length;t++)Jc[t]._workInProgressVersionPrimary=null;Jc.length=0}var yl=$n.ReactCurrentDispatcher,Zc=$n.ReactCurrentBatchConfig,Zr=0,Ee=null,Le=null,Be=null,Yl=!1,oo=!1,bo=0,jI=0;function ot(){throw Error(U(321))}function Kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function qf(t,e,n,r,i,s){if(Zr=s,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yl.current=t===null||t.memoizedState===null?zI:WI,t=n(r,i),oo){s=0;do{if(oo=!1,bo=0,25<=s)throw Error(U(301));s+=1,Be=Le=null,e.updateQueue=null,yl.current=KI,t=n(r,i)}while(oo)}if(yl.current=Xl,e=Le!==null&&Le.next!==null,Zr=0,Be=Le=Ee=null,Yl=!1,e)throw Error(U(300));return t}function Hf(){var t=bo!==0;return bo=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=t:Be=Be.next=t,Be}function Gt(){if(Le===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?Ee.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?Ee.memoizedState=Be=t:Be=Be.next=t}return Be}function No(t,e){return typeof e=="function"?e(t):e}function eh(t){var e=Gt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Zr&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Ee.lanes|=h,ei|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,on(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ee.lanes|=s,ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function th(t){var e=Gt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);on(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ow(){}function Fw(t,e){var n=Ee,r=Gt(),i=e(),s=!on(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,Gf(Bw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Mo(9,Uw.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(U(349));Zr&30||jw(n,e,i)}return i}function jw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uw(t,e,n,r){e.value=n,e.getSnapshot=r,$w(e)&&zw(t)}function Bw(t,e,n){return n(function(){$w(e)&&zw(t)})}function $w(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function zw(t){var e=Mn(t,1);e!==null&&sn(e,t,1,-1)}function xy(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=$I.bind(null,Ee,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ww(){return Gt().memoizedState}function vl(t,e,n,r){var i=un();Ee.flags|=t,i.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function Du(t,e,n,r){var i=Gt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,r!==null&&Kf(r,o.deps)){i.memoizedState=Mo(e,n,s,r);return}}Ee.flags|=t,i.memoizedState=Mo(1|e,n,s,r)}function Sy(t,e){return vl(8390656,8,t,e)}function Gf(t,e){return Du(2048,8,t,e)}function Kw(t,e){return Du(4,2,t,e)}function qw(t,e){return Du(4,4,t,e)}function Hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gw(t,e,n){return n=n!=null?n.concat([t]):null,Du(4,4,Hw.bind(null,e,t),n)}function Qf(){}function Qw(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yw(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xw(t,e,n){return Zr&21?(on(n,e)||(n=nw(),Ee.lanes|=n,ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function UI(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Zc.transition;Zc.transition={};try{t(!1),e()}finally{ae=n,Zc.transition=r}}function Jw(){return Gt().memoizedState}function BI(t,e,n){var r=cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zw(t))eE(e,n);else if(n=Nw(t,e,n,r),n!==null){var i=wt();sn(n,t,r,i),tE(n,e,r)}}function $I(t,e,n){var r=cr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zw(t))eE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,on(a,o)){var u=e.interleaved;u===null?(i.next=i,Uf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Nw(t,e,i,r),n!==null&&(i=wt(),sn(n,t,r,i),tE(n,e,r))}}function Zw(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function eE(t,e){oo=Yl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}var Xl={readContext:Ht,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},zI={readContext:Ht,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Sy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vl(4194308,4,Hw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return vl(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BI.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:xy,useDebugValue:Qf,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=xy(!1),e=t[0];return t=UI.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,i=un();if(ye){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ze===null)throw Error(U(349));Zr&30||jw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Sy(Bw.bind(null,r,s,t),[t]),r.flags|=2048,Mo(9,Uw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=un(),e=ze.identifierPrefix;if(ye){var n=Cn,r=Pn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WI={readContext:Ht,useCallback:Qw,useContext:Ht,useEffect:Gf,useImperativeHandle:Gw,useInsertionEffect:Kw,useLayoutEffect:qw,useMemo:Yw,useReducer:eh,useRef:Ww,useState:function(){return eh(No)},useDebugValue:Qf,useDeferredValue:function(t){var e=Gt();return Xw(e,Le.memoizedState,t)},useTransition:function(){var t=eh(No)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1},KI={readContext:Ht,useCallback:Qw,useContext:Ht,useEffect:Gf,useImperativeHandle:Gw,useInsertionEffect:Kw,useLayoutEffect:qw,useMemo:Yw,useReducer:th,useRef:Ww,useState:function(){return th(No)},useDebugValue:Qf,useDeferredValue:function(t){var e=Gt();return Le===null?e.memoizedState=t:Xw(e,Le.memoizedState,t)},useTransition:function(){var t=th(No)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function od(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bu={isMounted:function(t){return(t=t._reactInternals)?ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=cr(t),s=Rn(r,i);s.payload=e,n!=null&&(s.callback=n),e=lr(t,s,i),e!==null&&(sn(e,t,i,r),gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=cr(t),s=Rn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=lr(t,s,i),e!==null&&(sn(e,t,i,r),gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=cr(t),i=Rn(n,r);i.tag=2,e!=null&&(i.callback=e),e=lr(t,i,r),e!==null&&(sn(e,t,r,n),gl(e,t,r))}};function Ay(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Po(n,r)||!Po(i,s):!0}function nE(t,e,n){var r=!1,i=yr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ht(s):(i=It(e)?Xr:mt.current,r=e.contextTypes,s=(r=r!=null)?Hi(t,i):yr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Iy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bu.enqueueReplaceState(e,e.state,null)}function ad(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Bf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ht(s):(s=It(e)?Xr:mt.current,i.context=Hi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(od(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bu.enqueueReplaceState(i,i.state,null),Gl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,e){try{var n="",r=e;do n+=_A(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ld(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qI=typeof WeakMap=="function"?WeakMap:Map;function rE(t,e,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zl||(Zl=!0,vd=r),ld(t,e)},n}function iE(t,e,n){n=Rn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ld(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ld(t,e),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Py(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oP.bind(null,t,e,n),e.then(t,t))}function Cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ry(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rn(-1,1),e.tag=2,lr(n,e,1))),n.lanes|=1),t)}var HI=$n.ReactCurrentOwner,St=!1;function vt(t,e,n,r){e.child=t===null?bw(e,null,n,r):Qi(e,t.child,n,r)}function ky(t,e,n,r,i){n=n.render;var s=e.ref;return $i(e,i),r=qf(t,e,n,r,s,i),n=Hf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(ye&&n&&Nf(e),e.flags|=1,vt(t,e,r,i),e.child)}function Vy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,sE(t,e,s,r,i)):(t=Tl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(o,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=hr(s,r),t.ref=e.ref,t.return=e,e.child=t}function sE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Po(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return ud(t,e,n,r,i)}function oE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Vi,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Vi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(Vi,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(Vi,Rt),Rt|=r;return vt(t,e,i,n),e.child}function aE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ud(t,e,n,r,i){var s=It(n)?Xr:mt.current;return s=Hi(e,s),$i(e,i),n=qf(t,e,n,r,s,i),r=Hf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(ye&&r&&Nf(e),e.flags|=1,vt(t,e,n,i),e.child)}function Dy(t,e,n,r,i){if(It(n)){var s=!0;zl(e)}else s=!1;if($i(e,i),e.stateNode===null)_l(t,e),nE(e,n,r),ad(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ht(c):(c=It(n)?Xr:mt.current,c=Hi(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Iy(e,o,r,c),Yn=!1;var p=e.memoizedState;o.state=p,Gl(e,r,o,i),u=e.memoizedState,a!==r||p!==u||At.current||Yn?(typeof h=="function"&&(od(e,n,h,r),u=e.memoizedState),(a=Yn||Ay(e,n,a,r,p,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zt(e.type,a),o.props=c,d=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=It(n)?Xr:mt.current,u=Hi(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==u)&&Iy(e,o,r,u),Yn=!1,p=e.memoizedState,o.state=p,Gl(e,r,o,i);var T=e.memoizedState;a!==d||p!==T||At.current||Yn?(typeof g=="function"&&(od(e,n,g,r),T=e.memoizedState),(c=Yn||Ay(e,n,c,r,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return cd(t,e,n,r,s,i)}function cd(t,e,n,r,i,s){aE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&yy(e,n,!1),Ln(t,e,s);r=e.stateNode,HI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qi(e,t.child,null,s),e.child=Qi(e,null,a,s)):vt(t,e,a,s),e.memoizedState=r.state,i&&yy(e,n,!0),e.child}function lE(t){var e=t.stateNode;e.pendingContext?gy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gy(t,e.context,!1),$f(t,e.containerInfo)}function by(t,e,n,r,i){return Gi(),Lf(i),e.flags|=256,vt(t,e,n,r),e.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function uE(t,e,n){var r=e.pendingProps,i=_e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(_e,i&1),t===null)return id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lu(o,r,0,null),t=Gr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dd(n),e.memoizedState=hd,t):Yf(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=hr(a,s):(s=Gr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=hd,r}return s=t.child,t=s.sibling,r=hr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=Lu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xa(t,e,n,r){return r!==null&&Lf(r),Qi(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=nh(Error(U(422))),Xa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Lu({mode:"visible",children:r.children},i,0,null),s=Gr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qi(e,t.child,null,o),e.child.memoizedState=dd(o),e.memoizedState=hd,s);if(!(e.mode&1))return Xa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=nh(s,r,void 0),Xa(t,e,o,r)}if(a=(o&t.childLanes)!==0,St||a){if(r=ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Mn(t,i),sn(r,t,i,-1))}return np(),r=nh(Error(U(421))),Xa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,kt=ar(i.nextSibling),Dt=e,ye=!0,tn=null,t!==null&&($t[zt++]=Pn,$t[zt++]=Cn,$t[zt++]=Jr,Pn=t.id,Cn=t.overflow,Jr=e),e=Yf(e,r.children),e.flags|=4096,e)}function Ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sd(t.return,e,n)}function rh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vt(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,n,e);else if(t.tag===19)Ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(_e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ql(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ql(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rh(e,!0,n,null,s);break;case"together":rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QI(t,e,n){switch(e.tag){case 3:lE(e),Gi();break;case 5:Lw(e);break;case 1:It(e.type)&&zl(e);break;case 4:$f(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(ql,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?uE(t,e,n):(he(_e,_e.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);he(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,oE(t,e,n)}return Ln(t,e,n)}var hE,fd,dE,fE;hE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fd=function(){};dE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wr(fn.current);var s=null;switch(n){case"input":i=Mh(t,i),r=Mh(t,r),s=[];break;case"select":i=Te({},i,{value:void 0}),r=Te({},r,{value:void 0}),s=[];break;case"textarea":i=Fh(t,i),r=Fh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bl)}Uh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&pe("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Us(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function YI(t,e,n){var r=e.pendingProps;switch(Mf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return It(e.type)&&$l(),at(e),null;case 3:return r=e.stateNode,Yi(),me(At),me(mt),Wf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Ed(tn),tn=null))),fd(t,e),at(e),null;case 5:zf(e);var i=Wr(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)dE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return at(e),null}if(t=Wr(fn.current),Qa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cn]=e,r[ko]=s,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<Gs.length;i++)pe(Gs[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":zg(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":Kg(r,s),pe("invalid",r)}Uh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ga(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ga(r.textContent,a,t),i=["children",""+a]):wo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":Ua(r),Wg(r,s,!0);break;case"textarea":Ua(r),qg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cn]=e,t[ko]=r,hE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bh(n,r),n){case"dialog":pe("cancel",t),pe("close",t),i=r;break;case"iframe":case"object":case"embed":pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gs.length;i++)pe(Gs[i],t);i=r;break;case"source":pe("error",t),i=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),i=r;break;case"details":pe("toggle",t),i=r;break;case"input":zg(t,r),i=Mh(t,r),pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Te({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Kg(t,r),i=Fh(t,r),pe("invalid",t);break;default:i=r}Uh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?W_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Eo(t,u):typeof u=="number"&&Eo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&pe("scroll",t):u!=null&&wf(t,s,u,o))}switch(n){case"input":Ua(t),Wg(t,r,!1);break;case"textarea":Ua(t),qg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)fE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Wr(Do.current),Wr(fn.current),Qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ga(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return at(e),null;case 13:if(me(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&kt!==null&&e.mode&1&&!(e.flags&128))Vw(),Gi(),e.flags|=98560,s=!1;else if(s=Qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[cn]=e}else Gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),s=!1}else tn!==null&&(Ed(tn),tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Fe===0&&(Fe=3):np())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Yi(),fd(t,e),t===null&&Co(e.stateNode.containerInfo),at(e),null;case 10:return jf(e.type._context),at(e),null;case 17:return It(e.type)&&$l(),at(e),null;case 19:if(me(_e),s=e.memoizedState,s===null)return at(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Us(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ql(t),o!==null){for(e.flags|=128,Us(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(_e,_e.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>Ji&&(e.flags|=128,r=!0,Us(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ql(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Us(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ye)return at(e),null}else 2*ke()-s.renderingStartTime>Ji&&n!==1073741824&&(e.flags|=128,r=!0,Us(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=_e.current,he(_e,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function XI(t,e){switch(Mf(e),e.tag){case 1:return It(e.type)&&$l(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yi(),me(At),me(mt),Wf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zf(e),null;case 13:if(me(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(_e),null;case 4:return Yi(),null;case 10:return jf(e.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var Ja=!1,ht=!1,JI=typeof WeakSet=="function"?WeakSet:Set,W=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(t,e,r)}else n.current=null}function pd(t,e,n){try{n()}catch(r){Ie(t,e,r)}}var My=!1;function ZI(t,e){if(Xh=Fl,t=vw(),bf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(u=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jh={focusedElem:t,selectionRange:n},Fl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,P=T.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:Zt(e.type,I),P);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Ie(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return T=My,My=!1,T}function ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&pd(e,n,s)}i=i.next}while(i!==r)}}function Nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function md(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pE(t){var e=t.alternate;e!==null&&(t.alternate=null,pE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[ko],delete e[td],delete e[MI],delete e[LI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mE(t){return t.tag===5||t.tag===3||t.tag===4}function Ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bl));else if(r!==4&&(t=t.child,t!==null))for(gd(t,e,n),t=t.sibling;t!==null;)gd(t,e,n),t=t.sibling}function yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yd(t,e,n),t=t.sibling;t!==null;)yd(t,e,n),t=t.sibling}var He=null,en=!1;function Hn(t,e,n){for(n=n.child;n!==null;)gE(t,e,n),n=n.sibling}function gE(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Iu,n)}catch{}switch(n.tag){case 5:ht||ki(n,e);case 6:var r=He,i=en;He=null,Hn(t,e,n),He=r,en=i,He!==null&&(en?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(en?(t=He,n=n.stateNode,t.nodeType===8?Yc(t.parentNode,n):t.nodeType===1&&Yc(t,n),Ao(t)):Yc(He,n.stateNode));break;case 4:r=He,i=en,He=n.stateNode.containerInfo,en=!0,Hn(t,e,n),He=r,en=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pd(n,e,o),i=i.next}while(i!==r)}Hn(t,e,n);break;case 1:if(!ht&&(ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ie(n,e,a)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Hn(t,e,n),ht=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function Oy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JI),e.forEach(function(r){var i=lP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,en=!1;break e;case 3:He=a.stateNode.containerInfo,en=!0;break e;case 4:He=a.stateNode.containerInfo,en=!0;break e}a=a.return}if(He===null)throw Error(U(160));gE(s,o,i),He=null,en=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ie(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yE(e,t),e=e.sibling}function yE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),ln(t),r&4){try{ao(3,t,t.return),Nu(3,t)}catch(I){Ie(t,t.return,I)}try{ao(5,t,t.return)}catch(I){Ie(t,t.return,I)}}break;case 1:Xt(e,t),ln(t),r&512&&n!==null&&ki(n,n.return);break;case 5:if(Xt(e,t),ln(t),r&512&&n!==null&&ki(n,n.return),t.flags&32){var i=t.stateNode;try{Eo(i,"")}catch(I){Ie(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&j_(i,s),Bh(a,o);var c=Bh(a,s);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?W_(i,d):h==="dangerouslySetInnerHTML"?$_(i,d):h==="children"?Eo(i,d):wf(i,h,d,c)}switch(a){case"input":Lh(i,s);break;case"textarea":U_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Fi(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Fi(i,!!s.multiple,s.defaultValue,!0):Fi(i,!!s.multiple,s.multiple?[]:"",!1))}i[ko]=s}catch(I){Ie(t,t.return,I)}}break;case 6:if(Xt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Ie(t,t.return,I)}}break;case 3:if(Xt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(I){Ie(t,t.return,I)}break;case 4:Xt(e,t),ln(t);break;case 13:Xt(e,t),ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zf=ke())),r&4&&Oy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(c=ht)||h,Xt(e,t),ht=c):Xt(e,t),ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(p=W,g=p.child,p.tag){case 0:case 11:case 14:case 15:ao(4,p,p.return);break;case 1:ki(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(I){Ie(r,n,I)}}break;case 5:ki(p,p.return);break;case 22:if(p.memoizedState!==null){jy(d);continue}}g!==null?(g.return=p,W=g):jy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=z_("display",o))}catch(I){Ie(t,t.return,I)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(I){Ie(t,t.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xt(e,t),ln(t),r&4&&Oy(t);break;case 21:break;default:Xt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mE(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eo(i,""),r.flags&=-33);var s=Ly(t);yd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ly(t);gd(t,a,o);break;default:throw Error(U(161))}}catch(u){Ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eP(t,e,n){W=t,vE(t)}function vE(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ja;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ht;a=Ja;var c=ht;if(Ja=o,(ht=u)&&!c)for(W=i;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Uy(i):u!==null?(u.return=o,W=u):Uy(i);for(;s!==null;)W=s,vE(s),s=s.sibling;W=i,Ja=a,ht=c}Fy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):Fy(t)}}function Fy(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ty(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ty(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ao(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ht||e.flags&512&&md(e)}catch(p){Ie(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function jy(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Uy(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nu(4,e)}catch(u){Ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ie(e,i,u)}}var s=e.return;try{md(e)}catch(u){Ie(e,s,u)}break;case 5:var o=e.return;try{md(e)}catch(u){Ie(e,o,u)}}}catch(u){Ie(e,e.return,u)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var tP=Math.ceil,Jl=$n.ReactCurrentDispatcher,Xf=$n.ReactCurrentOwner,Kt=$n.ReactCurrentBatchConfig,re=0,ze=null,be=null,Ze=0,Rt=0,Vi=Ar(0),Fe=0,Lo=null,ei=0,Mu=0,Jf=0,lo=null,xt=null,Zf=0,Ji=1/0,An=null,Zl=!1,vd=null,ur=null,Za=!1,tr=null,eu=0,uo=0,_d=null,wl=-1,El=0;function wt(){return re&6?ke():wl!==-1?wl:wl=ke()}function cr(t){return t.mode&1?re&2&&Ze!==0?Ze&-Ze:FI.transition!==null?(El===0&&(El=nw()),El):(t=ae,t!==0||(t=window.event,t=t===void 0?16:uw(t.type)),t):1}function sn(t,e,n,r){if(50<uo)throw uo=0,_d=null,Error(U(185));ea(t,n,r),(!(re&2)||t!==ze)&&(t===ze&&(!(re&2)&&(Mu|=n),Fe===4&&Jn(t,Ze)),Pt(t,r),n===1&&re===0&&!(e.mode&1)&&(Ji=ke()+500,Vu&&Ir()))}function Pt(t,e){var n=t.callbackNode;FA(t,e);var r=Ol(t,t===ze?Ze:0);if(r===0)n!==null&&Qg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qg(n),e===1)t.tag===0?OI(By.bind(null,t)):Cw(By.bind(null,t)),bI(function(){!(re&6)&&Ir()}),n=null;else{switch(rw(r)){case 1:n=Af;break;case 4:n=ew;break;case 16:n=Ll;break;case 536870912:n=tw;break;default:n=Ll}n=IE(n,_E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _E(t,e){if(wl=-1,El=0,re&6)throw Error(U(327));var n=t.callbackNode;if(zi()&&t.callbackNode!==n)return null;var r=Ol(t,t===ze?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tu(t,r);else{e=r;var i=re;re|=2;var s=EE();(ze!==t||Ze!==e)&&(An=null,Ji=ke()+500,Hr(t,e));do try{iP();break}catch(a){wE(t,a)}while(!0);Ff(),Jl.current=s,re=i,be!==null?e=0:(ze=null,Ze=0,e=Fe)}if(e!==0){if(e===2&&(i=qh(t),i!==0&&(r=i,e=wd(t,i))),e===1)throw n=Lo,Hr(t,0),Jn(t,r),Pt(t,ke()),n;if(e===6)Jn(t,r);else{if(i=t.current.alternate,!(r&30)&&!nP(i)&&(e=tu(t,r),e===2&&(s=qh(t),s!==0&&(r=s,e=wd(t,s))),e===1))throw n=Lo,Hr(t,0),Jn(t,r),Pt(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Fr(t,xt,An);break;case 3:if(Jn(t,r),(r&130023424)===r&&(e=Zf+500-ke(),10<e)){if(Ol(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ed(Fr.bind(null,t,xt,An),e);break}Fr(t,xt,An);break;case 4:if(Jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tP(r/1960))-r,10<r){t.timeoutHandle=ed(Fr.bind(null,t,xt,An),r);break}Fr(t,xt,An);break;case 5:Fr(t,xt,An);break;default:throw Error(U(329))}}}return Pt(t,ke()),t.callbackNode===n?_E.bind(null,t):null}function wd(t,e){var n=lo;return t.current.memoizedState.isDehydrated&&(Hr(t,e).flags|=256),t=tu(t,e),t!==2&&(e=xt,xt=n,e!==null&&Ed(e)),t}function Ed(t){xt===null?xt=t:xt.push.apply(xt,t)}function nP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~Jf,e&=~Mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function By(t){if(re&6)throw Error(U(327));zi();var e=Ol(t,0);if(!(e&1))return Pt(t,ke()),null;var n=tu(t,e);if(t.tag!==0&&n===2){var r=qh(t);r!==0&&(e=r,n=wd(t,r))}if(n===1)throw n=Lo,Hr(t,0),Jn(t,e),Pt(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,xt,An),Pt(t,ke()),null}function ep(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Ji=ke()+500,Vu&&Ir())}}function ti(t){tr!==null&&tr.tag===0&&!(re&6)&&zi();var e=re;re|=1;var n=Kt.transition,r=ae;try{if(Kt.transition=null,ae=1,t)return t()}finally{ae=r,Kt.transition=n,re=e,!(re&6)&&Ir()}}function tp(){Rt=Vi.current,me(Vi)}function Hr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DI(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(Mf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$l();break;case 3:Yi(),me(At),me(mt),Wf();break;case 5:zf(r);break;case 4:Yi();break;case 13:me(_e);break;case 19:me(_e);break;case 10:jf(r.type._context);break;case 22:case 23:tp()}n=n.return}if(ze=t,be=t=hr(t.current,null),Ze=Rt=e,Fe=0,Lo=null,Jf=Mu=ei=0,xt=lo=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zr=null}return t}function wE(t,e){do{var n=be;try{if(Ff(),yl.current=Xl,Yl){for(var r=Ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yl=!1}if(Zr=0,Be=Le=Ee=null,oo=!1,bo=0,Xf.current=null,n===null||n.return===null){Fe=1,Lo=e,be=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Ze,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Cy(o);if(g!==null){g.flags&=-257,Ry(g,o,a,s,e),g.mode&1&&Py(s,c,e),e=g,u=c;var T=e.updateQueue;if(T===null){var I=new Set;I.add(u),e.updateQueue=I}else T.add(u);break e}else{if(!(e&1)){Py(s,c,e),np();break e}u=Error(U(426))}}else if(ye&&a.mode&1){var P=Cy(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Ry(P,o,a,s,e),Lf(Xi(u,a));break e}}s=u=Xi(u,a),Fe!==4&&(Fe=2),lo===null?lo=[s]:lo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=rE(s,u,e);Ey(s,w);break e;case 1:a=u;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ur===null||!ur.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=iE(s,a,e);Ey(s,b);break e}}s=s.return}while(s!==null)}xE(n)}catch(M){e=M,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function EE(){var t=Jl.current;return Jl.current=Xl,t===null?Xl:t}function np(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),ze===null||!(ei&268435455)&&!(Mu&268435455)||Jn(ze,Ze)}function tu(t,e){var n=re;re|=2;var r=EE();(ze!==t||Ze!==e)&&(An=null,Hr(t,e));do try{rP();break}catch(i){wE(t,i)}while(!0);if(Ff(),re=n,Jl.current=r,be!==null)throw Error(U(261));return ze=null,Ze=0,Fe}function rP(){for(;be!==null;)TE(be)}function iP(){for(;be!==null&&!RA();)TE(be)}function TE(t){var e=AE(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?xE(t):be=e,Xf.current=null}function xE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XI(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,be=null;return}}else if(n=YI(n,e,Rt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Fe===0&&(Fe=5)}function Fr(t,e,n){var r=ae,i=Kt.transition;try{Kt.transition=null,ae=1,sP(t,e,n,r)}finally{Kt.transition=i,ae=r}return null}function sP(t,e,n,r){do zi();while(tr!==null);if(re&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jA(t,s),t===ze&&(be=ze=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,IE(Ll,function(){return zi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kt.transition,Kt.transition=null;var o=ae;ae=1;var a=re;re|=4,Xf.current=null,ZI(t,n),yE(n,t),AI(Jh),Fl=!!Xh,Jh=Xh=null,t.current=n,eP(n),kA(),re=a,ae=o,Kt.transition=s}else t.current=n;if(Za&&(Za=!1,tr=t,eu=i),s=t.pendingLanes,s===0&&(ur=null),bA(n.stateNode),Pt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,t=vd,vd=null,t;return eu&1&&t.tag!==0&&zi(),s=t.pendingLanes,s&1?t===_d?uo++:(uo=0,_d=t):uo=0,Ir(),null}function zi(){if(tr!==null){var t=rw(eu),e=Kt.transition,n=ae;try{if(Kt.transition=null,ae=16>t?16:t,tr===null)var r=!1;else{if(t=tr,tr=null,eu=0,re&6)throw Error(U(331));var i=re;for(re|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:ao(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var p=h.sibling,g=h.return;if(pE(h),h===c){W=null;break}if(p!==null){p.return=g,W=p;break}W=g}}}var T=s.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ao(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,W=w;break e}W=s.return}}var v=t.current;for(W=v;W!==null;){o=W;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,W=x;else e:for(o=v;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nu(9,a)}}catch(M){Ie(a,a.return,M)}if(a===o){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(re=i,Ir(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Iu,t)}catch{}r=!0}return r}finally{ae=n,Kt.transition=e}}return!1}function $y(t,e,n){e=Xi(n,e),e=rE(t,e,1),t=lr(t,e,1),e=wt(),t!==null&&(ea(t,1,e),Pt(t,e))}function Ie(t,e,n){if(t.tag===3)$y(t,t,n);else for(;e!==null;){if(e.tag===3){$y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){t=Xi(n,t),t=iE(e,t,1),e=lr(e,t,1),t=wt(),e!==null&&(ea(e,1,t),Pt(e,t));break}}e=e.return}}function oP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Ze&n)===n&&(Fe===4||Fe===3&&(Ze&130023424)===Ze&&500>ke()-Zf?Hr(t,0):Jf|=n),Pt(t,e)}function SE(t,e){e===0&&(t.mode&1?(e=za,za<<=1,!(za&130023424)&&(za=4194304)):e=1);var n=wt();t=Mn(t,e),t!==null&&(ea(t,e,n),Pt(t,n))}function aP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SE(t,n)}function lP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),SE(t,n)}var AE;AE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,QI(t,e,n);St=!!(t.flags&131072)}else St=!1,ye&&e.flags&1048576&&Rw(e,Kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var i=Hi(e,mt.current);$i(e,n),i=qf(null,e,r,t,i,n);var s=Hf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(s=!0,zl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bf(e),i.updater=bu,e.stateNode=i,i._reactInternals=e,ad(e,r,t,n),e=cd(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&Nf(e),vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cP(r),t=Zt(r,t),i){case 0:e=ud(null,e,r,t,n);break e;case 1:e=Dy(null,e,r,t,n);break e;case 11:e=ky(null,e,r,t,n);break e;case 14:e=Vy(null,e,r,Zt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),ud(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Dy(t,e,r,i,n);case 3:e:{if(lE(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mw(t,e),Gl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Xi(Error(U(423)),e),e=by(t,e,r,n,i);break e}else if(r!==i){i=Xi(Error(U(424)),e),e=by(t,e,r,n,i);break e}else for(kt=ar(e.stateNode.containerInfo.firstChild),Dt=e,ye=!0,tn=null,n=bw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){e=Ln(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Lw(e),t===null&&id(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Zh(r,i)?o=null:s!==null&&Zh(r,s)&&(e.flags|=32),aE(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&id(e),null;case 13:return uE(t,e,n);case 4:return $f(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qi(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),ky(t,e,r,i,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,he(ql,r._currentValue),r._currentValue=o,s!==null)if(on(s.value,o)){if(s.children===i.children&&!At.current){e=Ln(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),sd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$i(e,n),i=Ht(i),r=r(i),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),Vy(t,e,r,i,n);case 15:return sE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),_l(t,e),e.tag=1,It(r)?(t=!0,zl(e)):t=!1,$i(e,n),nE(e,r,i),ad(e,r,i,n),cd(null,e,r,!0,t,n);case 19:return cE(t,e,n);case 22:return oE(t,e,n)}throw Error(U(156,e.tag))};function IE(t,e){return Z_(t,e)}function uP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new uP(t,e,n,r)}function rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cP(t){if(typeof t=="function")return rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===xf)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ei:return Gr(n.children,i,s,e);case Ef:o=8,i|=8;break;case Vh:return t=Wt(12,n,e,i|2),t.elementType=Vh,t.lanes=s,t;case Dh:return t=Wt(13,n,e,i),t.elementType=Dh,t.lanes=s,t;case bh:return t=Wt(19,n,e,i),t.elementType=bh,t.lanes=s,t;case L_:return Lu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N_:o=10;break e;case M_:o=9;break e;case Tf:o=11;break e;case xf:o=14;break e;case Qn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Gr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Lu(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=L_,t.lanes=n,t.stateNode={isHidden:!1},t}function ih(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function sh(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ip(t,e,n,r,i,s,o,a,u){return t=new hP(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(s),t}function dP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PE(t){if(!t)return yr;t=t._reactInternals;e:{if(ai(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(It(n))return Pw(t,n,e)}return e}function CE(t,e,n,r,i,s,o,a,u){return t=ip(n,r,!0,t,i,s,o,a,u),t.context=PE(null),n=t.current,r=wt(),i=cr(n),s=Rn(r,i),s.callback=e??null,lr(n,s,i),t.current.lanes=i,ea(t,i,r),Pt(t,r),t}function Ou(t,e,n,r){var i=e.current,s=wt(),o=cr(i);return n=PE(n),e.context===null?e.context=n:e.pendingContext=n,e=Rn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lr(i,e,o),t!==null&&(sn(t,i,o,s),gl(t,i,o)),o}function nu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sp(t,e){zy(t,e),(t=t.alternate)&&zy(t,e)}function fP(){return null}var RE=typeof reportError=="function"?reportError:function(t){console.error(t)};function op(t){this._internalRoot=t}Fu.prototype.render=op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ou(t,e,null,null)};Fu.prototype.unmount=op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ti(function(){Ou(null,t,null,null)}),e[Nn]=null}};function Fu(t){this._internalRoot=t}Fu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ow();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&lw(t)}};function ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function pP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=nu(o);s.call(c)}}var o=CE(e,r,t,0,null,!1,!1,"",Wy);return t._reactRootContainer=o,t[Nn]=o.current,Co(t.nodeType===8?t.parentNode:t),ti(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=nu(u);a.call(c)}}var u=ip(t,0,!1,null,null,!1,!1,"",Wy);return t._reactRootContainer=u,t[Nn]=u.current,Co(t.nodeType===8?t.parentNode:t),ti(function(){Ou(e,u,n,r)}),u}function Uu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=nu(o);a.call(u)}}Ou(e,o,t,i)}else o=pP(n,e,t,i,r);return nu(o)}iw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hs(e.pendingLanes);n!==0&&(If(e,n|1),Pt(e,ke()),!(re&6)&&(Ji=ke()+500,Ir()))}break;case 13:ti(function(){var r=Mn(t,1);if(r!==null){var i=wt();sn(r,t,1,i)}}),sp(t,1)}};Pf=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=wt();sn(e,t,134217728,n)}sp(t,134217728)}};sw=function(t){if(t.tag===13){var e=cr(t),n=Mn(t,e);if(n!==null){var r=wt();sn(n,t,e,r)}sp(t,e)}};ow=function(){return ae};aw=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};zh=function(t,e,n){switch(e){case"input":if(Lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ku(r);if(!i)throw Error(U(90));F_(r),Lh(r,i)}}}break;case"textarea":U_(t,n);break;case"select":e=n.value,e!=null&&Fi(t,!!n.multiple,e,!1)}};H_=ep;G_=ti;var mP={usingClientEntryPoint:!1,Events:[na,Ai,ku,K_,q_,ep]},Bs={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gP={bundleType:Bs.bundleType,version:Bs.version,rendererPackageName:Bs.rendererPackageName,rendererConfig:Bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X_(t),t===null?null:t.stateNode},findFiberByHostInstance:Bs.findFiberByHostInstance||fP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{Iu=el.inject(gP),dn=el}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mP;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(e))throw Error(U(200));return dP(t,e,null,n)};Ot.createRoot=function(t,e){if(!ap(t))throw Error(U(299));var n=!1,r="",i=RE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ip(t,1,!1,null,null,n,!1,r,i),t[Nn]=e.current,Co(t.nodeType===8?t.parentNode:t),new op(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=X_(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return ti(t)};Ot.hydrate=function(t,e,n){if(!ju(e))throw Error(U(200));return Uu(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!ap(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=CE(e,null,t,1,n??null,i,!1,s,o),t[Nn]=e.current,Co(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fu(e)};Ot.render=function(t,e,n){if(!ju(e))throw Error(U(200));return Uu(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!ju(t))throw Error(U(40));return t._reactRootContainer?(ti(function(){Uu(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Ot.unstable_batchedUpdates=ep;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ju(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Uu(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function kE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kE)}catch(t){console.error(t)}}kE(),k_.exports=Ot;var yP=k_.exports,Ky=yP;Rh.createRoot=Ky.createRoot,Rh.hydrateRoot=Ky.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oo.apply(this,arguments)}var nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nr||(nr={}));const qy="popstate";function vP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Td("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ru(i)}return wP(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _P(){return Math.random().toString(36).substr(2,8)}function Hy(t,e){return{usr:t.state,key:t.key,idx:e}}function Td(t,e,n,r){return n===void 0&&(n=null),Oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ds(e):e,{state:n,key:e&&e.key||r||_P()})}function ru(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=nr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(Oo({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=nr.Pop;let P=h(),w=P==null?null:P-c;c=P,u&&u({action:a,location:I.location,delta:w})}function p(P,w){a=nr.Push;let v=Td(I.location,P,w);c=h()+1;let x=Hy(v,c),b=I.createHref(v);try{o.pushState(x,"",b)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(b)}s&&u&&u({action:a,location:I.location,delta:1})}function g(P,w){a=nr.Replace;let v=Td(I.location,P,w);c=h();let x=Hy(v,c),b=I.createHref(v);o.replaceState(x,"",b),s&&u&&u({action:a,location:I.location,delta:0})}function T(P){let w=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof P=="string"?P:ru(P);return v=v.replace(/ $/,"%20"),Me(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qy,d),u=P,()=>{i.removeEventListener(qy,d),u=null}},createHref(P){return e(i,P)},createURL:T,encodeLocation(P){let w=T(P);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(P){return o.go(P)}};return I}var Gy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gy||(Gy={}));function EP(t,e,n){return n===void 0&&(n="/"),TP(t,e,n)}function TP(t,e,n,r){let i=typeof e=="string"?ds(e):e,s=up(i.pathname||"/",n);if(s==null)return null;let o=VE(t);xP(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=MP(s);a=DP(o[u],c)}return a}function VE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Me(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=dr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VE(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of DE(s.path))i(s,o,u)}),e}function DE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=DE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function xP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SP=/^:[\w-]+$/,AP=3,IP=2,PP=1,CP=10,RP=-2,Qy=t=>t==="*";function kP(t,e){let n=t.split("/"),r=n.length;return n.some(Qy)&&(r+=RP),e&&(r+=IP),n.filter(i=>!Qy(i)).reduce((i,s)=>i+(SP.test(s)?AP:s===""?PP:CP),r)}function VP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function DP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=bP({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:dr([s,d.pathname]),pathnameBase:UP(dr([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=dr([s,d.pathnameBase]))}return o}function bP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let I=a[d]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=a[d];return g&&!T?c[p]=void 0:c[p]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function NP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function MP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function up(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const LP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OP=t=>LP.test(t);function FP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ds(t):t,s;if(n)if(OP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),lp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Yy(n.substring(1),"/"):s=Yy(n,e)}else s=e;return{pathname:s,search:BP(r),hash:$P(i)}}function Yy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function oh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bE(t,e){let n=jP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ds(t):(i=Oo({},t),Me(!i.pathname||!i.pathname.includes("?"),oh("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),oh("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),oh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let u=FP(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const dr=t=>t.join("/").replace(/\/\/+/g,"/"),UP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$P=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ME=["post","put","patch","delete"];new Set(ME);const WP=["get",...ME];new Set(WP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fo.apply(this,arguments)}const cp=V.createContext(null),KP=V.createContext(null),li=V.createContext(null),Bu=V.createContext(null),Pr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),LE=V.createContext(null);function qP(t,e){let{relative:n}=e===void 0?{}:e;ia()||Me(!1);let{basename:r,navigator:i}=V.useContext(li),{hash:s,pathname:o,search:a}=FE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:dr([r,o])),i.createHref({pathname:u,search:a,hash:s})}function ia(){return V.useContext(Bu)!=null}function $u(){return ia()||Me(!1),V.useContext(Bu).location}function OE(t){V.useContext(li).static||V.useLayoutEffect(t)}function hp(){let{isDataRoute:t}=V.useContext(Pr);return t?oC():HP()}function HP(){ia()||Me(!1);let t=V.useContext(cp),{basename:e,future:n,navigator:r}=V.useContext(li),{matches:i}=V.useContext(Pr),{pathname:s}=$u(),o=JSON.stringify(bE(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return OE(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=NE(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:dr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function GP(){let{matches:t}=V.useContext(Pr),e=t[t.length-1];return e?e.params:{}}function FE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(li),{matches:i}=V.useContext(Pr),{pathname:s}=$u(),o=JSON.stringify(bE(i,r.v7_relativeSplatPath));return V.useMemo(()=>NE(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function QP(t,e){return YP(t,e)}function YP(t,e,n,r){ia()||Me(!1);let{navigator:i}=V.useContext(li),{matches:s}=V.useContext(Pr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=$u(),h;if(e){var d;let P=typeof e=="string"?ds(e):e;u==="/"||(d=P.pathname)!=null&&d.startsWith(u)||Me(!1),h=P}else h=c;let p=h.pathname||"/",g=p;if(u!=="/"){let P=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(P.length).join("/")}let T=EP(t,{pathname:g}),I=tC(T&&T.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:dr([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:dr([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&I?V.createElement(Bu.Provider,{value:{location:Fo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:nr.Pop}},I):I}function XP(){let t=sC(),e=zP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const JP=V.createElement(XP,null);class ZP extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Pr.Provider,{value:this.props.routeContext},V.createElement(LE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eC(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(cp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Pr.Provider,{value:e},r)}function tC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,T=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,T=!1,I=null,P=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,I=d.route.errorElement||JP,u&&(c<0&&p===0?(aC("route-fallback"),T=!0,P=null):c===p&&(T=!0,P=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let x;return g?x=I:T?x=P:d.route.Component?x=V.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,V.createElement(eC,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?V.createElement(ZP,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var jE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jE||{}),UE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(UE||{});function nC(t){let e=V.useContext(cp);return e||Me(!1),e}function rC(t){let e=V.useContext(KP);return e||Me(!1),e}function iC(t){let e=V.useContext(Pr);return e||Me(!1),e}function BE(t){let e=iC(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function sC(){var t;let e=V.useContext(LE),n=rC(),r=BE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oC(){let{router:t}=nC(jE.UseNavigateStable),e=BE(UE.UseNavigateStable),n=V.useRef(!1);return OE(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fo({fromRouteId:e},s)))},[t,e])}const Xy={};function aC(t,e,n){Xy[t]||(Xy[t]=!0)}function lC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xd(t){Me(!1)}function uC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=nr.Pop,navigator:s,static:o=!1,future:a}=t;ia()&&Me(!1);let u=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:u,navigator:s,static:o,future:Fo({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=ds(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:T="default"}=r,I=V.useMemo(()=>{let P=up(h,u);return P==null?null:{location:{pathname:P,search:d,hash:p,state:g,key:T},navigationType:i}},[u,h,d,p,g,T,i]);return I==null?null:V.createElement(li.Provider,{value:c},V.createElement(Bu.Provider,{children:n,value:I}))}function cC(t){let{children:e,location:n}=t;return QP(Sd(e),n)}new Promise(()=>{});function Sd(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,Sd(r.props.children,s));return}r.type!==xd&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sd(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ad(){return Ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ad.apply(this,arguments)}function hC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fC(t,e){return t.button===0&&(!e||e==="_self")&&!dC(t)}const pC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mC="6";try{window.__reactRouterVersion=mC}catch{}const gC="startTransition",Jy=oA[gC];function yC(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=vP({window:i,v5Compat:!0}));let o=s.current,[a,u]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(d=>{c&&Jy?Jy(()=>u(d)):u(d)},[u,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>lC(r),[r]),V.createElement(uC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const vC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_C=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wC=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:d}=e,p=hC(e,pC),{basename:g}=V.useContext(li),T,I=!1;if(typeof c=="string"&&_C.test(c)&&(T=c,vC))try{let x=new URL(window.location.href),b=c.startsWith("//")?new URL(x.protocol+c):new URL(c),M=up(b.pathname,g);b.origin===x.origin&&M!=null?c=M+b.search+b.hash:I=!0}catch{}let P=qP(c,{relative:i}),w=EC(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||w(x)}return V.createElement("a",Ad({},p,{href:T||P,onClick:I||s?r:v,ref:n,target:u}))});var Zy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var ev;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ev||(ev={}));function EC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=hp(),c=$u(),h=FE(t,{relative:o});return V.useCallback(d=>{if(fC(d,n)){d.preventDefault();let p=r!==void 0?r:ru(c)===ru(h);u(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}const TC="modulepreload",xC=function(t){return"/news-unpacked/"+t},tv={},nv=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=xC(u),u in tv)return;tv[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":TC,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},dp=V.createContext({});function fp(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const zu=V.createContext(null),pp=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class SC extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function AC({children:t,isPresent:e}){const n=V.useId(),r=V.useRef(null),i=V.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=V.useContext(pp);return V.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),R.jsx(SC,{isPresent:e,childRef:r,sizeRef:i,children:V.cloneElement(t,{ref:r})})}const IC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=fp(PC),u=V.useId(),c=V.useCallback(d=>{a.set(d,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),h=V.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return V.useMemo(()=>{a.forEach((d,p)=>a.set(p,!1))},[n]),V.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=R.jsx(AC,{isPresent:n,children:t})),R.jsx(zu.Provider,{value:h,children:t})};function PC(){return new Map}function $E(t=!0){const e=V.useContext(zu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=V.useId();V.useEffect(()=>{t&&i(s)},[t]);const o=V.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const tl=t=>t.key||"";function rv(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const mp=typeof window<"u",zE=mp?V.useLayoutEffect:V.useEffect,gp=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,u]=$E(o),c=V.useMemo(()=>rv(t),[t]),h=o&&!a?[]:c.map(tl),d=V.useRef(!0),p=V.useRef(c),g=fp(()=>new Map),[T,I]=V.useState(c),[P,w]=V.useState(c);zE(()=>{d.current=!1,p.current=c;for(let b=0;b<P.length;b++){const M=tl(P[b]);h.includes(M)?g.delete(M):g.get(M)!==!0&&g.set(M,!1)}},[P,h.length,h.join("-")]);const v=[];if(c!==T){let b=[...c];for(let M=0;M<P.length;M++){const O=P[M],A=tl(O);h.includes(A)||(b.splice(M,0,O),v.push(O))}s==="wait"&&v.length&&(b=v),w(rv(b)),I(c);return}const{forceRender:x}=V.useContext(dp);return R.jsx(R.Fragment,{children:P.map(b=>{const M=tl(b),O=o&&!a?!1:c===P||h.includes(M),A=()=>{if(g.has(M))g.set(M,!0);else return;let y=!0;g.forEach(E=>{E||(y=!1)}),y&&(x==null||x(),w(p.current),o&&(u==null||u()),r&&r())};return R.jsx(IC,{isPresent:O,initial:!d.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:O?void 0:A,children:b},M)})})},bt=t=>t;let WE=bt;function yp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zi=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},kn=t=>t*1e3,Vn=t=>t/1e3,CC={useManualTiming:!1};function RC(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const g=d&&r?e:n;return h&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,u.process(c))}};return u}const nl=["read","resolveKeyframes","update","preRender","render","postRender"],kC=40;function KE(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=nl.reduce((w,v)=>(w[v]=RC(s),w),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:d,postRender:p}=o,g=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,kC),1),i.timestamp=w,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},T=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:nl.reduce((w,v)=>{const x=o[v];return w[v]=(b,M=!1,O=!1)=>(n||T(),x.schedule(b,M,O)),w},{}),cancel:w=>{for(let v=0;v<nl.length;v++)o[nl[v]].cancel(w)},state:i,steps:o}}const{schedule:ge,cancel:vr,state:Ge,steps:ah}=KE(typeof requestAnimationFrame<"u"?requestAnimationFrame:bt,!0),qE=V.createContext({strict:!1}),iv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},es={};for(const t in iv)es[t]={isEnabled:e=>iv[t].some(n=>!!e[n])};function VC(t){for(const e in t)es[e]={...es[e],...t[e]}}const DC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function iu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||DC.has(t)}let HE=t=>!iu(t);function bC(t){t&&(HE=e=>e.startsWith("on")?!iu(e):t(e))}try{bC(require("@emotion/is-prop-valid").default)}catch{}function NC(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(HE(i)||n===!0&&iu(i)||!e&&!iu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function MC(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Wu=V.createContext({});function jo(t){return typeof t=="string"||Array.isArray(t)}function Ku(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const vp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_p=["initial",...vp];function qu(t){return Ku(t.animate)||_p.some(e=>jo(t[e]))}function GE(t){return!!(qu(t)||t.variants)}function LC(t,e){if(qu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jo(n)?n:void 0,animate:jo(r)?r:void 0}}return t.inherit!==!1?e:{}}function OC(t){const{initial:e,animate:n}=LC(t,V.useContext(Wu));return V.useMemo(()=>({initial:e,animate:n}),[sv(e),sv(n)])}function sv(t){return Array.isArray(t)?t.join(" "):t}const FC=Symbol.for("motionComponentSymbol");function Di(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function jC(t,e,n){return V.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Di(n)&&(n.current=r))},[e])}const wp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UC="framerAppearId",QE="data-"+wp(UC),{schedule:Ep}=KE(queueMicrotask,!1),YE=V.createContext({});function BC(t,e,n,r,i){var s,o;const{visualElement:a}=V.useContext(Wu),u=V.useContext(qE),c=V.useContext(zu),h=V.useContext(pp).reducedMotion,d=V.useRef(null);r=r||u.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=d.current,g=V.useContext(YE);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&$C(d.current,n,i,g);const T=V.useRef(!1);V.useInsertionEffect(()=>{p&&T.current&&p.update(n,c)});const I=n[QE],P=V.useRef(!!I&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,I))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,I)));return zE(()=>{p&&(T.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Ep.render(p.render),P.current&&p.animationState&&p.animationState.animateChanges())}),V.useEffect(()=>{p&&(!P.current&&p.animationState&&p.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,I)}),P.current=!1))}),p}function $C(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:XE(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Di(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function XE(t){if(t)return t.options.allowProjection!==!1?t.projection:XE(t.parent)}function zC({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&VC(t);function a(c,h){let d;const p={...V.useContext(pp),...c,layoutId:WC(c)},{isStatic:g}=p,T=OC(c),I=r(c,g);if(!g&&mp){KC();const P=qC(p);d=P.MeasureLayout,T.visualElement=BC(i,I,p,e,P.ProjectionNode)}return R.jsxs(Wu.Provider,{value:T,children:[d&&T.visualElement?R.jsx(d,{visualElement:T.visualElement,...p}):null,n(i,c,jC(I,T.visualElement,h),I,g,T.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const u=V.forwardRef(a);return u[FC]=i,u}function WC({layoutId:t}){const e=V.useContext(dp).id;return e&&t!==void 0?e+"-"+t:t}function KC(t,e){V.useContext(qE).strict}function qC(t){const{drag:e,layout:n}=es;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const HC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tp(t){return typeof t!="string"||t.includes("-")?!1:!!(HC.indexOf(t)>-1||/[A-Z]/u.test(t))}function ov(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function xp(t,e,n,r){if(typeof e=="function"){const[i,s]=ov(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ov(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Id=t=>Array.isArray(t),GC=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),QC=t=>Id(t)?t[t.length-1]||0:t,ft=t=>!!(t&&t.getVelocity);function xl(t){const e=ft(t)?t.get():t;return GC(e)?e.toValue():e}function YC({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:XC(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const JE=t=>(e,n)=>{const r=V.useContext(Wu),i=V.useContext(zu),s=()=>YC(t,e,r,i);return n?s():fp(s)};function XC(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=xl(s[p]);let{initial:o,animate:a}=t;const u=qu(t),c=GE(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!Ku(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const T=xp(t,p[g]);if(T){const{transitionEnd:I,transition:P,...w}=T;for(const v in w){let x=w[v];if(Array.isArray(x)){const b=h?x.length-1:0;x=x[b]}x!==null&&(i[v]=x)}for(const v in I)i[v]=I[v]}}}return i}const fs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ui=new Set(fs),ZE=t=>e=>typeof e=="string"&&e.startsWith(t),eT=ZE("--"),JC=ZE("var(--"),Sp=t=>JC(t)?ZC.test(t.split("/*")[0].trim()):!1,ZC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,On=(t,e,n)=>n>e?e:n<t?t:n,ps={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uo={...ps,transform:t=>On(0,1,t)},rl={...ps,default:1},sa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Gn=sa("deg"),pn=sa("%"),H=sa("px"),eR=sa("vh"),tR=sa("vw"),av={...pn,parse:t=>pn.parse(t)/100,transform:t=>pn.transform(t*100)},nR={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H},rR={rotate:Gn,rotateX:Gn,rotateY:Gn,rotateZ:Gn,scale:rl,scaleX:rl,scaleY:rl,scaleZ:rl,skew:Gn,skewX:Gn,skewY:Gn,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:Uo,originX:av,originY:av,originZ:H},lv={...ps,transform:Math.round},Ap={...nR,...rR,zIndex:lv,size:H,fillOpacity:Uo,strokeOpacity:Uo,numOctaves:lv},iR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sR=fs.length;function oR(t,e,n){let r="",i=!0;for(let s=0;s<sR;s++){const o=fs[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=tT(a,Ap[o]);if(!u){i=!1;const h=iR[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Ip(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const c=e[u];if(ui.has(u)){o=!0;continue}else if(eT(u)){i[u]=c;continue}else{const h=tT(c,Ap[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=oR(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${c} ${h}`}}const aR={offset:"stroke-dashoffset",array:"stroke-dasharray"},lR={offset:"strokeDashoffset",array:"strokeDasharray"};function uR(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?aR:lR;t[s.offset]=H.transform(-r);const o=H.transform(e),a=H.transform(n);t[s.array]=`${o} ${a}`}function uv(t,e,n){return typeof t=="string"?t:H.transform(e+n*t)}function cR(t,e,n){const r=uv(e,t.x,t.width),i=uv(n,t.y,t.height);return`${r} ${i}`}function Pp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,d){if(Ip(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:T}=t;p.transform&&(T&&(g.transform=p.transform),delete p.transform),T&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=cR(T,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&uR(p,o,a,u,!1)}const Cp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nT=()=>({...Cp(),attrs:{}}),Rp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rT(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const iT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sT(t,e,n,r){rT(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(iT.has(i)?i:wp(i),e.attrs[i])}const su={};function hR(t){Object.assign(su,t)}function oT(t,{layout:e,layoutId:n}){return ui.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!su[t]||t==="opacity")}function kp(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ft(i[o])||e.style&&ft(e.style[o])||oT(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function aT(t,e,n){const r=kp(t,e,n);for(const i in t)if(ft(t[i])||ft(e[i])){const s=fs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function dR(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const cv=["x","y","width","height","cx","cy","r"],fR={useVisualState:JE({scrapeMotionValuesFromProps:aT,createRenderState:nT,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ui.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<cv.length;a++){const u=cv[a];t[u]!==e[u]&&(o=!0)}o&&ge.read(()=>{dR(n,r),ge.render(()=>{Pp(r,i,Rp(n.tagName),t.transformTemplate),sT(n,r)})})}})},pR={useVisualState:JE({scrapeMotionValuesFromProps:kp,createRenderState:Cp})};function lT(t,e,n){for(const r in e)!ft(e[r])&&!oT(r,n)&&(t[r]=e[r])}function mR({transformTemplate:t},e){return V.useMemo(()=>{const n=Cp();return Ip(n,e,t),Object.assign({},n.vars,n.style)},[e])}function gR(t,e){const n=t.style||{},r={};return lT(r,n,t),Object.assign(r,mR(t,e)),r}function yR(t,e){const n={},r=gR(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function vR(t,e,n,r){const i=V.useMemo(()=>{const s=nT();return Pp(s,e,Rp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};lT(s,t.style,t),i.style={...s,...i.style}}return i}function _R(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(Tp(n)?vR:yR)(r,s,o,n),c=NC(r,typeof n=="string",t),h=n!==V.Fragment?{...c,...u,ref:i}:{},{children:d}=r,p=V.useMemo(()=>ft(d)?d.get():d,[d]);return V.createElement(n,{...h,children:p})}}function wR(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Tp(r)?fR:pR,preloadedFeatures:t,useRender:_R(i),createVisualElement:e,Component:r};return zC(o)}}function uT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Hu(t,e,n){const r=t.getProps();return xp(r,e,n!==void 0?n:r.custom,t)}const ER=yp(()=>window.ScrollTimeline!==void 0);class TR{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(ER()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class xR extends TR{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Vp(t,e){return t?t[e]||t.default||t:void 0}const Pd=2e4;function cT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Pd;)e+=n,r=t.next(e);return e>=Pd?1/0:e}function Dp(t){return typeof t=="function"}function hv(t,e){t.timeline=e,t.onfinish=null}const bp=t=>Array.isArray(t)&&typeof t[0]=="number",SR={linearEasing:void 0};function AR(t,e){const n=yp(t);return()=>{var r;return(r=SR[e])!==null&&r!==void 0?r:n()}}const ou=AR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hT=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Zi(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function dT(t){return!!(typeof t=="function"&&ou()||!t||typeof t=="string"&&(t in Cd||ou())||bp(t)||Array.isArray(t)&&t.every(dT))}const Qs=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Cd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qs([0,.65,.55,1]),circOut:Qs([.55,0,1,.45]),backIn:Qs([.31,.01,.66,-.59]),backOut:Qs([.33,1.53,.69,.99])};function fT(t,e){if(t)return typeof t=="function"&&ou()?hT(t,e):bp(t)?Qs(t):Array.isArray(t)?t.map(n=>fT(n,e)||Cd.easeOut):Cd[t]}const Jt={x:!1,y:!1};function pT(){return Jt.x||Jt.y}function IR(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function mT(t,e){const n=IR(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function dv(t){return e=>{e.pointerType==="touch"||pT()||t(e)}}function PR(t,e,n={}){const[r,i,s]=mT(t,n),o=dv(a=>{const{target:u}=a,c=e(a);if(typeof c!="function"||!u)return;const h=dv(d=>{c(d),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const gT=(t,e)=>e?t===e?!0:gT(t,e.parentElement):!1,Np=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,CR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RR(t){return CR.has(t.tagName)||t.tabIndex!==-1}const Ys=new WeakSet;function fv(t){return e=>{e.key==="Enter"&&t(e)}}function lh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kR=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=fv(()=>{if(Ys.has(n))return;lh(n,"down");const i=fv(()=>{lh(n,"up")}),s=()=>lh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pv(t){return Np(t)&&!pT()}function VR(t,e,n={}){const[r,i,s]=mT(t,n),o=a=>{const u=a.currentTarget;if(!pv(a)||Ys.has(u))return;Ys.add(u);const c=e(a),h=(g,T)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),!(!pv(g)||!Ys.has(u))&&(Ys.delete(u),typeof c=="function"&&c(g,{success:T}))},d=g=>{h(g,n.useGlobalTarget||gT(u,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!RR(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>kR(c,i),i)}),s}function DR(t){return t==="x"||t==="y"?Jt[t]?null:(Jt[t]=!0,()=>{Jt[t]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}const yT=new Set(["width","height","top","left","right","bottom",...fs]);let Sl;function bR(){Sl=void 0}const mn={now:()=>(Sl===void 0&&mn.set(Ge.isProcessing||CC.useManualTiming?Ge.timestamp:performance.now()),Sl),set:t=>{Sl=t,queueMicrotask(bR)}};function Mp(t,e){t.indexOf(e)===-1&&t.push(e)}function Lp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Op{constructor(){this.subscriptions=[]}add(e){return Mp(this.subscriptions,e),()=>Lp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function vT(t,e){return e?t*(1e3/e):0}const mv=30,NR=t=>!isNaN(parseFloat(t));class MR{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=mn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Op);const r=this.events[e].add(n);return e==="change"?()=>{r(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mv);return vT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bo(t,e){return new MR(t,e)}function LR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bo(n))}function OR(t,e){const n=Hu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=QC(s[o]);LR(t,o,a)}}function FR(t){return!!(ft(t)&&t.add)}function Rd(t,e){const n=t.getValue("willChange");if(FR(n))return n.add(e)}function _T(t){return t.props[QE]}const wT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,jR=1e-7,UR=12;function BR(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=wT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>jR&&++a<UR);return o}function oa(t,e,n,r){if(t===e&&n===r)return bt;const i=s=>BR(s,0,1,t,n);return s=>s===0||s===1?s:wT(i(s),e,r)}const ET=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,TT=t=>e=>1-t(1-e),xT=oa(.33,1.53,.69,.99),Fp=TT(xT),ST=ET(Fp),AT=t=>(t*=2)<1?.5*Fp(t):.5*(2-Math.pow(2,-10*(t-1))),jp=t=>1-Math.sin(Math.acos(t)),IT=TT(jp),PT=ET(jp),CT=t=>/^0[^.\s]+$/u.test(t);function $R(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||CT(t):!0}const co=t=>Math.round(t*1e5)/1e5,Up=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zR(t){return t==null}const WR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Bp=(t,e)=>n=>!!(typeof n=="string"&&WR.test(n)&&n.startsWith(t)||e&&!zR(n)&&Object.prototype.hasOwnProperty.call(n,e)),RT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Up);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},KR=t=>On(0,255,t),uh={...ps,transform:t=>Math.round(KR(t))},Kr={test:Bp("rgb","red"),parse:RT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+uh.transform(t)+", "+uh.transform(e)+", "+uh.transform(n)+", "+co(Uo.transform(r))+")"};function qR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kd={test:Bp("#"),parse:qR,transform:Kr.transform},bi={test:Bp("hsl","hue"),parse:RT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+pn.transform(co(e))+", "+pn.transform(co(n))+", "+co(Uo.transform(r))+")"},ut={test:t=>Kr.test(t)||kd.test(t)||bi.test(t),parse:t=>Kr.test(t)?Kr.parse(t):bi.test(t)?bi.parse(t):kd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Kr.transform(t):bi.transform(t)},HR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GR(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Up))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(HR))===null||n===void 0?void 0:n.length)||0)>0}const kT="number",VT="color",QR="var",YR="var(",gv="${}",XR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $o(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(XR,u=>(ut.test(u)?(r.color.push(s),i.push(VT),n.push(ut.parse(u))):u.startsWith(YR)?(r.var.push(s),i.push(QR),n.push(u)):(r.number.push(s),i.push(kT),n.push(parseFloat(u))),++s,gv)).split(gv);return{values:n,split:a,indexes:r,types:i}}function DT(t){return $o(t).values}function bT(t){const{split:e,types:n}=$o(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===kT?s+=co(i[o]):a===VT?s+=ut.transform(i[o]):s+=i[o]}return s}}const JR=t=>typeof t=="number"?0:t;function ZR(t){const e=DT(t);return bT(t)(e.map(JR))}const _r={test:GR,parse:DT,createTransformer:bT,getAnimatableNone:ZR},ek=new Set(["brightness","contrast","saturate","opacity"]);function tk(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Up)||[];if(!r)return t;const i=n.replace(r,"");let s=ek.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const nk=/\b([a-z-]*)\(.*?\)/gu,Vd={..._r,getAnimatableNone:t=>{const e=t.match(nk);return e?e.map(tk).join(" "):t}},rk={...Ap,color:ut,backgroundColor:ut,outlineColor:ut,fill:ut,stroke:ut,borderColor:ut,borderTopColor:ut,borderRightColor:ut,borderBottomColor:ut,borderLeftColor:ut,filter:Vd,WebkitFilter:Vd},$p=t=>rk[t];function NT(t,e){let n=$p(t);return n!==Vd&&(n=_r),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ik=new Set(["auto","none","0"]);function sk(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!ik.has(s)&&$o(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=NT(n,i)}const yv=t=>t===ps||t===H,vv=(t,e)=>parseFloat(t.split(", ")[e]),_v=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return vv(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?vv(s[1],t):0}},ok=new Set(["x","y","z"]),ak=fs.filter(t=>!ok.has(t));function lk(t){const e=[];return ak.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ts={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_v(4,13),y:_v(5,14)};ts.translateX=ts.x;ts.translateY=ts.y;const Qr=new Set;let Dd=!1,bd=!1;function MT(){if(bd){const t=Array.from(Qr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=lk(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bd=!1,Dd=!1,Qr.forEach(t=>t.complete()),Qr.clear()}function LT(){Qr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bd=!0)})}function uk(){LT(),MT()}class zp{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Qr.add(this),Dd||(Dd=!0,ge.read(LT),ge.resolveKeyframes(MT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Qr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Qr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const OT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ck=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hk(t){const e=ck.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function FT(t,e,n=1){const[r,i]=hk(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return OT(o)?parseFloat(o):o}return Sp(i)?FT(i,e,n+1):i}const jT=t=>e=>e.test(t),dk={test:t=>t==="auto",parse:t=>t},UT=[ps,H,pn,Gn,tR,eR,dk],wv=t=>UT.find(jT(t));class BT extends zp{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),Sp(c))){const h=FT(c,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yT.has(r)||e.length!==2)return;const[i,s]=e,o=wv(i),a=wv(s);if(o!==a)if(yv(o)&&yv(a))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)$R(e[i])&&r.push(i);r.length&&sk(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ts[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=ts[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const Ev=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_r.test(t)||t==="0")&&!t.startsWith("url("));function fk(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pk(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Ev(i,e),a=Ev(s,e);return!o||!a?!1:fk(t)||(n==="spring"||Dp(n))&&r}const mk=t=>t!==null;function Gu(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(mk),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const gk=40;class $T{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=mn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>gk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&uk(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=mn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!pk(e,r,i,s))if(o)this.options.duration=0;else{u&&u(Gu(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const we=(t,e,n)=>t+(e-t)*n;function ch(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yk({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=ch(u,a,t+1/3),s=ch(u,a,t),o=ch(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function au(t,e){return n=>n>0?e:t}const hh=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},vk=[kd,Kr,bi],_k=t=>vk.find(e=>e.test(t));function Tv(t){const e=_k(t);if(!e)return!1;let n=e.parse(t);return e===bi&&(n=yk(n)),n}const xv=(t,e)=>{const n=Tv(t),r=Tv(e);if(!n||!r)return au(t,e);const i={...n};return s=>(i.red=hh(n.red,r.red,s),i.green=hh(n.green,r.green,s),i.blue=hh(n.blue,r.blue,s),i.alpha=we(n.alpha,r.alpha,s),Kr.transform(i))},wk=(t,e)=>n=>e(t(n)),aa=(...t)=>t.reduce(wk),Nd=new Set(["none","hidden"]);function Ek(t,e){return Nd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Tk(t,e){return n=>we(t,e,n)}function Wp(t){return typeof t=="number"?Tk:typeof t=="string"?Sp(t)?au:ut.test(t)?xv:Ak:Array.isArray(t)?zT:typeof t=="object"?ut.test(t)?xv:xk:au}function zT(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Wp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function xk(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Wp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Sk(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const Ak=(t,e)=>{const n=_r.createTransformer(e),r=$o(t),i=$o(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Nd.has(t)&&!i.values.length||Nd.has(e)&&!r.values.length?Ek(t,e):aa(zT(Sk(r,i),i.values),n):au(t,e)};function WT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?we(t,e,n):Wp(t)(t,e)}const Ik=5;function KT(t,e,n){const r=Math.max(e-Ik,0);return vT(n-t(r),e-r)}const Ae={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dh=.001;function Pk({duration:t=Ae.duration,bounce:e=Ae.bounce,velocity:n=Ae.velocity,mass:r=Ae.mass}){let i,s,o=1-e;o=On(Ae.minDamping,Ae.maxDamping,o),t=On(Ae.minDuration,Ae.maxDuration,Vn(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=Md(c,o),T=Math.exp(-d);return dh-p/g*T},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,T=Math.exp(-d),I=Md(Math.pow(c,2),o);return(-i(c)+dh>0?-1:1)*((p-g)*T)/I}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-dh+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,u=Rk(i,s,a);if(t=kn(t),isNaN(u))return{stiffness:Ae.stiffness,damping:Ae.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Ck=12;function Rk(t,e,n){let r=n;for(let i=1;i<Ck;i++)r=r-t(r)/e(r);return r}function Md(t,e){return t*Math.sqrt(1-e*e)}const kk=["duration","bounce"],Vk=["stiffness","damping","mass"];function Sv(t,e){return e.some(n=>t[n]!==void 0)}function Dk(t){let e={velocity:Ae.velocity,stiffness:Ae.stiffness,damping:Ae.damping,mass:Ae.mass,isResolvedFromDuration:!1,...t};if(!Sv(t,Vk)&&Sv(t,kk))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*On(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ae.mass,stiffness:i,damping:s}}else{const n=Pk(t);e={...e,...n,mass:Ae.mass},e.isResolvedFromDuration=!0}return e}function qT(t=Ae.visualDuration,e=Ae.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:u,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=Dk({...n,velocity:-Vn(n.velocity||0)}),T=p||0,I=c/(2*Math.sqrt(u*h)),P=o-s,w=Vn(Math.sqrt(u/h)),v=Math.abs(P)<5;r||(r=v?Ae.restSpeed.granular:Ae.restSpeed.default),i||(i=v?Ae.restDelta.granular:Ae.restDelta.default);let x;if(I<1){const M=Md(w,I);x=O=>{const A=Math.exp(-I*w*O);return o-A*((T+I*w*P)/M*Math.sin(M*O)+P*Math.cos(M*O))}}else if(I===1)x=M=>o-Math.exp(-w*M)*(P+(T+w*P)*M);else{const M=w*Math.sqrt(I*I-1);x=O=>{const A=Math.exp(-I*w*O),y=Math.min(M*O,300);return o-A*((T+I*w*P)*Math.sinh(y)+M*P*Math.cosh(y))/M}}const b={calculatedDuration:g&&d||null,next:M=>{const O=x(M);if(g)a.done=M>=d;else{let A=0;I<1&&(A=M===0?kn(T):KT(x,M,O));const y=Math.abs(A)<=r,E=Math.abs(o-O)<=i;a.done=y&&E}return a.value=a.done?o:O,a},toString:()=>{const M=Math.min(cT(b),Pd),O=hT(A=>b.next(M*A).value,M,30);return M+"ms "+O}};return b}function Av({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=y=>a!==void 0&&y<a||u!==void 0&&y>u,T=y=>a===void 0?u:u===void 0||Math.abs(a-y)<Math.abs(u-y)?a:u;let I=n*e;const P=d+I,w=o===void 0?P:o(P);w!==P&&(I=w-d);const v=y=>-I*Math.exp(-y/r),x=y=>w+v(y),b=y=>{const E=v(y),S=x(y);p.done=Math.abs(E)<=c,p.value=p.done?w:S};let M,O;const A=y=>{g(p.value)&&(M=y,O=qT({keyframes:[p.value,T(p.value)],velocity:KT(x,y,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:y=>{let E=!1;return!O&&M===void 0&&(E=!0,b(y),A(y)),M!==void 0&&y>=M?O.next(y-M):(!E&&b(y),p)}}}const bk=oa(.42,0,1,1),Nk=oa(0,0,.58,1),HT=oa(.42,0,.58,1),Mk=t=>Array.isArray(t)&&typeof t[0]!="number",Lk={linear:bt,easeIn:bk,easeInOut:HT,easeOut:Nk,circIn:jp,circInOut:PT,circOut:IT,backIn:Fp,backInOut:ST,backOut:xT,anticipate:AT},Iv=t=>{if(bp(t)){WE(t.length===4);const[e,n,r,i]=t;return oa(e,n,r,i)}else if(typeof t=="string")return Lk[t];return t};function Ok(t,e,n){const r=[],i=n||WT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||bt:e;a=aa(u,a)}r.push(a)}return r}function Fk(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(WE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Ok(e,r,i),u=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(u>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=Zi(t[d],t[d+1],h);return a[d](p)};return n?h=>c(On(t[0],t[s-1],h)):c}function jk(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Zi(0,e,r);t.push(we(n,1,i))}}function Uk(t){const e=[0];return jk(e,t.length-1),e}function Bk(t,e){return t.map(n=>n*e)}function $k(t,e){return t.map(()=>e||HT).splice(0,t.length-1)}function lu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Mk(r)?r.map(Iv):Iv(r),s={done:!1,value:e[0]},o=Bk(n&&n.length===e.length?n:Uk(e),t),a=Fk(o,e,{ease:Array.isArray(i)?i:$k(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const zk=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ge.update(e,!0),stop:()=>vr(e),now:()=>Ge.isProcessing?Ge.timestamp:mn.now()}},Wk={decay:Av,inertia:Av,tween:lu,keyframes:lu,spring:qT},Kk=t=>t/100;class Kp extends $T{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||zp,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Dp(n)?n:Wk[n]||lu;let u,c;a!==lu&&typeof e[0]!="number"&&(u=aa(Kk,WT(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=cT(h));const{calculatedDuration:d}=h,p=d+i,g=p*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:d,resolvedDuration:p,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:g,repeatType:T,repeatDelay:I,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let x=this.currentTime,b=s;if(g){const y=Math.min(this.currentTime,h)/d;let E=Math.floor(y),S=y%1;!S&&y>=1&&(S=1),S===1&&E--,E=Math.min(E,g+1),!!(E%2)&&(T==="reverse"?(S=1-S,I&&(S-=I/d)):T==="mirror"&&(b=o)),x=On(0,1,S)*d}const M=v?{done:!1,value:u[0]}:b.next(x);a&&(M.value=a(M.value));let{done:O}=M;!v&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return A&&i!==void 0&&(M.value=Gu(u,this.options,i)),P&&P(M.value),A&&this.finish(),M}get duration(){const{resolved:e}=this;return e?Vn(e.calculatedDuration):0}get time(){return Vn(this.currentTime)}set time(e){e=kn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=zk,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qk=new Set(["opacity","clipPath","filter","transform"]);function Hk(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=fT(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Gk=yp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),uu=10,Qk=2e4;function Yk(t){return Dp(t.type)||t.type==="spring"||!dT(t.ease)}function Xk(t,e){const n=new Kp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Qk;)r=n.sample(s),i.push(r.value),s+=uu;return{times:void 0,keyframes:i,duration:s-uu,ease:"linear"}}const GT={anticipate:AT,backInOut:ST,circInOut:PT};function Jk(t){return t in GT}class Pv extends $T{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new BT(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:u,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&ou()&&Jk(s)&&(s=GT[s]),Yk(this.options)){const{onComplete:d,onUpdate:p,motionValue:g,element:T,...I}=this.options,P=Xk(e,I);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,i=P.times,s=P.ease,o="keyframes"}const h=Hk(a.owner.current,u,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(hv(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;a.set(Gu(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Vn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Vn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=kn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return bt;const{animation:r}=n;hv(r,e)}return bt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:p,...g}=this.options,T=new Kp({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),I=kn(this.time);c.setWithVelocity(T.sample(I-uu).value,T.sample(I).value,uu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=n.owner.getProps();return Gk()&&r&&qk.has(r)&&!u&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Zk={type:"spring",stiffness:500,damping:25,restSpeed:10},eV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tV={type:"keyframes",duration:.8},nV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rV=(t,{keyframes:e})=>e.length>2?tV:ui.has(t)?t.startsWith("scale")?eV(e[1]):Zk:nV;function iV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const qp=(t,e,n,r={},i,s)=>o=>{const a=Vp(r,t)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-kn(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};iV(a)||(h={...h,...rV(t,h)}),h.duration&&(h.duration=kn(h.duration)),h.repeatDelay&&(h.repeatDelay=kn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const p=Gu(h.keyframes,a);if(p!==void 0)return ge.update(()=>{h.onUpdate(p),h.onComplete()}),new xR([])}return!s&&Pv.supports(h)?new Pv(h):new Kp(h)};function sV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function QT(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in u){const p=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),g=u[d];if(g===void 0||h&&sV(h,d))continue;const T={delay:n,...Vp(o||{},d)};let I=!1;if(window.MotionHandoffAnimation){const w=_T(t);if(w){const v=window.MotionHandoffAnimation(w,d,ge);v!==null&&(T.startTime=v,I=!0)}}Rd(t,d),p.start(qp(d,p,g,t.shouldReduceMotion&&yT.has(d)?{type:!1}:T,t,I));const P=p.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{ge.update(()=>{a&&OR(t,a)})}),c}function Ld(t,e,n={}){var r;const i=Hu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(QT(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=s;return oV(t,e,h+c,d,p,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,h]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function oV(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(aV).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Ld(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function aV(t,e){return t.sortNodePosition(e)}function lV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Ld(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Ld(t,e,n);else{const i=typeof e=="function"?Hu(t,e,n.custom):e;r=Promise.all(QT(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const uV=_p.length;function YT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?YT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uV;n++){const r=_p[n],i=t.props[r];(jo(i)||i===!1)&&(e[r]=i)}return e}const cV=[...vp].reverse(),hV=vp.length;function dV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>lV(t,n,r)))}function fV(t){let e=dV(t),n=Cv(),r=!0;const i=u=>(c,h)=>{var d;const p=Hu(t,h,u==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:g,transitionEnd:T,...I}=p;c={...c,...I,...T}}return c};function s(u){e=u(t)}function o(u){const{props:c}=t,h=YT(t.parent)||{},d=[],p=new Set;let g={},T=1/0;for(let P=0;P<hV;P++){const w=cV[P],v=n[w],x=c[w]!==void 0?c[w]:h[w],b=jo(x),M=w===u?v.isActive:null;M===!1&&(T=P);let O=x===h[w]&&x!==c[w]&&b;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...g},!v.isActive&&M===null||!x&&!v.prevProp||Ku(x)||typeof x=="boolean")continue;const A=pV(v.prevProp,x);let y=A||w===u&&v.isActive&&!O&&b||P>T&&b,E=!1;const S=Array.isArray(x)?x:[x];let k=S.reduce(i(w),{});M===!1&&(k={});const{prevResolvedValues:D={}}=v,C={...D,...k},We=de=>{y=!0,p.has(de)&&(E=!0,p.delete(de)),v.needsAnimating[de]=!0;const $=t.getValue(de);$&&($.liveStyle=!1)};for(const de in C){const $=k[de],Q=D[de];if(g.hasOwnProperty(de))continue;let J=!1;Id($)&&Id(Q)?J=!uT($,Q):J=$!==Q,J?$!=null?We(de):p.add(de):$!==void 0&&p.has(de)?We(de):v.protectedKeys[de]=!0}v.prevProp=x,v.prevResolvedValues=k,v.isActive&&(g={...g,...k}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&A)||E)&&d.push(...S.map(de=>({animation:de,options:{type:w}})))}if(p.size){const P={};p.forEach(w=>{const v=t.getBaseTarget(w),x=t.getValue(w);x&&(x.liveStyle=!0),P[w]=v??null}),d.push({animation:P})}let I=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(d):Promise.resolve()}function a(u,c){var h;if(n[u].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(u,c)}),n[u].isActive=c;const d=o(u);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Cv(),r=!0}}}function pV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uT(e,t):!1}function Lr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Cv(){return{animate:Lr(!0),whileInView:Lr(),whileHover:Lr(),whileTap:Lr(),whileDrag:Lr(),whileFocus:Lr(),exit:Lr()}}class Cr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mV extends Cr{constructor(e){super(e),e.animationState||(e.animationState=fV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ku(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let gV=0;class yV extends Cr{constructor(){super(...arguments),this.id=gV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const vV={animation:{Feature:mV},exit:{Feature:yV}};function zo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function la(t){return{point:{x:t.pageX,y:t.pageY}}}const _V=t=>e=>Np(e)&&t(e,la(e));function ho(t,e,n,r){return zo(t,e,_V(n),r)}const Rv=(t,e)=>Math.abs(t-e);function wV(t,e){const n=Rv(t.x,e.x),r=Rv(t.y,e.y);return Math.sqrt(n**2+r**2)}class XT{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ph(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=wV(d.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:T}=d,{timestamp:I}=Ge;this.history.push({...T,timestamp:I});const{onStart:P,onMove:w}=this.handlers;p||(P&&P(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=fh(p,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:g,onSessionEnd:T,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=ph(d.type==="pointercancel"?this.lastMoveEventInfo:fh(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,P),T&&T(d,P)},!Np(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=la(e),a=fh(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=Ge;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,ph(a,this.history)),this.removeListeners=aa(ho(this.contextWindow,"pointermove",this.handlePointerMove),ho(this.contextWindow,"pointerup",this.handlePointerUp),ho(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vr(this.updatePoint)}}function fh(t,e){return e?{point:e(t.point)}:t}function kv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ph({point:t},e){return{point:t,delta:kv(t,JT(e)),offset:kv(t,EV(e)),velocity:TV(e,.1)}}function EV(t){return t[0]}function JT(t){return t[t.length-1]}function TV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=JT(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>kn(e)));)n--;if(!r)return{x:0,y:0};const s=Vn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const ZT=1e-4,xV=1-ZT,SV=1+ZT,ex=.01,AV=0-ex,IV=0+ex;function Lt(t){return t.max-t.min}function PV(t,e,n){return Math.abs(t-e)<=n}function Vv(t,e,n,r=.5){t.origin=r,t.originPoint=we(e.min,e.max,t.origin),t.scale=Lt(n)/Lt(e),t.translate=we(n.min,n.max,t.origin)-t.originPoint,(t.scale>=xV&&t.scale<=SV||isNaN(t.scale))&&(t.scale=1),(t.translate>=AV&&t.translate<=IV||isNaN(t.translate))&&(t.translate=0)}function fo(t,e,n,r){Vv(t.x,e.x,n.x,r?r.originX:void 0),Vv(t.y,e.y,n.y,r?r.originY:void 0)}function Dv(t,e,n){t.min=n.min+e.min,t.max=t.min+Lt(e)}function CV(t,e,n){Dv(t.x,e.x,n.x),Dv(t.y,e.y,n.y)}function bv(t,e,n){t.min=e.min-n.min,t.max=t.min+Lt(e)}function po(t,e,n){bv(t.x,e.x,n.x),bv(t.y,e.y,n.y)}function RV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?we(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?we(n,t,r.max):Math.min(t,n)),t}function Nv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kV(t,{top:e,left:n,bottom:r,right:i}){return{x:Nv(t.x,n,i),y:Nv(t.y,e,r)}}function Mv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function VV(t,e){return{x:Mv(t.x,e.x),y:Mv(t.y,e.y)}}function DV(t,e){let n=.5;const r=Lt(t),i=Lt(e);return i>r?n=Zi(e.min,e.max-r,t.min):r>i&&(n=Zi(t.min,t.max-i,e.min)),On(0,1,n)}function bV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Od=.35;function NV(t=Od){return t===!1?t=0:t===!0&&(t=Od),{x:Lv(t,"left","right"),y:Lv(t,"top","bottom")}}function Lv(t,e,n){return{min:Ov(t,e),max:Ov(t,n)}}function Ov(t,e){return typeof t=="number"?t:t[e]||0}const Fv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ni=()=>({x:Fv(),y:Fv()}),jv=()=>({min:0,max:0}),Ce=()=>({x:jv(),y:jv()});function Bt(t){return[t("x"),t("y")]}function tx({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function MV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mh(t){return t===void 0||t===1}function Fd({scale:t,scaleX:e,scaleY:n}){return!mh(t)||!mh(e)||!mh(n)}function jr(t){return Fd(t)||nx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nx(t){return Uv(t.x)||Uv(t.y)}function Uv(t){return t&&t!=="0%"}function cu(t,e,n){const r=t-n,i=e*r;return n+i}function Bv(t,e,n,r,i){return i!==void 0&&(t=cu(t,i,r)),cu(t,n,r)+e}function jd(t,e=0,n=1,r,i){t.min=Bv(t.min,e,n,r,i),t.max=Bv(t.max,e,n,r,i)}function rx(t,{x:e,y:n}){jd(t.x,e.translate,e.scale,e.originPoint),jd(t.y,n.translate,n.scale,n.originPoint)}const $v=.999999999999,zv=1.0000000000001;function OV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Li(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,rx(t,o)),r&&jr(s.latestValues)&&Li(t,s.latestValues))}e.x<zv&&e.x>$v&&(e.x=1),e.y<zv&&e.y>$v&&(e.y=1)}function Mi(t,e){t.min=t.min+e,t.max=t.max+e}function Wv(t,e,n,r,i=.5){const s=we(t.min,t.max,i);jd(t,e,n,s,r)}function Li(t,e){Wv(t.x,e.x,e.scaleX,e.scale,e.originX),Wv(t.y,e.y,e.scaleY,e.scale,e.originY)}function ix(t,e){return tx(LV(t.getBoundingClientRect(),e))}function FV(t,e,n){const r=ix(t,n),{scroll:i}=e;return i&&(Mi(r.x,i.offset.x),Mi(r.y,i.offset.y)),r}const sx=({current:t})=>t?t.ownerDocument.defaultView:null,jV=new WeakMap;class UV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(la(h).point)},s=(h,d)=>{const{drag:p,dragPropagation:g,onDragStart:T}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DR(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bt(P=>{let w=this.getAxisMotionValue(P).get()||0;if(pn.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[P];x&&(w=Lt(x)*(parseFloat(w)/100))}}this.originPoint[P]=w}),T&&ge.postRender(()=>T(h,d)),Rd(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:T,onDrag:I}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:P}=d;if(g&&this.currentDirection===null){this.currentDirection=BV(P),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",d.point,P),this.updateAxis("y",d.point,P),this.visualElement.render(),I&&I(h,d)},a=(h,d)=>this.stop(h,d),u=()=>Bt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new XT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:sx(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ge.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!il(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=RV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Di(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=kV(i.layoutBox,n):this.constraints=!1,this.elastic=NV(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Bt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=bV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Di(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=FV(r,i.root,this.visualElement.getTransformPagePoint());let o=VV(i.layout.layoutBox,s);if(n){const a=n(MV(o));this.hasMutatedConstraints=!!a,a&&(o=tx(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Bt(h=>{if(!il(h,n,this.currentDirection))return;let d=u&&u[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,T)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Rd(this.visualElement,e),r.start(qp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Bt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bt(n=>{const{drag:r}=this.getProps();if(!il(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-we(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Di(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=DV({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bt(o=>{if(!il(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(we(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;jV.set(this.visualElement,this);const e=this.visualElement.current,n=ho(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Di(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ge.read(r);const o=zo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Bt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=u[h].translate,d.set(d.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Od,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function il(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function BV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $V extends Cr{constructor(e){super(e),this.removeGroupControls=bt,this.removeListeners=bt,this.controls=new UV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kv=t=>(e,n)=>{t&&ge.postRender(()=>t(e,n))};class zV extends Cr{constructor(){super(...arguments),this.removePointerDownListener=bt}onPointerDown(e){this.session=new XT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Kv(e),onStart:Kv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ge.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ho(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Al={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $s={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(H.test(t))t=parseFloat(t);else return t;const n=qv(t,e.target.x),r=qv(t,e.target.y);return`${n}% ${r}%`}},WV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=_r.parse(t);if(i.length>5)return r;const s=_r.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=we(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class KV extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hR(qV),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Al.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ge.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ep.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ox(t){const[e,n]=$E(),r=V.useContext(dp);return R.jsx(KV,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(YE),isPresent:e,safeToRemove:n})}const qV={borderRadius:{...$s,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$s,borderTopRightRadius:$s,borderBottomLeftRadius:$s,borderBottomRightRadius:$s,boxShadow:WV};function HV(t,e,n){const r=ft(t)?t:Bo(t);return r.start(qp("",r,e,n)),r.animation}function GV(t){return t instanceof SVGElement&&t.tagName!=="svg"}const QV=(t,e)=>t.depth-e.depth;class YV{constructor(){this.children=[],this.isDirty=!1}add(e){Mp(this.children,e),this.isDirty=!0}remove(e){Lp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QV),this.isDirty=!1,this.children.forEach(e)}}function XV(t,e){const n=mn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vr(r),t(s-e))};return ge.read(r,!0),()=>vr(r)}const ax=["TopLeft","TopRight","BottomLeft","BottomRight"],JV=ax.length,Hv=t=>typeof t=="string"?parseFloat(t):t,Gv=t=>typeof t=="number"||H.test(t);function ZV(t,e,n,r,i,s){i?(t.opacity=we(0,n.opacity!==void 0?n.opacity:1,e2(r)),t.opacityExit=we(e.opacity!==void 0?e.opacity:1,0,t2(r))):s&&(t.opacity=we(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<JV;o++){const a=`border${ax[o]}Radius`;let u=Qv(e,a),c=Qv(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Gv(u)===Gv(c)?(t[a]=Math.max(we(Hv(u),Hv(c),r),0),(pn.test(c)||pn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=we(e.rotate||0,n.rotate||0,r))}function Qv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const e2=lx(0,.5,IT),t2=lx(.5,.95,bt);function lx(t,e,n){return r=>r<t?0:r>e?1:n(Zi(t,e,r))}function Yv(t,e){t.min=e.min,t.max=e.max}function Ut(t,e){Yv(t.x,e.x),Yv(t.y,e.y)}function Xv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Jv(t,e,n,r,i){return t-=e,t=cu(t,1/n,r),i!==void 0&&(t=cu(t,1/i,r)),t}function n2(t,e=0,n=1,r=.5,i,s=t,o=t){if(pn.test(e)&&(e=parseFloat(e),e=we(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=we(s.min,s.max,r);t===s&&(a-=e),t.min=Jv(t.min,e,n,a,i),t.max=Jv(t.max,e,n,a,i)}function Zv(t,e,[n,r,i],s,o){n2(t,e[n],e[r],e[i],e.scale,s,o)}const r2=["x","scaleX","originX"],i2=["y","scaleY","originY"];function e0(t,e,n,r){Zv(t.x,e,r2,n?n.x:void 0,r?r.x:void 0),Zv(t.y,e,i2,n?n.y:void 0,r?r.y:void 0)}function t0(t){return t.translate===0&&t.scale===1}function ux(t){return t0(t.x)&&t0(t.y)}function n0(t,e){return t.min===e.min&&t.max===e.max}function s2(t,e){return n0(t.x,e.x)&&n0(t.y,e.y)}function r0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cx(t,e){return r0(t.x,e.x)&&r0(t.y,e.y)}function i0(t){return Lt(t.x)/Lt(t.y)}function s0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class o2{constructor(){this.members=[]}add(e){Mp(this.members,e),e.scheduleRender()}remove(e){if(Lp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function a2(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:T}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),T&&(r+=`skewY(${T}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const Ur={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Xs=typeof window<"u"&&window.MotionDebug!==void 0,gh=["","X","Y","Z"],l2={visibility:"hidden"},o0=1e3;let u2=0;function yh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function hx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_T(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ge,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&hx(r)}function dx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=u2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xs&&(Ur.totalNodes=Ur.resolvedTargetDeltas=Ur.recalculatedProjection=0),this.nodes.forEach(d2),this.nodes.forEach(y2),this.nodes.forEach(v2),this.nodes.forEach(f2),Xs&&window.MotionDebug.record(Ur)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new YV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Op),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GV(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=XV(p,250),Al.hasAnimatedSinceResize&&(Al.hasAnimatedSinceResize=!1,this.nodes.forEach(l0))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||h.getDefaultTransition()||x2,{onLayoutAnimationStart:P,onLayoutAnimationComplete:w}=h.getProps(),v=!this.targetLayout||!cx(this.targetLayout,T)||g,x=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const b={...Vp(I,"layout"),onPlay:P,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else p||l0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a0);return}this.isUpdating||this.nodes.forEach(m2),this.isUpdating=!1,this.nodes.forEach(g2),this.nodes.forEach(c2),this.nodes.forEach(h2),this.clearAllSnapshots();const a=mn.now();Ge.delta=On(0,1e3/60,a-Ge.timestamp),Ge.timestamp=a,Ge.isProcessing=!0,ah.update.process(Ge),ah.preRender.process(Ge),ah.render.process(Ge),Ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ep.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(p2),this.sharedNodes.forEach(w2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ux(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||jr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),S2(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ce();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(A2))){const{scroll:h}=this.root;h&&(Mi(u.x,h.offset.x),Mi(u.y,h.offset.y))}return u}removeElementScroll(o){var a;const u=Ce();if(Ut(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Ut(u,o),Mi(u.x,d.offset.x),Mi(u.y,d.offset.y))}return u}applyTransform(o,a=!1){const u=Ce();Ut(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Li(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),jr(h.latestValues)&&Li(u,h.latestValues)}return jr(this.latestValues)&&Li(u,this.latestValues),u}removeTransform(o){const a=Ce();Ut(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!jr(c.latestValues))continue;Fd(c.latestValues)&&c.updateSnapshot();const h=Ce(),d=c.measurePageBox();Ut(h,d),e0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return jr(this.latestValues)&&e0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Ge.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),po(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ut(this.target,this.layout.layoutBox),rx(this.target,this.targetDelta)):Ut(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),po(this.relativeTargetOrigin,this.target,g.target),Ut(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xs&&Ur.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Fd(this.parent.latestValues)||nx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ge.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Ut(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;OV(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ce());const{target:T}=a;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xv(this.prevProjectionDelta.x,this.projectionDelta.x),Xv(this.prevProjectionDelta.y,this.projectionDelta.y)),fo(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!s0(this.projectionDelta.x,this.prevProjectionDelta.x)||!s0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Xs&&Ur.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ni(),this.projectionDelta=Ni(),this.projectionDeltaWithTransform=Ni()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},d=Ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ce(),g=u?u.source:void 0,T=this.layout?this.layout.source:void 0,I=g!==T,P=this.getStack(),w=!P||P.members.length<=1,v=!!(I&&!w&&this.options.crossfade===!0&&!this.path.some(T2));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const M=b/1e3;u0(d.x,o.x,M),u0(d.y,o.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(po(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E2(this.relativeTarget,this.relativeTargetOrigin,p,M),x&&s2(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ce()),Ut(x,this.relativeTarget)),I&&(this.animationValues=h,ZV(h,c,this.latestValues,M,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{Al.hasAnimatedSinceResize=!0,this.currentAnimation=HV(0,o0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(o0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&fx(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Ce();const d=Lt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+d;const p=Lt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}Ut(a,u),Li(a,h),fo(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new o2),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&yh("z",o,c,this.animationValues);for(let h=0;h<gh.length;h++)yh(`rotate${gh[h]}`,o,c,this.animationValues),yh(`skew${gh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return l2;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=xl(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=xl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!jr(this.latestValues)&&(I.transform=h?h({},""):"none",this.hasProjected=!1),I}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=a2(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:g,y:T}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${T.origin*100}% 0`,d.animationValues?c.opacity=d===this?(u=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const I in su){if(p[I]===void 0)continue;const{correct:P,applyTo:w}=su[I],v=c.transform==="none"?p[I]:P(p[I],d);if(w){const x=w.length;for(let b=0;b<x;b++)c[w[b]]=v}else c[I]=v}return this.options.layoutId&&(c.pointerEvents=d===this?xl(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(a0),this.root.sharedNodes.clear()}}}function c2(t){t.updateLayout()}function h2(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Bt(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],g=Lt(p);p.min=r[d].min,p.max=p.min+g}):fx(s,n.layoutBox,r)&&Bt(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],g=Lt(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Ni();fo(a,r,n.layoutBox);const u=Ni();o?fo(u,t.applyTransform(i,!0),n.measuredBox):fo(u,r,n.layoutBox);const c=!ux(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const T=Ce();po(T,n.layoutBox,p.layoutBox);const I=Ce();po(I,r,g.layoutBox),cx(T,I)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=T,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function d2(t){Xs&&Ur.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function f2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function p2(t){t.clearSnapshot()}function a0(t){t.clearMeasurements()}function m2(t){t.isLayoutDirty=!1}function g2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function l0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function y2(t){t.resolveTargetDelta()}function v2(t){t.calcProjection()}function _2(t){t.resetSkewAndRotation()}function w2(t){t.removeLeadSnapshot()}function u0(t,e,n){t.translate=we(e.translate,0,n),t.scale=we(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function c0(t,e,n,r){t.min=we(e.min,n.min,r),t.max=we(e.max,n.max,r)}function E2(t,e,n,r){c0(t.x,e.x,n.x,r),c0(t.y,e.y,n.y,r)}function T2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const x2={duration:.45,ease:[.4,0,.1,1]},h0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),d0=h0("applewebkit/")&&!h0("chrome/")?Math.round:bt;function f0(t){t.min=d0(t.min),t.max=d0(t.max)}function S2(t){f0(t.x),f0(t.y)}function fx(t,e,n){return t==="position"||t==="preserve-aspect"&&!PV(i0(e),i0(n),.2)}function A2(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const I2=dx({attachResizeListener:(t,e)=>zo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vh={current:void 0},px=dx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vh.current){const t=new I2({});t.mount(window),t.setOptions({layoutScroll:!0}),vh.current=t}return vh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),P2={pan:{Feature:zV},drag:{Feature:$V,ProjectionNode:px,MeasureLayout:ox}};function p0(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ge.postRender(()=>s(e,la(e)))}class C2 extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=PR(e,n=>(p0(this.node,n,"Start"),r=>p0(this.node,r,"End"))))}unmount(){}}class R2 extends Cr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=aa(zo(this.node.current,"focus",()=>this.onFocus()),zo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function m0(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ge.postRender(()=>s(e,la(e)))}class k2 extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=VR(e,n=>(m0(this.node,n,"Start"),(r,{success:i})=>m0(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ud=new WeakMap,_h=new WeakMap,V2=t=>{const e=Ud.get(t.target);e&&e(t)},D2=t=>{t.forEach(V2)};function b2({root:t,...e}){const n=t||document;_h.has(n)||_h.set(n,{});const r=_h.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(D2,{root:t,...e})),r[i]}function N2(t,e,n){const r=b2(e);return Ud.set(t,n),r.observe(t),()=>{Ud.delete(t),r.unobserve(t)}}const M2={some:0,all:1};class L2 extends Cr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:M2[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(u)};return N2(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(O2(e,n))&&this.startObserver()}unmount(){}}function O2({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const F2={inView:{Feature:L2},tap:{Feature:k2},focus:{Feature:R2},hover:{Feature:C2}},j2={layout:{ProjectionNode:px,MeasureLayout:ox}},Bd={current:null},mx={current:!1};function U2(){if(mx.current=!0,!!mp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bd.current=t.matches;t.addListener(e),e()}else Bd.current=!1}const B2=[...UT,ut,_r],$2=t=>B2.find(jT(t)),g0=new WeakMap;function z2(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ft(i))t.addValue(r,i);else if(ft(s))t.addValue(r,Bo(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Bo(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const y0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class W2{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=mn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ge.render(this.render,!1,!0))};const{latestValues:u,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=qu(n),this.isVariantNode=GE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const T=p[g];u[g]!==void 0&&ft(T)&&T.set(u[g],!1)}}mount(e){this.current=e,g0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),mx.current||U2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){g0.delete(this.current),this.projection&&this.projection.unmount(),vr(this.notifyUpdate),vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ui.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ge.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in es){const n=es[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<y0.length;r++){const i=y0[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=z2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bo(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(OT(i)||CT(i))?i=parseFloat(i):!$2(i)&&_r.test(n)&&(i=NT(e,n)),this.setBaseTarget(e,ft(i)?i.get():i)),ft(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=xp(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ft(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Op),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class gx extends W2{constructor(){super(...arguments),this.KeyframeResolver=BT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ft(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function K2(t){return window.getComputedStyle(t)}class q2 extends gx{constructor(){super(...arguments),this.type="html",this.renderInstance=rT}readValueFromInstance(e,n){if(ui.has(n)){const r=$p(n);return r&&r.default||0}else{const r=K2(e),i=(eT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ix(e,n)}build(e,n,r){Ip(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return kp(e,n,r)}}class H2 extends gx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ce}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ui.has(n)){const r=$p(n);return r&&r.default||0}return n=iT.has(n)?n:wp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return aT(e,n,r)}build(e,n,r){Pp(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){sT(e,n,r,i)}mount(e){this.isSVGTag=Rp(e.tagName),super.mount(e)}}const G2=(t,e)=>Tp(t)?new H2(e):new q2(e,{allowProjection:t!==V.Fragment}),Q2=wR({...vV,...F2,...P2,...j2},G2),Ye=MC(Q2),yx=()=>{const t=V.useMemo(()=>[...Array(6)].map((n,r)=>({id:r,width:Math.random()*300+50,height:Math.random()*300+50,left:Math.random()*100,top:Math.random()*100,duration:15+Math.random()*10,delay:Math.random()*5,isCircle:r%2!==0})),[]),e=V.useMemo(()=>[...Array(5)].map((n,r)=>({id:r,top:Math.random()*100,duration:3+Math.random()*5,delay:Math.random()*5,repeatDelay:Math.random()*8})),[]);return R.jsxs("div",{className:"fixed inset-0 bg-slate-950 -z-50 overflow-hidden pointer-events-none perspective-[1000px]",children:[R.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f1a_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f1a_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),t.map(n=>R.jsx(Ye.div,{className:`absolute border border-white/10 bg-gradient-to-br from-white/5 to-transparent backdrop-blur-[1px] ${n.isCircle?"rounded-full":"rounded-xl"}`,style:{width:n.width,height:n.height,left:`${n.left}%`,top:`${n.top}%`},animate:{y:[0,-40,0],rotate:[0,360],scale:[1,1.1,1],opacity:[.1,.4,.1]},transition:{duration:n.duration,repeat:1/0,ease:"easeInOut"}},`shape-${n.id}`)),e.map(n=>R.jsx(Ye.div,{className:"absolute h-[1px] w-[200px] bg-gradient-to-r from-transparent via-indigo-400 to-transparent opacity-50",style:{top:`${n.top}%`,left:-200},animate:{x:["-20vw","120vw"]},transition:{duration:n.duration,repeat:1/0,ease:"linear",delay:n.delay,repeatDelay:n.repeatDelay}},`beam-${n.id}`))]})},Y2=()=>{const[t,e]=V.useState(()=>{const g=localStorage.getItem("neun_player");if(g)try{return JSON.parse(g).name||""}catch{return""}return""}),[n,r]=V.useState(""),i=hp(),[s,o]=V.useState(!1),[a,u]=V.useState(""),[c,h]=V.useState(!1),d=async()=>{if(t){o(!0),u("");try{const{createRoom:g}=await nv(async()=>{const{createRoom:P}=await Promise.resolve().then(()=>m_);return{createRoom:P}},void 0),{roomId:T,player:I}=await g(t);localStorage.setItem("neun_player",JSON.stringify(I)),localStorage.setItem("neun_roomId",T),i(`/room/${T}`)}catch(g){console.error(g),u("Failed to create room. check console.")}finally{o(!1)}}},p=async()=>{if(!(!t||!n)){o(!0),u("");try{const{joinRoom:g}=await nv(async()=>{const{joinRoom:I}=await Promise.resolve().then(()=>m_);return{joinRoom:I}},void 0),{player:T}=await g(n.toUpperCase(),t);localStorage.setItem("neun_player",JSON.stringify(T)),localStorage.setItem("neun_roomId",n.toUpperCase()),i(`/room/${n.toUpperCase()}`)}catch(g){console.error(g),u(g.message||"Failed to join room")}finally{o(!1)}}};return R.jsxs("div",{className:"relative min-h-screen flex flex-col items-center justify-center p-4 overflow-hidden text-white",children:[R.jsx(yx,{}),R.jsxs(Ye.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"glass-panel w-full max-w-md p-8 md:p-10 rounded-3xl relative z-10 border border-white/10 shadow-2xl backdrop-blur-xl",children:[R.jsx("div",{className:"text-center mb-10 relative",children:R.jsxs(Ye.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:[R.jsxs("h1",{className:"text-5xl md:text-6xl font-black tracking-tighter mb-2 relative inline-block",children:[R.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 animate-gradient-x drop-shadow-lg",children:"News Unpacked"}),R.jsx(Ye.span,{animate:c?{x:[0,-20,20,-30,30,-20,20,-30,30,-20,20,-10,10,0,1500],y:[0,-20,20,-30,30,-20,20,-30,30,-20,20,-10,10,0,-1500],rotate:Array(15).fill(0),scale:[...Array(14).fill(1),0],opacity:[...Array(14).fill(1),0]}:{rotate:[0,10,-10,0],y:0},transition:c?{duration:4,times:[0,.04,.08,.12,.16,.2,.24,.28,.32,.36,.4,.44,.48,.5,1],ease:"easeIn"}:{duration:2,repeat:1/0,repeatDelay:3},onClick:()=>h(!0),className:"absolute -top-6 -right-7 text-4xl cursor-pointer hover:scale-125 transition-transform",style:{display:"inline-block"},children:""})]}),R.jsx("p",{className:"text-indigo-200/80 text-sm tracking-[0.2em] font-medium uppercase mt-2",children:"Online Discovery & Discussion Tool"})]})}),R.jsxs("div",{className:"flex flex-col gap-5",children:[a&&R.jsx(Ye.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-red-500/10 border border-red-500/30 text-red-200 px-4 py-3 rounded-xl text-sm text-center font-medium",children:a}),R.jsx("div",{children:R.jsx("input",{type:"text",value:t,onChange:g=>e(g.target.value),maxLength:10,className:"input-field bg-white/5 border-white/10 rounded-xl py-3 px-4 focus:ring-2 focus:ring-indigo-500/50 transition-all",placeholder:" (10)"})}),R.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/10 to-transparent my-2"}),R.jsxs("div",{className:"flex flex-col gap-4",children:[R.jsx(Ye.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,disabled:!t||s,className:`w-full py-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 bg-[length:200%_auto] hover:bg-right transition-all duration-500
                                     disabled:opacity-60 disabled:cursor-not-allowed rounded-xl font-bold text-lg shadow-xl shadow-indigo-900/40 text-white relative overflow-hidden group`,children:R.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:s?R.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}):R.jsxs(R.Fragment,{children:[R.jsx("span",{children:""}),R.jsx("span",{children:""})]})})}),R.jsx("div",{className:"relative text-center",children:R.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-widest bg-transparent px-2",children:""})}),R.jsxs("div",{className:"relative flex items-center group",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:R.jsx("span",{className:"text-gray-500 group-focus-within:text-indigo-400 transition-colors font-bold",children:"#"})}),R.jsx("input",{type:"text",value:n,onChange:g=>r(g.target.value.toUpperCase()),className:"input-field !pl-8 pr-28 bg-white/5 border-white/10 rounded-xl py-4",placeholder:"ROOM ID",maxLength:6}),R.jsx(Ye.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,disabled:!t||!n||s,className:`absolute right-2 top-2 bottom-2 px-6 bg-white/10 hover:bg-emerald-500/80 hover:text-white
                                         disabled:opacity-30 rounded-lg font-bold text-sm transition-all text-gray-300`,children:""})]})]})]})]}),R.jsx(Ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 text-white/40 text-xs font-mono tracking-widest",children:"v1.0.1  DESIGNED FOR DISCOVERY"})]})};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},X2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new J2;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const T=c<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z2=function(t){const e=vx(t);return _x.encodeByteArray(e,!0)},hu=function(t){return Z2(t).replace(/\./g,"")},eD=function(t){try{return _x.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=()=>tD().__FIREBASE_DEFAULTS__,rD=()=>{if(typeof process>"u"||typeof v0>"u")return;const t=v0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eD(t[1]);return e&&JSON.parse(e)},Hp=()=>{try{return nD()||rD()||iD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sD=t=>{var e,n;return(n=(e=Hp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oD=t=>{const e=sD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wx=()=>{var t;return(t=Hp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hu(JSON.stringify(n)),hu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cD(){var t;const e=(t=Hp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hD(){return!cD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dD(){try{return typeof indexedDB=="object"}catch{return!1}}function fD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pD,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ex.prototype.create)}}class Ex{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ms(i,a,r)}}function mD(t,e){return t.replace(gD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gD=/\{\$([^}]+)}/g;function du(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_0(s)&&_0(o)){if(!du(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){return t&&t._delegate?t._delegate:t}class Wo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_D(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vD(t){return t===Br?void 0:t}function _D(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const ED={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},TD=ne.INFO,xD={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},SD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=xD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tx{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=SD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ED[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const AD=(t,e)=>e.some(n=>t instanceof n);let w0,E0;function ID(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PD(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xx=new WeakMap,$d=new WeakMap,Sx=new WeakMap,wh=new WeakMap,Gp=new WeakMap;function CD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xx.set(n,t)}).catch(()=>{}),Gp.set(e,t),e}function RD(t){if($d.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$d.set(t,e)}let zd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kD(t){zd=t(zd)}function VD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eh(this),e,...n);return Sx.set(r,e.sort?e.sort():[e]),fr(r)}:PD().includes(t)?function(...e){return t.apply(Eh(this),e),fr(xx.get(this))}:function(...e){return fr(t.apply(Eh(this),e))}}function DD(t){return typeof t=="function"?VD(t):(t instanceof IDBTransaction&&RD(t),AD(t,ID())?new Proxy(t,zd):t)}function fr(t){if(t instanceof IDBRequest)return CD(t);if(wh.has(t))return wh.get(t);const e=DD(t);return e!==t&&(wh.set(t,e),Gp.set(e,t)),e}const Eh=t=>Gp.get(t);function bD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=fr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(fr(o.result),u.oldVersion,u.newVersion,fr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ND=["get","getKey","getAll","getAllKeys","count"],MD=["put","add","delete","clear"],Th=new Map;function T0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ND.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Th.set(e,s),s}kD(t=>({...t,get:(e,n,r)=>T0(e,n)||t.get(e,n,r),has:(e,n)=>!!T0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",x0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Tx("@firebase/app"),FD="@firebase/app-compat",jD="@firebase/analytics-compat",UD="@firebase/analytics",BD="@firebase/app-check-compat",$D="@firebase/app-check",zD="@firebase/auth",WD="@firebase/auth-compat",KD="@firebase/database",qD="@firebase/data-connect",HD="@firebase/database-compat",GD="@firebase/functions",QD="@firebase/functions-compat",YD="@firebase/installations",XD="@firebase/installations-compat",JD="@firebase/messaging",ZD="@firebase/messaging-compat",eb="@firebase/performance",tb="@firebase/performance-compat",nb="@firebase/remote-config",rb="@firebase/remote-config-compat",ib="@firebase/storage",sb="@firebase/storage-compat",ob="@firebase/firestore",ab="@firebase/vertexai-preview",lb="@firebase/firestore-compat",ub="firebase",cb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",hb={[Wd]:"fire-core",[FD]:"fire-core-compat",[UD]:"fire-analytics",[jD]:"fire-analytics-compat",[$D]:"fire-app-check",[BD]:"fire-app-check-compat",[zD]:"fire-auth",[WD]:"fire-auth-compat",[KD]:"fire-rtdb",[qD]:"fire-data-connect",[HD]:"fire-rtdb-compat",[GD]:"fire-fn",[QD]:"fire-fn-compat",[YD]:"fire-iid",[XD]:"fire-iid-compat",[JD]:"fire-fcm",[ZD]:"fire-fcm-compat",[eb]:"fire-perf",[tb]:"fire-perf-compat",[nb]:"fire-rc",[rb]:"fire-rc-compat",[ib]:"fire-gcs",[sb]:"fire-gcs-compat",[ob]:"fire-fst",[lb]:"fire-fst-compat",[ab]:"fire-vertex","fire-js":"fire-js",[ub]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new Map,db=new Map,qd=new Map;function S0(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pu(t){const e=t.name;if(qd.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,t);for(const n of fu.values())S0(n,t);for(const n of db.values())S0(n,t);return!0}function fb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Ex("app","Firebase",pb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=cb;function Ax(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=wx()),!n)throw pr.create("no-options");const s=fu.get(i);if(s){if(du(n,s.options)&&du(r,s.config))return s;throw pr.create("duplicate-app",{appName:i})}const o=new wD(i);for(const u of qd.values())o.addComponent(u);const a=new mb(n,r,o);return fu.set(i,a),a}function yb(t=Kd){const e=fu.get(t);if(!e&&t===Kd&&wx())return Ax();if(!e)throw pr.create("no-app",{appName:t});return e}function Wi(t,e,n){var r;let i=(r=hb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(a.join(" "));return}pu(new Wo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="firebase-heartbeat-database",_b=1,Ko="firebase-heartbeat-store";let xh=null;function Ix(){return xh||(xh=bD(vb,_b,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),xh}async function wb(t){try{const n=(await Ix()).transaction(Ko),r=await n.objectStore(Ko).get(Px(t));return await n.done,r}catch(e){if(e instanceof ms)Fn.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function A0(t,e){try{const r=(await Ix()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,Px(t)),await r.done}catch(n){if(n instanceof ms)Fn.warn(n.message);else{const r=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function Px(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1024,Tb=30*24*60*60*1e3;class xb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ab(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=I0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Tb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=I0(),{heartbeatsToSend:r,unsentEntries:i}=Sb(this._heartbeatsCache.heartbeats),s=hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fn.warn(n),""}}}function I0(){return new Date().toISOString().substring(0,10)}function Sb(t,e=Eb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),P0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ab{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dD()?fD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function P0(t){return hu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){pu(new Wo("platform-logger",e=>new LD(e),"PRIVATE")),pu(new Wo("heartbeat",e=>new xb(e),"PRIVATE")),Wi(Wd,x0,t),Wi(Wd,x0,"esm2017"),Wi("fire-js","")}Ib("");var Pb="firebase",Cb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wi(Pb,Cb,"app");var C0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,Cx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function E(){}E.prototype=y.prototype,A.D=y.prototype,A.prototype=new E,A.prototype.constructor=A,A.C=function(S,k,D){for(var C=Array(arguments.length-2),We=2;We<arguments.length;We++)C[We-2]=arguments[We];return y.prototype[k].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,y,E){E||(E=0);var S=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)S[k]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(k=0;16>k;++k)S[k]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=A.g[0],E=A.g[1],k=A.g[2];var D=A.g[3],C=y+(D^E&(k^D))+S[0]+3614090360&4294967295;y=E+(C<<7&4294967295|C>>>25),C=D+(k^y&(E^k))+S[1]+3905402710&4294967295,D=y+(C<<12&4294967295|C>>>20),C=k+(E^D&(y^E))+S[2]+606105819&4294967295,k=D+(C<<17&4294967295|C>>>15),C=E+(y^k&(D^y))+S[3]+3250441966&4294967295,E=k+(C<<22&4294967295|C>>>10),C=y+(D^E&(k^D))+S[4]+4118548399&4294967295,y=E+(C<<7&4294967295|C>>>25),C=D+(k^y&(E^k))+S[5]+1200080426&4294967295,D=y+(C<<12&4294967295|C>>>20),C=k+(E^D&(y^E))+S[6]+2821735955&4294967295,k=D+(C<<17&4294967295|C>>>15),C=E+(y^k&(D^y))+S[7]+4249261313&4294967295,E=k+(C<<22&4294967295|C>>>10),C=y+(D^E&(k^D))+S[8]+1770035416&4294967295,y=E+(C<<7&4294967295|C>>>25),C=D+(k^y&(E^k))+S[9]+2336552879&4294967295,D=y+(C<<12&4294967295|C>>>20),C=k+(E^D&(y^E))+S[10]+4294925233&4294967295,k=D+(C<<17&4294967295|C>>>15),C=E+(y^k&(D^y))+S[11]+2304563134&4294967295,E=k+(C<<22&4294967295|C>>>10),C=y+(D^E&(k^D))+S[12]+1804603682&4294967295,y=E+(C<<7&4294967295|C>>>25),C=D+(k^y&(E^k))+S[13]+4254626195&4294967295,D=y+(C<<12&4294967295|C>>>20),C=k+(E^D&(y^E))+S[14]+2792965006&4294967295,k=D+(C<<17&4294967295|C>>>15),C=E+(y^k&(D^y))+S[15]+1236535329&4294967295,E=k+(C<<22&4294967295|C>>>10),C=y+(k^D&(E^k))+S[1]+4129170786&4294967295,y=E+(C<<5&4294967295|C>>>27),C=D+(E^k&(y^E))+S[6]+3225465664&4294967295,D=y+(C<<9&4294967295|C>>>23),C=k+(y^E&(D^y))+S[11]+643717713&4294967295,k=D+(C<<14&4294967295|C>>>18),C=E+(D^y&(k^D))+S[0]+3921069994&4294967295,E=k+(C<<20&4294967295|C>>>12),C=y+(k^D&(E^k))+S[5]+3593408605&4294967295,y=E+(C<<5&4294967295|C>>>27),C=D+(E^k&(y^E))+S[10]+38016083&4294967295,D=y+(C<<9&4294967295|C>>>23),C=k+(y^E&(D^y))+S[15]+3634488961&4294967295,k=D+(C<<14&4294967295|C>>>18),C=E+(D^y&(k^D))+S[4]+3889429448&4294967295,E=k+(C<<20&4294967295|C>>>12),C=y+(k^D&(E^k))+S[9]+568446438&4294967295,y=E+(C<<5&4294967295|C>>>27),C=D+(E^k&(y^E))+S[14]+3275163606&4294967295,D=y+(C<<9&4294967295|C>>>23),C=k+(y^E&(D^y))+S[3]+4107603335&4294967295,k=D+(C<<14&4294967295|C>>>18),C=E+(D^y&(k^D))+S[8]+1163531501&4294967295,E=k+(C<<20&4294967295|C>>>12),C=y+(k^D&(E^k))+S[13]+2850285829&4294967295,y=E+(C<<5&4294967295|C>>>27),C=D+(E^k&(y^E))+S[2]+4243563512&4294967295,D=y+(C<<9&4294967295|C>>>23),C=k+(y^E&(D^y))+S[7]+1735328473&4294967295,k=D+(C<<14&4294967295|C>>>18),C=E+(D^y&(k^D))+S[12]+2368359562&4294967295,E=k+(C<<20&4294967295|C>>>12),C=y+(E^k^D)+S[5]+4294588738&4294967295,y=E+(C<<4&4294967295|C>>>28),C=D+(y^E^k)+S[8]+2272392833&4294967295,D=y+(C<<11&4294967295|C>>>21),C=k+(D^y^E)+S[11]+1839030562&4294967295,k=D+(C<<16&4294967295|C>>>16),C=E+(k^D^y)+S[14]+4259657740&4294967295,E=k+(C<<23&4294967295|C>>>9),C=y+(E^k^D)+S[1]+2763975236&4294967295,y=E+(C<<4&4294967295|C>>>28),C=D+(y^E^k)+S[4]+1272893353&4294967295,D=y+(C<<11&4294967295|C>>>21),C=k+(D^y^E)+S[7]+4139469664&4294967295,k=D+(C<<16&4294967295|C>>>16),C=E+(k^D^y)+S[10]+3200236656&4294967295,E=k+(C<<23&4294967295|C>>>9),C=y+(E^k^D)+S[13]+681279174&4294967295,y=E+(C<<4&4294967295|C>>>28),C=D+(y^E^k)+S[0]+3936430074&4294967295,D=y+(C<<11&4294967295|C>>>21),C=k+(D^y^E)+S[3]+3572445317&4294967295,k=D+(C<<16&4294967295|C>>>16),C=E+(k^D^y)+S[6]+76029189&4294967295,E=k+(C<<23&4294967295|C>>>9),C=y+(E^k^D)+S[9]+3654602809&4294967295,y=E+(C<<4&4294967295|C>>>28),C=D+(y^E^k)+S[12]+3873151461&4294967295,D=y+(C<<11&4294967295|C>>>21),C=k+(D^y^E)+S[15]+530742520&4294967295,k=D+(C<<16&4294967295|C>>>16),C=E+(k^D^y)+S[2]+3299628645&4294967295,E=k+(C<<23&4294967295|C>>>9),C=y+(k^(E|~D))+S[0]+4096336452&4294967295,y=E+(C<<6&4294967295|C>>>26),C=D+(E^(y|~k))+S[7]+1126891415&4294967295,D=y+(C<<10&4294967295|C>>>22),C=k+(y^(D|~E))+S[14]+2878612391&4294967295,k=D+(C<<15&4294967295|C>>>17),C=E+(D^(k|~y))+S[5]+4237533241&4294967295,E=k+(C<<21&4294967295|C>>>11),C=y+(k^(E|~D))+S[12]+1700485571&4294967295,y=E+(C<<6&4294967295|C>>>26),C=D+(E^(y|~k))+S[3]+2399980690&4294967295,D=y+(C<<10&4294967295|C>>>22),C=k+(y^(D|~E))+S[10]+4293915773&4294967295,k=D+(C<<15&4294967295|C>>>17),C=E+(D^(k|~y))+S[1]+2240044497&4294967295,E=k+(C<<21&4294967295|C>>>11),C=y+(k^(E|~D))+S[8]+1873313359&4294967295,y=E+(C<<6&4294967295|C>>>26),C=D+(E^(y|~k))+S[15]+4264355552&4294967295,D=y+(C<<10&4294967295|C>>>22),C=k+(y^(D|~E))+S[6]+2734768916&4294967295,k=D+(C<<15&4294967295|C>>>17),C=E+(D^(k|~y))+S[13]+1309151649&4294967295,E=k+(C<<21&4294967295|C>>>11),C=y+(k^(E|~D))+S[4]+4149444226&4294967295,y=E+(C<<6&4294967295|C>>>26),C=D+(E^(y|~k))+S[11]+3174756917&4294967295,D=y+(C<<10&4294967295|C>>>22),C=k+(y^(D|~E))+S[2]+718787259&4294967295,k=D+(C<<15&4294967295|C>>>17),C=E+(D^(k|~y))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+D&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var E=y-this.blockSize,S=this.B,k=this.h,D=0;D<y;){if(k==0)for(;D<=E;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<y;)if(S[k++]=A.charCodeAt(D++),k==this.blockSize){i(this,S),k=0;break}}else for(;D<y;)if(S[k++]=A[D++],k==this.blockSize){i(this,S),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var E=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=E&255,E/=256;for(this.u(A),A=Array(16),y=E=0;4>y;++y)for(var S=0;32>S;S+=8)A[E++]=this.g[y]>>>S&255;return A};function s(A,y){var E=a;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=y(A)}function o(A,y){this.h=y;for(var E=[],S=!0,k=A.length-1;0<=k;k--){var D=A[k]|0;S&&D==y||(E[k]=D,S=!1)}this.g=E}var a={};function u(A){return-128<=A&&128>A?s(A,function(y){return new o([y|0],0>y?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return P(c(-A));for(var y=[],E=1,S=0;A>=E;S++)y[S]=A/E|0,E*=4294967296;return new o(y,0)}function h(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return P(h(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(y,8)),S=d,k=0;k<A.length;k+=8){var D=Math.min(8,A.length-k),C=parseInt(A.substring(k,k+D),y);8>D?(D=c(Math.pow(y,D)),S=S.j(D).add(c(C))):(S=S.j(E),S=S.add(c(C)))}return S}var d=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var A=0,y=1,E=0;E<this.g.length;E++){var S=this.i(E);A+=(0<=S?S:4294967296+S)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(I(this))return"-"+P(this).toString(A);for(var y=c(Math.pow(A,6)),E=this,S="";;){var k=b(E,y).g;E=w(E,k.j(y));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(A);if(E=k,T(E))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function I(A){return A.h==-1}t.l=function(A){return A=w(this,A),I(A)?-1:T(A)?0:1};function P(A){for(var y=A.g.length,E=[],S=0;S<y;S++)E[S]=~A.g[S];return new o(E,~A.h).add(p)}t.abs=function(){return I(this)?P(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],S=0,k=0;k<=y;k++){var D=S+(this.i(k)&65535)+(A.i(k)&65535),C=(D>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);S=C>>>16,D&=65535,C&=65535,E[k]=C<<16|D}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(A,y){return A.add(P(y))}t.j=function(A){if(T(this)||T(A))return d;if(I(this))return I(A)?P(this).j(P(A)):P(P(this).j(A));if(I(A))return P(this.j(P(A)));if(0>this.l(g)&&0>A.l(g))return c(this.m()*A.m());for(var y=this.g.length+A.g.length,E=[],S=0;S<2*y;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<A.g.length;k++){var D=this.i(S)>>>16,C=this.i(S)&65535,We=A.i(k)>>>16,jt=A.i(k)&65535;E[2*S+2*k]+=C*jt,v(E,2*S+2*k),E[2*S+2*k+1]+=D*jt,v(E,2*S+2*k+1),E[2*S+2*k+1]+=C*We,v(E,2*S+2*k+1),E[2*S+2*k+2]+=D*We,v(E,2*S+2*k+2)}for(S=0;S<y;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=y;S<2*y;S++)E[S]=0;return new o(E,0)};function v(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function x(A,y){this.g=A,this.h=y}function b(A,y){if(T(y))throw Error("division by zero");if(T(A))return new x(d,d);if(I(A))return y=b(P(A),y),new x(P(y.g),P(y.h));if(I(y))return y=b(A,P(y)),new x(P(y.g),y.h);if(30<A.g.length){if(I(A)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var E=p,S=y;0>=S.l(A);)E=M(E),S=M(S);var k=O(E,1),D=O(S,1);for(S=O(S,2),E=O(E,2);!T(S);){var C=D.add(S);0>=C.l(A)&&(k=k.add(E),D=C),S=O(S,1),E=O(E,1)}return y=w(A,k.j(y)),new x(k,y)}for(k=d;0<=A.l(y);){for(E=Math.max(1,Math.floor(A.m()/y.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=c(E),C=D.j(y);I(C)||0<C.l(A);)E-=S,D=c(E),C=D.j(y);T(D)&&(D=p),k=k.add(D),A=w(A,C)}return new x(k,A)}t.A=function(A){return b(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)&A.i(S);return new o(E,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)|A.i(S);return new o(E,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)^A.i(S);return new o(E,this.h^A.h)};function M(A){for(var y=A.g.length+1,E=[],S=0;S<y;S++)E[S]=A.i(S)<<1|A.i(S-1)>>>31;return new o(E,A.h)}function O(A,y){var E=y>>5;y%=32;for(var S=A.g.length-E,k=[],D=0;D<S;D++)k[D]=0<y?A.i(D+E)>>>y|A.i(D+E+1)<<32-y:A.i(D+E);return new o(k,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Yr=o}).apply(typeof C0<"u"?C0:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rx,Js,kx,Il,Hd,Vx,Dx,bx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var N=l[_];if(!(N in m))break e;m=m[N]}l=l[l.length-1],_=m[l],f=f(_),f!=_&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,_=!1,N={next:function(){if(!_&&m<l.length){var L=m++;return{value:f(L,l[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function d(l,f,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),l.apply(f,N)}}return function(){return l.apply(f,arguments)}}function p(l,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function T(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,N,L){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return f.prototype[N].apply(_,B)}}function I(l){const f=l.length;if(0<f){const m=Array(f);for(let _=0;_<f;_++)m[_]=l[_];return m}return[]}function P(l,f){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const N=l.length||0,L=_.length||0;l.length=N+L;for(let B=0;B<L;B++)l[N+B]=_[B]}else l.push(_)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(l,f,m){for(const _ in l)f.call(m,l[_],_,l)}function A(l,f){for(const m in l)f.call(void 0,l[m],m,l)}function y(l){const f={};for(const m in l)f[m]=l[m];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,f){let m,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(m in _)l[m]=_[m];for(let L=0;L<E.length;L++)m=E[L],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function k(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function D(l){a.setTimeout(()=>{throw l},0)}function C(){var l=Q;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class We{constructor(){this.h=this.g=null}add(f,m){const _=jt.get();_.set(f,m),this.h?this.h.next=_:this.g=_,this.h=_}}var jt=new w(()=>new zn,l=>l.reset());class zn{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let de,$=!1,Q=new We,J=()=>{const l=a.Promise.resolve(void 0);de=()=>{l.then(ve)}};var ve=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(m){D(m)}var f=jt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var vn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function _n(l,f){if(Pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(M){e:{try{b(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:wn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_n.aa.h.call(this)}}T(_n,Pe);var wn={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),dS=0;function fS(l,f,m,_,N){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!_,this.ha=N,this.key=++dS,this.da=this.fa=!1}function wa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ea(l){this.src=l,this.g={},this.h=0}Ea.prototype.add=function(l,f,m,_,N){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var B=dc(l,f,_,N);return-1<B?(f=l[B],m||(f.fa=!1)):(f=new fS(f,this.src,L,!!_,N),f.fa=m,l.push(f)),f};function hc(l,f){var m=f.type;if(m in l.g){var _=l.g[m],N=Array.prototype.indexOf.call(_,f,void 0),L;(L=0<=N)&&Array.prototype.splice.call(_,N,1),L&&(wa(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function dc(l,f,m,_){for(var N=0;N<l.length;++N){var L=l[N];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==_)return N}return-1}var fc="closure_lm_"+(1e6*Math.random()|0),pc={};function Fm(l,f,m,_,N){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Fm(l,f[L],m,_,N);return null}return m=Bm(m),l&&l[En]?l.K(f,m,c(_)?!!_.capture:!1,N):pS(l,f,m,!1,_,N)}function pS(l,f,m,_,N,L){if(!f)throw Error("Invalid event type");var B=c(N)?!!N.capture:!!N,ue=gc(l);if(ue||(l[fc]=ue=new Ea(l)),m=ue.add(f,m,_,B,L),m.proxy)return m;if(_=mS(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)vn||(N=B),N===void 0&&(N=!1),l.addEventListener(f.toString(),_,N);else if(l.attachEvent)l.attachEvent(Um(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function mS(){function l(m){return f.call(l.src,l.listener,m)}const f=gS;return l}function jm(l,f,m,_,N){if(Array.isArray(f))for(var L=0;L<f.length;L++)jm(l,f[L],m,_,N);else _=c(_)?!!_.capture:!!_,m=Bm(m),l&&l[En]?(l=l.i,f=String(f).toString(),f in l.g&&(L=l.g[f],m=dc(L,m,_,N),-1<m&&(wa(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete l.g[f],l.h--)))):l&&(l=gc(l))&&(f=l.g[f.toString()],l=-1,f&&(l=dc(f,m,_,N)),(m=-1<l?f[l]:null)&&mc(m))}function mc(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[En])hc(f.i,l);else{var m=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(m,_,l.capture):f.detachEvent?f.detachEvent(Um(m),_):f.addListener&&f.removeListener&&f.removeListener(_),(m=gc(f))?(hc(m,l),m.h==0&&(m.src=null,f[fc]=null)):wa(l)}}}function Um(l){return l in pc?pc[l]:pc[l]="on"+l}function gS(l,f){if(l.da)l=!0;else{f=new _n(f,this);var m=l.listener,_=l.ha||l.src;l.fa&&mc(l),l=m.call(_,f)}return l}function gc(l){return l=l[fc],l instanceof Ea?l:null}var yc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bm(l){return typeof l=="function"?l:(l[yc]||(l[yc]=function(f){return l.handleEvent(f)}),l[yc])}function rt(){le.call(this),this.i=new Ea(this),this.M=this,this.F=null}T(rt,le),rt.prototype[En]=!0,rt.prototype.removeEventListener=function(l,f,m,_){jm(this,l,f,m,_)};function gt(l,f){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new Pe(f,l);else if(f instanceof Pe)f.target=f.target||l;else{var N=f;f=new Pe(_,l),S(f,N)}if(N=!0,m)for(var L=m.length-1;0<=L;L--){var B=f.g=m[L];N=Ta(B,_,!0,f)&&N}if(B=f.g=l,N=Ta(B,_,!0,f)&&N,N=Ta(B,_,!1,f)&&N,m)for(L=0;L<m.length;L++)B=f.g=m[L],N=Ta(B,_,!1,f)&&N}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],_=0;_<m.length;_++)wa(m[_]);delete l.g[f],l.h--}}this.F=null},rt.prototype.K=function(l,f,m,_){return this.i.add(String(l),f,!1,m,_)},rt.prototype.L=function(l,f,m,_){return this.i.add(String(l),f,!0,m,_)};function Ta(l,f,m,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,L=0;L<f.length;++L){var B=f[L];if(B&&!B.da&&B.capture==m){var ue=B.listener,Ke=B.ha||B.src;B.fa&&hc(l.i,B),N=ue.call(Ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function $m(l,f,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function zm(l){l.g=$m(()=>{l.g=null,l.i&&(l.i=!1,zm(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class yS extends le{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:zm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(l){le.call(this),this.h=l,this.g={}}T(Es,le);var Wm=[];function Km(l){O(l.g,function(f,m){this.g.hasOwnProperty(m)&&mc(f)},l),l.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Km(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vc=a.JSON.stringify,vS=a.JSON.parse,_S=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function _c(){}_c.prototype.h=null;function qm(l){return l.h||(l.h=l.i())}function Hm(){}var Ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wc(){Pe.call(this,"d")}T(wc,Pe);function Ec(){Pe.call(this,"c")}T(Ec,Pe);var Dr={},Gm=null;function xa(){return Gm=Gm||new rt}Dr.La="serverreachability";function Qm(l){Pe.call(this,Dr.La,l)}T(Qm,Pe);function xs(l){const f=xa();gt(f,new Qm(f))}Dr.STAT_EVENT="statevent";function Ym(l,f){Pe.call(this,Dr.STAT_EVENT,l),this.stat=f}T(Ym,Pe);function yt(l){const f=xa();gt(f,new Ym(f,l))}Dr.Ma="timingevent";function Xm(l,f){Pe.call(this,Dr.Ma,l),this.size=f}T(Xm,Pe);function Ss(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function wS(l,f,m,_,N,L){l.info(function(){if(l.g)if(L)for(var B="",ue=L.split("&"),Ke=0;Ke<ue.length;Ke++){var se=ue[Ke].split("=");if(1<se.length){var it=se[0];se=se[1];var st=it.split("_");B=2<=st.length&&st[1]=="type"?B+(it+"="+se+"&"):B+(it+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+m+`
`+B})}function ES(l,f,m,_,N,L,B){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+m+`
`+L+" "+B})}function di(l,f,m,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+xS(l,m)+(_?" "+_:"")})}function TS(l,f){l.info(function(){return"TIMEOUT: "+f})}As.prototype.info=function(){};function xS(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var L=N[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<N.length;B++)N[B]=""}}}}return vc(m)}catch{return f}}var Sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tc;function Aa(){}T(Aa,_c),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Tc=new Aa;function Wn(l,f,m,_){this.j=l,this.i=f,this.l=m,this.R=_||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zm}function Zm(){this.i=null,this.g="",this.h=!1}var eg={},xc={};function Sc(l,f,m){l.L=1,l.v=Ra(Tn(f)),l.m=m,l.P=!0,tg(l,null)}function tg(l,f){l.F=Date.now(),Ia(l),l.A=Tn(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),mg(m.i,"t",_),l.C=0,m=l.j.J,l.h=new Zm,l.g=bg(l.j,m?f:null,!l.m),0<l.O&&(l.M=new yS(p(l.Y,l,l.g),l.O)),f=l.U,m=l.g,_=l.ca;var N="readystatechange";Array.isArray(N)||(N&&(Wm[0]=N.toString()),N=Wm);for(var L=0;L<N.length;L++){var B=Fm(m,N[L],_||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),xs(),wS(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const f=this.M;f&&xn(l)==3?f.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const st=xn(this.g);var f=this.g.Ba();const mi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Tg(this.g)))){this.J||st!=4||f==7||(f==8||0>=mi?xs(3):xs(2)),Ac(this);var m=this.g.Z();this.X=m;t:if(ng(this)){var _=Tg(this.g);l="";var N=_.length,L=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),Is(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(L&&f==N-1)});_.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,ES(this.i,this.u,this.A,this.l,this.R,st,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Ke=this.g;if((ue=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ue)){var se=ue;break t}}se=null}if(m=se)di(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ic(this,m);else{this.o=!1,this.s=3,yt(12),br(this),Is(this);break e}}if(this.P){m=!0;let Yt;for(;!this.J&&this.C<B.length;)if(Yt=SS(this,B),Yt==xc){st==4&&(this.s=4,yt(14),m=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==eg){this.s=4,yt(15),di(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else di(this.i,this.l,Yt,null),Ic(this,Yt);if(ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,yt(16),m=!1),this.o=this.o&&m,!m)di(this.i,this.l,B,"[Invalid Chunked Response]"),br(this),Is(this);else if(0<B.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Dc(it),it.M=!0,yt(11))}}else di(this.i,this.l,B,null),Ic(this,B);st==4&&br(this),this.o&&!this.J&&(st==4?Rg(this.j,this):(this.o=!1,Ia(this)))}else BS(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),br(this),Is(this)}}}catch{}finally{}};function ng(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function SS(l,f){var m=l.C,_=f.indexOf(`
`,m);return _==-1?xc:(m=Number(f.substring(m,_)),isNaN(m)?eg:(_+=1,_+m>f.length?xc:(f=f.slice(_,_+m),l.C=_+m,f)))}Wn.prototype.cancel=function(){this.J=!0,br(this)};function Ia(l){l.S=Date.now()+l.I,rg(l,l.I)}function rg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ss(p(l.ba,l),f)}function Ac(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(TS(this.i,this.A),this.L!=2&&(xs(),yt(17)),br(this),this.s=2,Is(this)):rg(this,this.S-l)};function Is(l){l.j.G==0||l.J||Rg(l.j,l)}function br(l){Ac(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Km(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ic(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Pc(m.h,l))){if(!l.K&&Pc(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Ma(m),ba(m);else break e;Vc(m),yt(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ss(p(m.Za,m),6e3));if(1>=og(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Mr(m,11)}else if((l.K||m.g==l)&&Ma(m),!v(f))for(N=m.Da.g.parse(f),f=0;f<N.length;f++){let se=N[f];if(m.T=se[0],se=se[1],m.G==2)if(se[0]=="c"){m.K=se[1],m.ia=se[2];const it=se[3];it!=null&&(m.la=it,m.j.info("VER="+m.la));const st=se[4];st!=null&&(m.Aa=st,m.j.info("SVER="+m.Aa));const mi=se[5];mi!=null&&typeof mi=="number"&&0<mi&&(_=1.5*mi,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Yt=l.g;if(Yt){const Oa=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var L=_.h;L.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Cc(L,L.h),L.h=null))}if(_.D){const bc=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;bc&&(_.ya=bc,fe(_.I,_.D,bc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var B=l;if(_.qa=Dg(_,_.J?_.ia:null,_.W),B.K){ag(_.h,B);var ue=B,Ke=_.L;Ke&&(ue.I=Ke),ue.B&&(Ac(ue),Ia(ue)),_.g=B}else Pg(_);0<m.i.length&&Na(m)}else se[0]!="stop"&&se[0]!="close"||Mr(m,7);else m.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Mr(m,7):kc(m):se[0]!="noop"&&m.l&&m.l.ta(se),m.v=0)}}xs(4)}catch{}}var AS=class{constructor(l,f){this.g=l,this.map=f}};function ig(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function og(l){return l.h?1:l.g?l.g.size:0}function Pc(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Cc(l,f){l.g?l.g.add(f):l.h=f}function ag(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}ig.prototype.cancel=function(){if(this.i=lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function lg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return I(l.i)}function IS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],m=l.length,_=0;_<m;_++)f.push(l[_]);return f}f=[],m=0;for(_ in l)f[m++]=l[_];return f}function PS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const _ in l)f[m++]=_;return f}}}function ug(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=PS(l),_=IS(l),N=_.length,L=0;L<N;L++)f.call(void 0,_[L],m&&m[L],l)}var cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CS(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),N=null;if(0<=_){var L=l[m].substring(0,_);N=l[m].substring(_+1)}else L=l[m];f(L,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Nr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Nr){this.h=l.h,Pa(this,l.j),this.o=l.o,this.g=l.g,Ca(this,l.s),this.l=l.l;var f=l.i,m=new Rs;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),hg(this,m),this.m=l.m}else l&&(f=String(l).match(cg))?(this.h=!1,Pa(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Ca(this,f[4]),this.l=Ps(f[5]||"",!0),hg(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}Nr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Cs(f,dg,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Cs(f,dg,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Cs(m,m.charAt(0)=="/"?VS:kS,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Cs(m,bS)),l.join("")};function Tn(l){return new Nr(l)}function Pa(l,f,m){l.j=m?Ps(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Ca(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function hg(l,f,m){f instanceof Rs?(l.i=f,NS(l.i,l.h)):(m||(f=Cs(f,DS)),l.i=new Rs(f,l.h))}function fe(l,f,m){l.i.set(f,m)}function Ra(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ps(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cs(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,RS),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function RS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var dg=/[#\/\?@]/g,kS=/[#\?:]/g,VS=/[#\?]/g,DS=/[#\?@]/g,bS=/#/g;function Rs(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Kn(l){l.g||(l.g=new Map,l.h=0,l.i&&CS(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Rs.prototype,t.add=function(l,f){Kn(this),this.i=null,l=fi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function fg(l,f){Kn(l),f=fi(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function pg(l,f){return Kn(l),f=fi(l,f),l.g.has(f)}t.forEach=function(l,f){Kn(this),this.g.forEach(function(m,_){m.forEach(function(N){l.call(f,N,_,this)},this)},this)},t.na=function(){Kn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let _=0;_<f.length;_++){const N=l[_];for(let L=0;L<N.length;L++)m.push(f[_])}return m},t.V=function(l){Kn(this);let f=[];if(typeof l=="string")pg(this,l)&&(f=f.concat(this.g.get(fi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},t.set=function(l,f){return Kn(this),this.i=null,l=fi(this,l),pg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function mg(l,f,m){fg(l,f),0<m.length&&(l.i=null,l.g.set(fi(l,f),I(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var _=f[m];const L=encodeURIComponent(String(_)),B=this.V(_);for(_=0;_<B.length;_++){var N=L;B[_]!==""&&(N+="="+encodeURIComponent(String(B[_]))),l.push(N)}}return this.i=l.join("&")};function fi(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function NS(l,f){f&&!l.j&&(Kn(l),l.i=null,l.g.forEach(function(m,_){var N=_.toLowerCase();_!=N&&(fg(this,_),mg(this,N,m))},l)),l.j=f}function MS(l,f){const m=new As;if(a.Image){const _=new Image;_.onload=g(qn,m,"TestLoadImage: loaded",!0,f,_),_.onerror=g(qn,m,"TestLoadImage: error",!1,f,_),_.onabort=g(qn,m,"TestLoadImage: abort",!1,f,_),_.ontimeout=g(qn,m,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function LS(l,f){const m=new As,_=new AbortController,N=setTimeout(()=>{_.abort(),qn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(L=>{clearTimeout(N),L.ok?qn(m,"TestPingServer: ok",!0,f):qn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),qn(m,"TestPingServer: error",!1,f)})}function qn(l,f,m,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(m)}catch{}}function OS(){this.g=new _S}function FS(l,f,m){const _=m||"";try{ug(l,function(N,L){let B=N;c(N)&&(B=vc(N)),f.push(_+L+"="+encodeURIComponent(B))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function ka(l){this.l=l.Ub||null,this.j=l.eb||!1}T(ka,_c),ka.prototype.g=function(){return new Va(this.l,this.j)},ka.prototype.i=function(l){return function(){return l}}({});function Va(l,f){rt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Va,rt),t=Va.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Vs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function gg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?ks(this):Vs(this),this.readyState==3&&gg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ks(this))},t.Qa=function(l){this.g&&(this.response=l,ks(this))},t.ga=function(){this.g&&ks(this)};function ks(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Vs(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function Vs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yg(l){let f="";return O(l,function(m,_){f+=_,f+=":",f+=m,f+=`\r
`}),f}function Rc(l,f,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=yg(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):fe(l,f,m))}function Se(l){rt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Se,rt);var jS=/^https?$/i,US=["POST","PUT"];t=Se.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tc.g(),this.v=this.o?qm(this.o):qm(Tc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(L){vg(this,L);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)m.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),N=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(US,f,void 0))||_||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of m)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eg(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){vg(this,L)}};function vg(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,_g(l),Da(l)}function _g(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),Da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wg(this):this.bb())},t.bb=function(){wg(this)};function wg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||xn(l)!=4||l.Z()!=2)){if(l.u&&xn(l)==4)$m(l.Ea,0,l);else if(gt(l,"readystatechange"),xn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var _;if(_=B===0){var N=String(l.D).match(cg)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!jS.test(N?N.toLowerCase():"")}m=_}if(m)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var L=2<xn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",_g(l)}}finally{Da(l)}}}}function Da(l,f){if(l.g){Eg(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||gt(l,"ready");try{m.onreadystatechange=_}catch{}}}function Eg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function xn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),vS(f)}};function Tg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function BS(l){const f={};l=(l.g&&2<=xn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var m=k(l[_]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[N]||[];f[N]=L,L.push(m)}A(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function xg(l){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,l),this.cb=Ds("retryDelaySeedMs",1e4,l),this.Wa=Ds("forwardChannelMaxRetries",2,l),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ig(l&&l.concurrentRequestLimit),this.Da=new OS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xg.prototype,t.la=8,t.G=1,t.connect=function(l,f,m,_){yt(0),this.W=l,this.H=f||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Dg(this,null,this.W),Na(this)};function kc(l){if(Sg(l),l.G==3){var f=l.U++,m=Tn(l.I);if(fe(m,"SID",l.K),fe(m,"RID",f),fe(m,"TYPE","terminate"),bs(l,m),f=new Wn(l,l.j,f),f.L=2,f.v=Ra(Tn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=bg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ia(f)}Vg(l)}function ba(l){l.g&&(Dc(l),l.g.cancel(),l.g=null)}function Sg(l){ba(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ma(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Na(l){if(!sg(l.h)&&!l.s){l.s=!0;var f=l.Ga;de||J(),$||(de(),$=!0),Q.add(f,l),l.B=0}}function $S(l,f){return og(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ss(p(l.Ga,l,f),kg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const N=new Wn(this,this.j,l);let L=this.o;if(this.S&&(L?(L=y(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(N.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Ig(this,N,f),m=Tn(this.I),fe(m,"RID",l),fe(m,"CVER",22),this.D&&fe(m,"X-HTTP-Session-Id",this.D),bs(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(yg(L)))+"&"+f:this.m&&Rc(m,this.m,L)),Cc(this.h,N),this.Ua&&fe(m,"TYPE","init"),this.P?(fe(m,"$req",f),fe(m,"SID","null"),N.T=!0,Sc(N,m,null)):Sc(N,m,f),this.G=2}}else this.G==3&&(l?Ag(this,l):this.i.length==0||sg(this.h)||Ag(this))};function Ag(l,f){var m;f?m=f.l:m=l.U++;const _=Tn(l.I);fe(_,"SID",l.K),fe(_,"RID",m),fe(_,"AID",l.T),bs(l,_),l.m&&l.o&&Rc(_,l.m,l.o),m=new Wn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ig(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cc(l.h,m),Sc(m,_,f)}function bs(l,f){l.H&&O(l.H,function(m,_){fe(f,_,m)}),l.l&&ug({},function(m,_){fe(f,_,m)})}function Ig(l,f,m){m=Math.min(l.i.length,m);var _=l.l?p(l.l.Na,l.l,l):null;e:{var N=l.i;let L=-1;for(;;){const B=["count="+m];L==-1?0<m?(L=N[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let ue=!0;for(let Ke=0;Ke<m;Ke++){let se=N[Ke].g;const it=N[Ke].map;if(se-=L,0>se)L=Math.max(0,N[Ke].g-100),ue=!1;else try{FS(it,B,"req"+se+"_")}catch{_&&_(it)}}if(ue){_=B.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,_}function Pg(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;de||J(),$||(de(),$=!0),Q.add(f,l),l.v=0}}function Vc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ss(p(l.Fa,l),kg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ss(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),ba(this),Cg(this))};function Dc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Cg(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Tn(l.qa);fe(f,"RID","rpc"),fe(f,"SID",l.K),fe(f,"AID",l.T),fe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(f,"TO",l.ja),fe(f,"TYPE","xmlhttp"),bs(l,f),l.m&&l.o&&Rc(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ra(Tn(f)),m.m=null,m.P=!0,tg(m,l)}t.Za=function(){this.C!=null&&(this.C=null,ba(this),Vc(this),yt(19))};function Ma(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Rg(l,f){var m=null;if(l.g==f){Ma(l),Dc(l),l.g=null;var _=2}else if(Pc(l.h,f))m=f.D,ag(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var N=l.B;_=xa(),gt(_,new Xm(_,m)),Na(l)}else Pg(l);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&$S(l,f)||_==2&&Vc(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),N){case 1:Mr(l,5);break;case 4:Mr(l,10);break;case 3:Mr(l,6);break;default:Mr(l,2)}}}function kg(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function Mr(l,f){if(l.j.info("Error code "+f),f==2){var m=p(l.fb,l),_=l.Xa;const N=!_;_=new Nr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pa(_,"https"),Ra(_),N?MS(_.toString(),m):LS(_.toString(),m)}else yt(2);l.G=0,l.l&&l.l.sa(f),Vg(l),Sg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vg(l){if(l.G=0,l.ka=[],l.l){const f=lg(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function Dg(l,f,m){var _=m instanceof Nr?Tn(m):new Nr(m);if(_.g!="")f&&(_.g=f+"."+_.g),Ca(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var L=new Nr(null);_&&Pa(L,_),f&&(L.g=f),N&&Ca(L,N),m&&(L.l=m),_=L}return m=l.D,f=l.ya,m&&f&&fe(_,m,f),fe(_,"VER",l.la),bs(l,_),_}function bg(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Se(new ka({eb:m})):new Se(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ng(){}t=Ng.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(l,f){return new Ct(l,f)};function Ct(l,f){rt.call(this),this.g=new xg(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!v(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new pi(this)}T(Ct,rt),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){kc(this.g)},Ct.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=vc(l),l=m);f.i.push(new AS(f.Ya++,l)),f.G==3&&Na(f)},Ct.prototype.N=function(){this.g.l=null,delete this.j,kc(this.g),delete this.g,Ct.aa.N.call(this)};function Mg(l){wc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}T(Mg,wc);function Lg(){Ec.call(this),this.status=1}T(Lg,Ec);function pi(l){this.g=l}T(pi,Ng),pi.prototype.ua=function(){gt(this.g,"a")},pi.prototype.ta=function(l){gt(this.g,new Mg(l))},pi.prototype.sa=function(l){gt(this.g,new Lg)},pi.prototype.ra=function(){gt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,bx=function(){return new La},Dx=function(){return xa()},Vx=Dr,Hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,Il=Sa,Jm.COMPLETE="complete",kx=Jm,Hm.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Js=Hm,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Rx=Se}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});const R0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Tx("@firebase/firestore");function zs(){return ni.logLevel}function K(t,...e){if(ni.logLevel<=ne.DEBUG){const n=e.map(Qp);ni.debug(`Firestore (${gs}): ${t}`,...n)}}function jn(t,...e){if(ni.logLevel<=ne.ERROR){const n=e.map(Qp);ni.error(`Firestore (${gs}): ${t}`,...n)}}function ns(t,...e){if(ni.logLevel<=ne.WARN){const n=e.map(Qp);ni.warn(`Firestore (${gs}): ${t}`,...n)}}function Qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${gs}) INTERNAL ASSERTION FAILED: `+t;throw jn(e),new Error(e)}function ie(t,e){t||G()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vb{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Nx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new ct(e)}}class Db{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Db(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ie(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.R=n.token,new Nb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Lb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new je(0,0))}static max(){return new Y(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends qo{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const Ob=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends qo{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return Ob.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ce.fromString(e))}static fromName(e){return new q(ce.fromString(e).popFirst(5))}static empty(){return new q(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ce(e.slice()))}}function Fb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new wr(i,q.empty(),e)}function jb(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(Y.min(),q.empty(),-1)}static max(){return new wr(Y.max(),q.empty(),-1)}}function Ub(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Bb)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function zb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yp.oe=-1;function ha(t){return t==null}function mu(t){return t===0&&1/t==-1/0}function Wb(t){return typeof t=="number"&&Number.isInteger(t)&&!mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=i??Qe.EMPTY,this.right=s??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Qe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new et(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ox("Invalid base64 string: "+s):s}}(e);return new nt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const Kb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ie(!!t),typeof t=="string"){let e=0;const n=Kb.exec(t);if(ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jp(t){const e=t.mapValue.fields.__previous_value__;return Xp(e)?Jp(e):e}function Ho(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{}};function ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xp(t)?4:Gb(t)?9007199254740991:Hb(t)?10:11:G()}function yn(t,e){if(t===e)return!0;const n=ii(t);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ho(t).isEqual(Ho(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Er(i.timestampValue),a=Er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ri(i.bytesValue).isEqual(ri(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Re(i.doubleValue),a=Re(s.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return rs(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(k0(o)!==k0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!yn(o[u],a[u])))return!1;return!0}(t,e);default:return G()}}function Qo(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function is(t,e){if(t===e)return 0;const n=ii(t),r=ii(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Re(s.integerValue||s.doubleValue),u=Re(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return D0(t.timestampValue,e.timestampValue);case 4:return D0(Ho(t),Ho(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ri(s),u=ri(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=oe(a[c],u[c]);if(h!==0)return h}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Re(s.latitude),Re(o.latitude));return a!==0?a:oe(Re(s.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return b0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,T=(u=p.value)===null||u===void 0?void 0:u.arrayValue,I=oe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:b0(g,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===al.mapValue&&o===al.mapValue)return 0;if(s===al.mapValue)return 1;if(o===al.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const p=oe(u[d],h[d]);if(p!==0)return p;const g=is(a[u[d]],c[h[d]]);if(g!==0)return g}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw G()}}function D0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Er(t),r=Er(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function b0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=is(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function ss(t){return Gd(t)}function Gd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Gd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Gd(n.fields[o])}`;return i+"}"}(t.mapValue):G()}function N0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qd(t){return!!t&&"integerValue"in t}function Zp(t){return!!t&&"arrayValue"in t}function M0(t){return!!t&&"nullValue"in t}function L0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function Hb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Gb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mo(n)}setAll(e){let n=Xe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=mo(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ci(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _t(mo(this.value))}}function Fx(t){const e=[];return ci(t.fields,(n,r)=>{const i=new Xe([n]);if(Pl(r)){const s=Fx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,Y.min(),Y.min(),Y.min(),_t.empty(),0)}static newFoundDocument(e,n,r,i){return new $e(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new $e(e,2,n,Y.min(),Y.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,Y.min(),Y.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.position=e,this.inclusive=n}}function O0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=is(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{}class Ne extends jx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Xb(e,n,r):n==="array-contains"?new eN(e,r):n==="in"?new tN(e,r):n==="not-in"?new nN(e,r):n==="array-contains-any"?new rN(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Jb(e,r):new Zb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(is(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends jx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new an(e,n)}matches(e){return Ux(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ux(t){return t.op==="and"}function Bx(t){return Yb(t)&&Ux(t)}function Yb(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Yd(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+ss(t.value);if(Bx(t))return t.filters.map(e=>Yd(e)).join(",");{const e=t.filters.map(n=>Yd(n)).join(",");return`${t.op}(${e})`}}function $x(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)}(t,e):t instanceof an?function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$x(o,i.filters[a]),!0):!1}(t,e):void G()}function zx(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${ss(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(zx).join(" ,")+"}"}(t):"Filter"}class Xb extends Ne{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Jb extends Ne{constructor(e,n){super(e,"in",n),this.keys=Wx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Zb extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=Wx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Wx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class eN extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zp(n)&&Qo(n.arrayValue,this.value)}}class tN extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qo(this.value.arrayValue,n)}}class nN extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qo(this.value.arrayValue,n)}}class rN extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function j0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new iN(t,e,n,r,i,s,o)}function em(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ha(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ss(r)).join(",")),e.ue=n}return e.ue}function tm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$x(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F0(t.startAt,e.startAt)&&F0(t.endAt,e.endAt)}function Xd(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sN(t,e,n,r,i,s,o,a){return new ys(t,e,n,r,i,s,o,a)}function nm(t){return new ys(t)}function U0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kx(t){return t.collectionGroup!==null}function go(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(Xe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Yo(s,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new Yo(Xe.keyField(),r))}return e.ce}function gn(t){const e=X(t);return e.le||(e.le=oN(e,go(t))),e.le}function oN(t,e){if(t.limitType==="F")return j0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Yo(i.field,s)});const n=t.endAt?new gu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gu(t.startAt.position,t.startAt.inclusive):null;return j0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jd(t,e){const n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zd(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qu(t,e){return tm(gn(t),gn(e))&&t.limitType===e.limitType}function qx(t){return`${em(gn(t))}|lt:${t.limitType}`}function yi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zx(i)).join(", ")}]`),ha(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Yu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of go(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=O0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,go(r),i)||r.endAt&&!function(o,a,u){const c=O0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,go(r),i))}(t,e)}function aN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hx(t){return(e,n)=>{let r=!1;for(const i of go(t)){const s=lN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lN(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?is(u,c):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Lx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new xe(q.comparator);function Un(){return uN}const Gx=new xe(q.comparator);function Zs(...t){let e=Gx;for(const n of t)e=e.insert(n.key,n);return e}function Qx(t){let e=Gx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return yo()}function Yx(){return yo()}function yo(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const cN=new xe(q.comparator),hN=new et(q.comparator);function ee(...t){let e=hN;for(const n of t)e=e.add(n);return e}const dN=new et(oe);function fN(){return dN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function Xx(t){return{integerValue:""+t}}function pN(t,e){return Wb(e)?Xx(e):rm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function mN(t,e,n){return t instanceof Xo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xp(s)&&(s=Jp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof os?Zx(t,e):t instanceof Jo?e1(t,e):function(i,s){const o=Jx(i,s),a=B0(o)+B0(i.Pe);return Qd(o)&&Qd(i.Pe)?Xx(a):rm(i.serializer,a)}(t,e)}function gN(t,e,n){return t instanceof os?Zx(t,e):t instanceof Jo?e1(t,e):n}function Jx(t,e){return t instanceof yu?function(r){return Qd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xo extends Xu{}class os extends Xu{constructor(e){super(),this.elements=e}}function Zx(t,e){const n=t1(e);for(const r of t.elements)n.some(i=>yn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jo extends Xu{constructor(e){super(),this.elements=e}}function e1(t,e){let n=t1(e);for(const r of t.elements)n=n.filter(i=>!yn(i,r));return{arrayValue:{values:n}}}class yu extends Xu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function B0(t){return Re(t.integerValue||t.doubleValue)}function t1(t){return Zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.field=e,this.transform=n}}function yN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof os&&i instanceof os||r instanceof Jo&&i instanceof Jo?rs(r.elements,i.elements,yn):r instanceof yu&&i instanceof yu?yn(r.Pe,i.Pe):r instanceof Xo&&i instanceof Xo}(t.transform,e.transform)}class vN{constructor(e,n){this.version=e,this.transformResults=n}}class dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dt}static exists(e){return new dt(void 0,e)}static updateTime(e){return new dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ju{}function r1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new im(t.key,dt.none()):new da(t.key,t.data,dt.none());{const n=t.data,r=_t.empty();let i=new et(Xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Rr(t.key,r,new Vt(i.toArray()),dt.none())}}function _N(t,e,n){t instanceof da?function(i,s,o){const a=i.value.clone(),u=z0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rr?function(i,s,o){if(!Cl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=z0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(i1(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vo(t,e,n,r){return t instanceof da?function(s,o,a,u){if(!Cl(s.precondition,o))return a;const c=s.value.clone(),h=W0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rr?function(s,o,a,u){if(!Cl(s.precondition,o))return a;const c=W0(s.fieldTransforms,u,o),h=o.data;return h.setAll(i1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Cl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Jx(r.transform,i||null);s!=null&&(n===null&&(n=_t.empty()),n.set(r.field,s))}return n||null}function $0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(s,o)=>yN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class da extends Ju{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rr extends Ju{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function z0(t,e,n){const r=new Map;ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,gN(o,a,n[i]))}return r}function W0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,mN(s,o,e))}return r}class im extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s1 extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_N(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=r1(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(n,r)=>$0(n,r))&&rs(this.baseMutations,e.baseMutations,(n,r)=>$0(n,r))}}class sm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ie(e.mutations.length===r.length);let i=function(){return cN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,te;function o1(t){switch(t){default:return G();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function a1(t){if(t===void 0)return jn("GRPC error has no .code"),F.UNKNOWN;switch(t){case De.OK:return F.OK;case De.CANCELLED:return F.CANCELLED;case De.UNKNOWN:return F.UNKNOWN;case De.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case De.INTERNAL:return F.INTERNAL;case De.UNAVAILABLE:return F.UNAVAILABLE;case De.UNAUTHENTICATED:return F.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case De.NOT_FOUND:return F.NOT_FOUND;case De.ALREADY_EXISTS:return F.ALREADY_EXISTS;case De.PERMISSION_DENIED:return F.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case De.ABORTED:return F.ABORTED;case De.OUT_OF_RANGE:return F.OUT_OF_RANGE;case De.UNIMPLEMENTED:return F.UNIMPLEMENTED;case De.DATA_LOSS:return F.DATA_LOSS;default:return G()}}(te=De||(De={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new Yr([4294967295,4294967295],0);function K0(t){const e=SN().encode(t),n=new Cx;return n.update(e),new Uint8Array(n.digest())}function q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yr([n,r],0),new Yr([i,s],0)]}class om{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(r<0)throw new eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Yr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Yr.fromNumber(r)));return i.compare(AN)===1&&(i=new Yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=K0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new om(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=K0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zu(Y.min(),i,new xe(oe),Un(),ee())}}class fa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fa(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class l1{constructor(e,n){this.targetId=e,this.me=n}}class u1{constructor(e,n,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class H0{constructor(){this.fe=0,this.ge=Q0(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new fa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Un(),this.qe=G0(),this.Qe=new xe(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Xd(s))if(r===0){const o=new q(s.path);this.Ue(n,o,$e.newNoDocument(o,Y.min()))}else ie(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ri(r).toUint8Array()}catch(u){if(u instanceof Ox)return ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new om(o,i,s)}catch(u){return ns(u instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Xd(a.target)){const u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,$e.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ee();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Zu(e,n,this.Qe,this.ke,r);return this.ke=Un(),this.qe=G0(),this.Qe=new xe(oe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new H0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new H0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function G0(){return new xe(q.comparator)}function Q0(){return new xe(q.comparator)}const PN={asc:"ASCENDING",desc:"DESCENDING"},CN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RN={and:"AND",or:"OR"};class kN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ef(t,e){return t.useProto3Json||ha(e)?e:{value:e}}function vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VN(t,e){return vu(t,e.toTimestamp())}function Nt(t){return ie(!!t),Y.fromTimestamp(function(n){const r=Er(n);return new je(r.seconds,r.nanos)}(t))}function am(t,e){return tf(t,e).canonicalString()}function tf(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function h1(t){const e=ce.fromString(t);return ie(y1(e)),e}function _u(t,e){return am(t.databaseId,e.path)}function _o(t,e){const n=h1(e);if(n.get(1)!==t.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(f1(n))}function d1(t,e){return am(t.databaseId,e)}function DN(t){const e=h1(t);return e.length===4?ce.emptyPath():f1(e)}function nf(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function f1(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Y0(t,e,n){return{name:_u(t,e),fields:n.value.mapValue.fields}}function bN(t,e){return"found"in e?function(r,i){ie(!!i.found),i.found.name,i.found.updateTime;const s=_o(r,i.found.name),o=Nt(i.found.updateTime),a=i.found.createTime?Nt(i.found.createTime):Y.min(),u=new _t({mapValue:{fields:i.found.fields}});return $e.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){ie(!!i.missing),ie(!!i.readTime);const s=_o(r,i.missing),o=Nt(i.readTime);return $e.newNoDocument(s,o)}(t,e):G()}function NN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ie(h===void 0||typeof h=="string"),nt.fromBase64String(h||"")):(ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:a1(c.code);return new z(h,c.message||"")}(o);n=new u1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_o(t,r.document.name),s=Nt(r.document.updateTime),o=r.document.createTime?Nt(r.document.createTime):Y.min(),a=new _t({mapValue:{fields:r.document.fields}}),u=$e.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Rl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_o(t,r.document),s=r.readTime?Nt(r.readTime):Y.min(),o=$e.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Rl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_o(t,r.document),s=r.removedTargetIds||[];n=new Rl([],s,i,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new xN(i,s),a=r.targetId;n=new l1(a,o)}}return n}function p1(t,e){let n;if(e instanceof da)n={update:Y0(t,e.key,e.value)};else if(e instanceof im)n={delete:_u(t,e.key)};else if(e instanceof Rr)n={update:Y0(t,e.key,e.data),updateMask:zN(e.fieldMask)};else{if(!(e instanceof s1))return G();n={verify:_u(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof os)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:VN(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(t,e.precondition)),n}function MN(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Nt(i.updateTime):Nt(s);return o.isEqual(Y.min())&&(o=Nt(s)),new vN(o,i.transformResults||[])}(n,e))):[]}function LN(t,e){return{documents:[d1(t,e.path)]}}function ON(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=d1(t,i);const s=function(c){if(c.length!==0)return g1(an.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:vi(p.field),direction:UN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ef(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function FN(t){let e=DN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ie(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=m1(d);return p instanceof an&&Bx(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(T){return new Yo(_i(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,ha(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(d){const p=!!d.before,g=d.values||[];return new gu(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new gu(g,p)}(n.endAt)),sN(e,i,o,s,a,"F",u,c)}function jN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_i(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_i(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_i(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_i(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(_i(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>m1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function UN(t){return PN[t]}function BN(t){return CN[t]}function $N(t){return RN[t]}function vi(t){return{fieldPath:t.canonicalString()}}function _i(t){return Xe.fromServerFormat(t.fieldPath)}function g1(t){return t instanceof Ne?function(n){if(n.op==="=="){if(L0(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NAN"}};if(M0(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L0(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NAN"}};if(M0(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vi(n.field),op:BN(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(i=>g1(i));return r.length===1?r[0]:{compositeFilter:{op:$N(n.op),filters:r}}}(t):G()}function zN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.ct=e}}function KN(t){const e=FN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.un=new HN}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(wr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class HN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new as(0)}static kn(){return new as(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vo(r.mutation,i,Vt.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const i=qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zs();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Un();const o=yo(),a=function(){return yo()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Rr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),vo(h.mutation,c,h.mutation.getFieldMask(),je.now())):o.set(c.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new QN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=yo();let i=new xe((o,a)=>o-a),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Vt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(i.get(a.batchId)||ee()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=Yx();h.forEach(p=>{if(!s.has(p)){const g=r1(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(qr());let a=-1,u=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ee())).next(h=>({batchId:a,changes:Qx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Zs();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,u=>{const c=function(d,p){return new ys(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,$e.newInvalidDocument(h)))});let a=Zs();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&vo(h.mutation,c,Vt.empty(),je.now()),Yu(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nt(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:KN(i.bundledQuery),readTime:Nt(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.overlays=new xe(q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=qr(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=qr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=qr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TN(n,r));let s=this.Ir.get(n);s===void 0&&(s=ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.Tr=new et(Ue.Er),this.dr=new et(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new ce([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new ce([])),r=new Ue(n,e),i=new Ue(n,e+1);let s=ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(Ue.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EN(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ue(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(oe);return n.forEach(i=>{const s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new Ue(new q(s),0);let a=new et(oe);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.Mr=e,this.docs=function(){return new xe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$e.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un();const o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ub(jb(h),r)<=0||(i.has(h.key)||Yu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nM(this)}getSize(e){return j.resolve(this.size)}}class nM extends GN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.persistence=e,this.Nr=new vs(n=>em(n),tm),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lm,this.targetCount=0,this.kr=as.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new as(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yp(0),this.Kr=!1,this.Kr=!0,this.$r=new ZN,this.referenceDelegate=e(this),this.Ur=new rM(this),this.indexManager=new qN,this.remoteDocumentCache=function(i){return new tM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new WN(n),this.Gr=new XN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new eM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new sM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sM extends $b{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Jr=new lm,this.Yr=null}static Zr(e){return new um(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ee(),i=ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hD()?8:zb(uD())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new oM;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(zs()<=ne.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",yi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(zs()<=ne.DEBUG&&K("QueryEngine","Query:",yi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(zs()<=ne.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",yi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):j.resolve())}Yi(e,n){if(U0(n))return j.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zd(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ee(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Zd(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return U0(n)||i.isEqual(Y.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(zs()<=ne.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yi(n)),this.rs(e,o,n,Fb(i,-1)).next(a=>a))})}ts(e,n){let r=new et(Hx(e));return n.forEach((i,s)=>{Yu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return zs()<=ne.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",yi(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(oe),this._s=new vs(s=>em(s),tm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function uM(t,e,n,r){return new lM(t,e,n,r)}async function v1(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ee();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function cM(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,p=d.keys();let g=j.resolve();return p.forEach(T=>{g=g.next(()=>h.getEntry(u,T)).next(I=>{const P=c.docVersions.get(T);ie(P!==null),I.version.compareTo(P)<0&&(d.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _1(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hM(t,e){const n=X(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(nt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(I,P,w){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let u=Un(),c=ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(dM(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(Y.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function dM(t,e,n){let r=ee(),i=ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Un();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function fM(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pM(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rf(t,e,n){const r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ca(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function X0(t,e,n){const r=X(t);let i=Y.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=X(u),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ee())).next(a=>(mM(r,aN(e),a),{documents:a,Ts:s})))}function mM(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class J0{constructor(){this.activeTargetIds=fN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gM{constructor(){this.so=new J0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new J0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function Sh(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class wM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Sh(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ns("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=vM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Sh();return new Promise((o,a)=>{const u=new Rx;u.setWithCredentials(!0),u.listenOnce(kx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Il.NO_ERROR:const h=u.getResponseJson();K(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Il.TIMEOUT:K(lt,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:const d=u.getStatus();if(K(lt,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const T=function(P){const w=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new z(T,g.message))}else a(new z(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{K(lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(lt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Sh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bx(),a=Dx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");K(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const d=o.createWebChannel(h,u);let p=!1,g=!1;const T=new _M({Io:P=>{g?K(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(K(lt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),K(lt,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},To:()=>d.close()}),I=(P,w,v)=>{P.listen(w,x=>{try{v(x)}catch(b){setTimeout(()=>{throw b},0)}})};return I(d,Js.EventType.OPEN,()=>{g||(K(lt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),I(d,Js.EventType.CLOSE,()=>{g||(g=!0,K(lt,`RPC '${e}' stream ${i} transport closed`),T.So())}),I(d,Js.EventType.ERROR,P=>{g||(g=!0,ns(lt,`RPC '${e}' stream ${i} transport errored:`,P),T.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),I(d,Js.EventType.MESSAGE,P=>{var w;if(!g){const v=P.data[0];ie(!!v);const x=v,b=x.error||((w=x[0])===null||w===void 0?void 0:w.error);if(b){K(lt,`RPC '${e}' stream ${i} received error:`,b);const M=b.status;let O=function(E){const S=De[E];if(S!==void 0)return a1(S)}(M),A=b.message;O===void 0&&(O=F.INTERNAL,A="Unknown error status: "+M+" with message "+b.message),g=!0,T.So(new z(O,A)),d.close()}else K(lt,`RPC '${e}' stream ${i} received:`,v),T.bo(v)}}),I(a,Vx.STAT_EVENT,P=>{P.stat===Hd.PROXY?K(lt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Hd.NOPROXY&&K(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){return new kN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hm(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(jn(n.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EM extends w1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=NN(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Nt(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Xd(u)?{documents:LN(s,u)}:{query:ON(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=c1(s,o.resumeToken);const c=ef(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=vu(s,o.snapshotVersion.toTimestamp());const c=ef(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=jN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nf(this.serializer),n.removeTarget=e,this.a_(n)}}class TM extends w1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=MN(e.writeResults,e.commitTime),r=Nt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p1(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,tf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,tf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{hi(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=X(u);c.L_.add(4),await pa(c),c.q_.set("Unknown"),c.L_.delete(4),await tc(c)}(this))})}),this.q_=new SM(r,i)}}async function tc(t){if(hi(t))for(const e of t.B_)await e(!0)}async function pa(t){for(const e of t.B_)await e(!1)}function E1(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mm(n)?pm(n):_s(n).r_()&&fm(n,e))}function dm(t,e){const n=X(t),r=_s(n);n.N_.delete(e),r.r_()&&T1(n,e),n.N_.size===0&&(r.r_()?r.o_():hi(n)&&n.q_.set("Unknown"))}function fm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_s(t).A_(e)}function T1(t,e){t.Q_.xe(e),_s(t).R_(e)}function pm(t){t.Q_=new IN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_s(t).start(),t.q_.v_()}function mm(t){return hi(t)&&!_s(t).n_()&&t.N_.size>0}function hi(t){return X(t).L_.size===0}function x1(t){t.Q_=void 0}async function IM(t){t.q_.set("Online")}async function PM(t){t.N_.forEach((e,n)=>{fm(t,e)})}async function CM(t,e){x1(t),mm(t)?(t.q_.M_(e),pm(t)):t.q_.set("Unknown")}async function RM(t,e,n){if(t.q_.set("Online"),e instanceof u1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wu(t,r)}else if(e instanceof Rl?t.Q_.Ke(e):e instanceof l1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await _1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),T1(s,u);const d=new rr(h.target,u,c,h.sequenceNumber);fm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await wu(t,r)}}async function wu(t,e,n){if(!ca(e))throw e;t.L_.add(1),await pa(t),t.q_.set("Offline"),n||(n=()=>_1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await tc(t)})}function S1(t,e){return e().catch(n=>wu(t,n,e))}async function nc(t){const e=X(t),n=Tr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kM(e);)try{const i=await fM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,VM(e,i)}catch(i){await wu(e,i)}A1(e)&&I1(e)}function kM(t){return hi(t)&&t.O_.length<10}function VM(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function A1(t){return hi(t)&&!Tr(t).n_()&&t.O_.length>0}function I1(t){Tr(t).start()}async function DM(t){Tr(t).p_()}async function bM(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function NM(t,e,n){const r=t.O_.shift(),i=sm.from(r,e,n);await S1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nc(t)}async function MM(t,e){e&&Tr(t).V_&&await async function(r,i){if(function(o){return o1(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();Tr(r).s_(),await S1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await nc(r)}}(t,e),A1(t)&&I1(t)}async function e_(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=hi(n);n.L_.add(3),await pa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await tc(n)}async function LM(t,e){const n=X(t);e?(n.L_.delete(2),await tc(n)):e||(n.L_.add(2),await pa(n),n.q_.set("Unknown"))}function _s(t){return t.K_||(t.K_=function(n,r,i){const s=X(n);return s.w_(),new EM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:IM.bind(null,t),Ro:PM.bind(null,t),mo:CM.bind(null,t),d_:RM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mm(t)?pm(t):t.q_.set("Unknown")):(await t.K_.stop(),x1(t))})),t.K_}function Tr(t){return t.U_||(t.U_=function(n,r,i){const s=X(n);return s.w_(),new TM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DM.bind(null,t),mo:MM.bind(null,t),f_:bM.bind(null,t),g_:NM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(t,e){if(jn("AsyncQueue",`${e}: ${t}`),ca(t))return new z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Zs(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.W_=new xe(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ls{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ls(e,n,Ki.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FM{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=n_(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}}function n_(){return new vs(t=>qx(t),Qu)}async function P1(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new OM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=ym(o,`Initialization of query '${yi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vm(n)}async function C1(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jM(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vm(n)}function UM(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function vm(t){t.Y_.forEach(e=>{e.next()})}var sf,r_;(r_=sf||(sf={})).ea="default",r_.Cache="cache";class R1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.key=e}}class V1{constructor(e){this.key=e}}class BM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=Hx(e),this.Ra=new Ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new t_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=Yu(this.query,d)?d:null,T=!!p&&this.mutatedKeys.has(p.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?T!==I&&(r.track({type:3,doc:g}),P=!0):this.ga(p,g)||(r.track({type:2,doc:g}),P=!0,(u&&this.Aa(g,u)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(g?(o=o.add(g),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,T){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return I(g)-I(T)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new ls(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new t_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new V1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new k1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $M{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zM{constructor(e){this.key=e,this.va=!1}}class WM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vs(a=>qx(a),Qu),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(q.comparator),this.Na=new Map,this.La=new lm,this.Ba={},this.ka=new Map,this.qa=as.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function KM(t,e,n=!0){const r=O1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await D1(r,e,n,!0),i}async function qM(t,e){const n=O1(t);await D1(n,e,!0,!1)}async function D1(t,e,n,r){const i=await pM(t.localStore,gn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await HM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&E1(t.remoteStore,i),a}async function HM(t,e,n,r,i){t.Ka=(d,p,g)=>async function(I,P,w,v){let x=P.view.ma(w);x.ns&&(x=await X0(I.localStore,P.query,!1).then(({documents:A})=>P.view.ma(A,x)));const b=v&&v.targetChanges.get(P.targetId),M=v&&v.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(x,I.isPrimaryClient,b,M);return s_(I,P.targetId,O.wa),O.snapshot}(t,d,p,g);const s=await X0(t.localStore,e,!0),o=new BM(e,s.Ts),a=o.ma(s.documents),u=fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);s_(t,n,c.wa);const h=new $M(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function GM(t,e,n){const r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Qu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dm(r.remoteStore,i.targetId),of(r,i.targetId)}).catch(ua)):(of(r,i.targetId),await rf(r.localStore,i.targetId,!0))}async function QM(t,e){const n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dm(n.remoteStore,r.targetId))}async function YM(t,e,n){const r=rL(t);try{const i=await function(o,a){const u=X(o),c=je.now(),h=a.reduce((g,T)=>g.add(T.key),ee());let d,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=Un(),I=ee();return u.cs.getEntries(g,h).next(P=>{T=P,T.forEach((w,v)=>{v.isValidDocument()||(I=I.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,T)).next(P=>{d=P;const w=[];for(const v of a){const x=wN(v,d.get(v.key).overlayedDocument);x!=null&&w.push(new Rr(v.key,x,Fx(x.value.mapValue),dt.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,w,a)}).next(P=>{p=P;const w=P.applyToLocalDocumentSet(d,I);return u.documentOverlayCache.saveOverlays(g,P.batchId,w)})}).then(()=>({batchId:p.batchId,changes:Qx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new xe(oe)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await ma(r,i.changes),await nc(r.remoteStore)}catch(i){const s=ym(i,"Failed to persist write");n.reject(s)}}async function b1(t,e){const n=X(t);try{const r=await hM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ie(o.va):i.removedDocuments.size>0&&(ie(o.va),o.va=!1))}),await ma(n,r,e)}catch(r){await ua(r)}}function i_(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=X(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&vm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XM(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new xe(q.comparator);o=o.insert(s,$e.newNoDocument(s,Y.min()));const a=ee().add(s),u=new Zu(Y.min(),new Map,new xe(oe),o,a);await b1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),_m(r)}else await rf(r.localStore,e,!1).then(()=>of(r,e,n)).catch(ua)}async function JM(t,e){const n=X(t),r=e.batch.batchId;try{const i=await cM(n.localStore,e);M1(n,r,null),N1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ma(n,i)}catch(i){await ua(i)}}async function ZM(t,e,n){const r=X(t);try{const i=await function(o,a){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(ie(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);M1(r,e,n),N1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ma(r,i)}catch(i){await ua(i)}}function N1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function M1(t,e,n){const r=X(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function of(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||L1(t,r)})}function L1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_m(t))}function s_(t,e,n){for(const r of n)r instanceof k1?(t.La.addReference(r.key,e),eL(t,r)):r instanceof V1?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||L1(t,r.key)):G()}function eL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),_m(t))}function _m(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(ce.fromString(e)),r=t.qa.next();t.Na.set(r,new zM(n)),t.Oa=t.Oa.insert(n,r),E1(t.remoteStore,new rr(gn(nm(n.path)),r,"TargetPurposeLimboResolution",Yp.oe))}}async function ma(t,e,n){const r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){i.push(c);const d=cm.Wi(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=X(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!ca(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),T=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(p,I)}}}(r.localStore,s))}async function tL(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await v1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new z(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ma(n,r.hs)}}function nL(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let i=ee();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function O1(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XM.bind(null,e),e.Ca.d_=jM.bind(null,e.eventManager),e.Ca.$a=UM.bind(null,e.eventManager),e}function rL(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZM.bind(null,e),e}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ec(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return uM(this.persistence,new aM,e.initialUser,this.serializer)}Ga(e){return new iM(um.Zr,this.serializer)}Wa(e){return new gM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>i_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tL.bind(null,this.syncEngine),await LM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FM}()}createDatastore(e){const n=ec(e.databaseInfo.databaseId),r=function(s){return new wM(s)}(e.databaseInfo);return function(s,o,a,u){return new xM(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new AM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>i_(this.syncEngine,n,0),function(){return Z0.D()?new Z0:new yM}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const d=new WM(i,s,o,a,u,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await pa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}af.provider={build:()=>new af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=X(i),a={documents:s.map(d=>_u(o.serializer,d))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,ce.emptyPath(),a,s.length),c=new Map;u.forEach(d=>{const p=bN(o.serializer,d);c.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=c.get(d.toString());ie(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new im(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=q.fromPath(r);this.mutations.push(new s1(i,this.precondition(i)))}),await async function(r,i){const s=X(r),o={writes:i.map(a=>p1(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=Y.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Y.min())?dt.exists(!1):dt.updateTime(n):dt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Y.min()))throw new z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dt.updateTime(n)}return dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new hm(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new iL(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!ha(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!o1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ym(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ih(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await v1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aL(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>e_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>e_(e.remoteStore,i)),t._onlineComponents=e}async function aL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ih(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ns("Error using user provided cache. Falling back to memory cache: "+n),await Ih(t,new Eu)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Ih(t,new Eu);return t._offlineComponents}async function wm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await o_(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await o_(t,new af))),t._onlineComponents}function lL(t){return wm(t).then(e=>e.syncEngine)}function uL(t){return wm(t).then(e=>e.datastore)}async function lf(t){const e=await wm(t),n=e.eventManager;return n.onListen=KM.bind(null,e.syncEngine),n.onUnlisten=GM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QM.bind(null,e.syncEngine),n}function cL(t,e,n={}){const r=new Dn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new F1({next:p=>{h.Za(),o.enqueueAndForget(()=>C1(s,d)),p.fromCache&&u.source==="server"?c.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new R1(a,h,{includeMetadataChanges:!0,_a:!0});return P1(s,d)}(await lf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e,n){if(!n)throw new z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hL(t,e,n,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l_(t){if(!q.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u_(t){if(q.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rc(t);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rb;switch(r.type){case"firstParty":return new bb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=a_.get(n);r&&(K("ComponentProvider","Removing Datastore"),a_.delete(n),r.terminate())}(this),Promise.resolve()}}function dL(t,e,n,r={}){var i;const s=(t=qt(t,ic))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ct.MOCK_USER;else{a=lD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(c)}t._authCredentials=new kb(new Nx(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}}class mr extends kr{constructor(e,n,r){super(e,n,nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new q(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function uf(t,e,...n){if(t=Qt(t),U1("collection","path",e),t instanceof ic){const r=ce.fromString(e,...n);return u_(r),new mr(t,null,r)}{if(!(t instanceof pt||t instanceof mr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return u_(r),new mr(t.firestore,null,r)}}function Je(t,e,...n){if(t=Qt(t),arguments.length===1&&(e=Mx.newId()),U1("doc","path",e),t instanceof ic){const r=ce.fromString(e,...n);return l_(r),new pt(t,null,new q(r))}{if(!(t instanceof pt||t instanceof mr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return l_(r),new pt(t.firestore,t instanceof mr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hm(this,"async_queue_retry"),this.Vu=()=>{const r=Ah();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ca(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function d_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xr extends ic{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new h_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,await e}}}function fL(t,e){const n=typeof t=="object"?t:yb(),r=typeof t=="string"?t:"(default)",i=fb(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oD("firestore");s&&dL(i,...s)}return i}function sc(t){if(t._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pL(t),t._firestoreClient}function pL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new qb(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,j1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(nt.fromBase64String(e))}catch(n){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new si(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=/^__.*__$/;class gL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new da(e,this.data,n,this.fieldTransforms)}}class B1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class oc{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new oc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Tu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($1(this.Cu)&&mL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ec(e)}Qu(e,n,r,i=!1){return new oc({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function va(t){const e=t._freezeSettings(),n=ec(t._databaseId);return new yL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xm(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Im("Data must be an object, but it was:",o,r);const a=K1(r,o);let u,c;if(s.merge)u=new Vt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=cf(e,d,n);if(!o.contains(p))throw new z(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);H1(h,p)||h.push(p)}u=new Vt(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new gL(new _t(a),u,c)}class ac extends ya{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ac}}function vL(t,e,n){return new oc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sm extends ya{_toFieldTransform(e){return new n1(e.path,new Xo)}isEqual(e){return e instanceof Sm}}class Am extends ya{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=vL(this,e,!0),r=this.Ku.map(s=>ws(s,n)),i=new os(r);return new n1(e.path,i)}isEqual(e){return e instanceof Am&&du(this.Ku,e.Ku)}}function z1(t,e,n,r){const i=t.Qu(1,e,n);Im("Data must be an object, but it was:",i,r);const s=[],o=_t.empty();ci(r,(u,c)=>{const h=Pm(e,u,n);c=Qt(c);const d=i.Nu(h);if(c instanceof ac)s.push(h);else{const p=ws(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Vt(s);return new B1(o,a,i.fieldTransforms)}function W1(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[cf(e,r,n)],u=[i];if(s.length%2!=0)throw new z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(cf(e,s[p])),u.push(s[p+1]);const c=[],h=_t.empty();for(let p=a.length-1;p>=0;--p)if(!H1(c,a[p])){const g=a[p];let T=u[p];T=Qt(T);const I=o.Nu(g);if(T instanceof ac)c.push(g);else{const P=ws(T,I);P!=null&&(c.push(g),h.set(g,P))}}const d=new Vt(c);return new B1(h,d,o.fieldTransforms)}function _L(t,e,n,r=!1){return ws(n,t.Qu(r?4:3,e))}function ws(t,e){if(q1(t=Qt(t)))return Im("Unsupported field value:",e,t),K1(t,e);if(t instanceof ya)return function(r,i){if(!$1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ws(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=je.fromDate(r);return{timestampValue:vu(i.serializer,s)}}if(r instanceof je){const s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vu(i.serializer,s)}}if(r instanceof Em)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof si)return{bytesValue:c1(i.serializer,r._byteString)};if(r instanceof pt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:am(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return rm(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rc(r)}`)}(t,e)}function K1(t,e){const n={};return Lx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,i)=>{const s=ws(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function q1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Em||t instanceof si||t instanceof pt||t instanceof ya||t instanceof Tm)}function Im(t,e,n){if(!q1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function cf(t,e,n){if((e=Qt(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Pm(t,e);throw Tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const wL=new RegExp("[~\\*/\\[\\]]");function Pm(t,e,n){if(e.search(wL)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new z(F.INVALID_ARGUMENT,a+t+u)}function H1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EL extends xu{data(){return super.data()}}function Cm(t,e){return typeof e=="string"?Pm(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rm{}class Q1 extends Rm{}function Y1(t,e,...n){let r=[];e instanceof Rm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Vm).length,a=s.filter(u=>u instanceof km).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class km extends Q1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new km(e,n,r)}_apply(e){const n=this._parse(e);return J1(e._query,n),new kr(e.firestore,e.converter,Jd(e._query,n))}_parse(e){const n=va(e.firestore);return function(s,o,a,u,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){p_(d,h);const g=[];for(const T of d)g.push(f_(u,s,T));p={arrayValue:{values:g}}}else p=f_(u,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||p_(d,h),p=_L(a,o,d,h==="in"||h==="not-in");return Ne.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vm extends Rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)J1(o,u),o=Jd(o,u)}(e._query,n),new kr(e.firestore,e.converter,Jd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dm extends Q1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yo(s,o)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ys(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function X1(t,e="asc"){const n=e,r=Cm("orderBy",t);return Dm._create(r,n)}function f_(t,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kx(e)&&n.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!q.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N0(t,new q(r))}if(n instanceof pt)return N0(t,n._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rc(n)}.`)}function p_(t,e){if(!Array.isArray(t)||t.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Z1{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ci(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Re(o.doubleValue));return new Tm(s)}convertGeoPoint(e){return new Em(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ho(e));default:return null}}convertTimestamp(e){const n=Er(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);ie(y1(r));const i=new Go(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class TL extends Z1{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nm extends xu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kl extends Nm{data(e={}){return super.data(e)}}class eS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kl(this._firestore,this._userDataWriter,r.key,r,new Oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new kl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new kl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:xL(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class lc extends Z1{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function SL(t){t=qt(t,kr);const e=qt(t.firestore,xr),n=sc(e),r=new lc(e);return G1(t._query),cL(n,t._query).then(i=>new eS(e,r,t,i))}function AL(t,e,n){t=qt(t,pt);const r=qt(t.firestore,xr),i=bm(t.converter,e,n);return Lm(r,[xm(va(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dt.none())])}function nn(t,e,n,...r){t=qt(t,pt);const i=qt(t.firestore,xr),s=va(i);let o;return o=typeof(e=Qt(e))=="string"||e instanceof ga?W1(s,"updateDoc",t._key,e,n,r):z1(s,"updateDoc",t._key,e),Lm(i,[o.toMutation(t._key,dt.exists(!0))])}function IL(t,e){const n=qt(t.firestore,xr),r=Je(t),i=bm(t.converter,e);return Lm(n,[xm(va(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dt.exists(!1))]).then(()=>r)}function Mm(t,...e){var n,r,i;t=Qt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||d_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(d_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,h;if(t instanceof pt)c=qt(t.firestore,xr),h=nm(t._key.path),u={next:d=>{e[o]&&e[o](PL(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=qt(t,kr);c=qt(d.firestore,xr),h=d._query;const p=new lc(c);u={next:g=>{e[o]&&e[o](new eS(c,p,d,g))},error:e[o+1],complete:e[o+2]},G1(t._query)}return function(p,g,T,I){const P=new F1(I),w=new R1(g,P,T);return p.asyncQueue.enqueueAndForget(async()=>P1(await lf(p),w)),()=>{P.Za(),p.asyncQueue.enqueueAndForget(async()=>C1(await lf(p),w))}}(sc(c),h,a,u)}function Lm(t,e){return function(r,i){const s=new Dn;return r.asyncQueue.enqueueAndForget(async()=>YM(await lL(r),i,s)),s.promise}(sc(t),e)}function PL(t,e,n){const r=n.docs.get(e._key),i=new lc(t);return new Nm(t,i,e._key,r,new Oi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL={maxAttempts:5};function Ws(t,e){if((t=Qt(t)).firestore!==e)throw new z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=va(n)}get(n){const r=Ws(n,this._firestore),i=new TL(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return G();const o=s[0];if(o.isFoundDocument())return new xu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new xu(this._firestore,i,r._key,null,r.converter);throw G()})}set(n,r,i){const s=Ws(n,this._firestore),o=bm(s.converter,r,i),a=xm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ws(n,this._firestore);let a;return a=typeof(r=Qt(r))=="string"||r instanceof ga?W1(this._dataReader,"Transaction.update",o._key,r,i,s):z1(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ws(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ws(e,this._firestore),r=new lc(this._firestore);return super.get(e).then(i=>new Nm(this._firestore,r,n._key,i._document,new Oi(!1,!1),n.converter))}}function tS(t,e,n){t=qt(t,xr);const r=Object.assign(Object.assign({},CL),n);return function(s){if(s.maxAttempts<1)throw new z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Dn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await uL(s);new sL(s.asyncQueue,c,a,o,u).au()}),u.promise}(sc(t),i=>e(new RL(t,i)),r)}function kL(){return new Sm("serverTimestamp")}function VL(...t){return new Am("arrayUnion",t)}(function(e,n=!0){(function(i){gs=i})(gb),pu(new Wo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xr(new Vb(r.getProvider("auth-internal")),new Mb(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wi(R0,"4.7.3",e),Wi(R0,"4.7.3","esm2017")})();const DL={apiKey:"AIzaSyDoq9jN6Oc8cTKMHRP70HweRA3R1DkIBhY",authDomain:"news-unpacked-v1.firebaseapp.com",projectId:"news-unpacked-v1",storageBucket:"news-unpacked-v1.firebasestorage.app",messagingSenderId:"763044458416",appId:"1:763044458416:web:c45737e3b71bfc8514f075"},bL=Ax(DL),Ve=fL(bL),NL=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},ML=async t=>{const e=NL(),n=Je(Ve,"rooms",e),r={id:crypto.randomUUID(),name:t,isHost:!0},i={id:e,status:"lobby",players:[r],topics:[],createdAt:Date.now(),settings:{discussionTime:1800,maxTopicsPerPlayer:5}};try{return await AL(n,i),{roomId:e,player:r}}catch(s){throw console.error("Error creating room:",s),s}},LL=async(t,e)=>{const n=Je(Ve,"rooms",t),i={id:crypto.randomUUID(),name:e,isHost:!1};return await tS(Ve,async s=>{const o=await s.get(n);if(!o.exists())throw new Error("");const u=[...o.data().players,i];s.update(n,{players:u})}),{player:i}},nS=async(t,e)=>{const n=Je(Ve,"rooms",t);await nn(n,{topics:VL(e)})},rS=async t=>{const e=Je(Ve,"rooms",t);await nn(e,{status:"preparation"})},iS=async(t,e)=>{const n=Je(Ve,"rooms",t);await tS(Ve,async r=>{const i=await r.get(n);if(!i.exists())return;const o=i.data().players.filter(a=>a.id!==e);r.update(n,{players:o})})},m_=Object.freeze(Object.defineProperty({__proto__:null,addTopic:nS,createRoom:ML,joinRoom:LL,leaveRoom:iS,startGame:rS},Symbol.toStringTag,{value:"Module"})),Vl=[{id:"basic",label:"",description:"",topics:["","","NISAiDeCo","","","","","DX","SDGs17","","AILLM","","","","","","GDP","","","","","","","","","","NISANISA","","5G","","","","","","","NATO","","G7G20","","","","","","","","","","BMI","","","","","Wi-Fi5G","IP","CookieWeb","OS","QR","PDCA","","","","","SDGs","IoT","","","M&A","","","","","","","","","","","","","","","",""]},{id:"discussion",label:"",description:"",topics:["","3","AI","","","2000","","","","","","24","","SNS","","","","","","","IR","","","","","","","","","1816","","","","","","","","","",""]},{id:"politics",label:"",description:"",topics:["","","","","","","","LGBT","","9","","","","","","","","","",""]},{id:"philosophy",label:"",description:"",topics:["","","","SDGs","","","","4","ChatGPTAI","","","","","","","","","","","","","","","","","100","","","",""]}],g_=(t=["basic","discussion","politics","philosophy"])=>{const n=Vl.filter(i=>t.includes(i.id)).flatMap(i=>i.topics);if(n.length===0)return"";const r=Math.floor(Math.random()*n.length);return n[r]},OL=({roomId:t,players:e,isHost:n,settings:r})=>{const i=async(a,u)=>{n&&await nn(Je(Ve,"rooms",t),{[`settings.${a}`]:u})},s=a=>{if(!n)return;const u=(r==null?void 0:r.gachaCategories)||Vl.map(h=>h.id);let c;if(u.includes(a)){if(u.length<=1)return;c=u.filter(h=>h!==a)}else c=[...u,a];i("gachaCategories",c)},o=async()=>{try{await rS(t)}catch(a){console.error(a),alert("")}};return R.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] w-full max-w-2xl mx-auto text-white",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[R.jsx(wC,{to:"/",className:"w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full transition text-gray-300 hover:text-white",title:"",children:""}),R.jsxs("h2",{className:"text-3xl font-bold",children:["ID: ",t]})]}),R.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-8 w-full shadow-2xl border border-white/10 mb-6",children:[R.jsx("h3",{className:"text-xl text-gray-200 mb-4 border-b border-gray-600 pb-2",children:""}),R.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"  ()"}),n?R.jsx("input",{type:"number",value:(r==null?void 0:r.discussionTime)||60,onChange:a=>i("discussionTime",Number(a.target.value)),className:"w-full bg-black/20 border border-gray-600 rounded px-3 py-2 text-white"}):R.jsxs("div",{className:"text-xl font-bold",children:[(r==null?void 0:r.discussionTime)||60," "]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:" 1"}),n?R.jsx("input",{type:"number",value:(r==null?void 0:r.maxTopicsPerPlayer)||3,onChange:a=>i("maxTopicsPerPlayer",Number(a.target.value)),className:"w-full bg-black/20 border border-gray-600 rounded px-3 py-2 text-white"}):R.jsxs("div",{className:"text-xl font-bold",children:[(r==null?void 0:r.maxTopicsPerPlayer)||3," "]})]})]}),R.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[R.jsx("label",{className:"block text-sm text-gray-400 mb-3",children:" "}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Vl.map(a=>{const c=((r==null?void 0:r.gachaCategories)||Vl.map(h=>h.id)).includes(a.id);return R.jsxs("div",{onClick:()=>s(a.id),className:`
                                        p-3 rounded-lg border transition-all cursor-pointer flex flex-col gap-1
                                        ${c?"bg-indigo-600/20 border-indigo-400 text-white":"bg-black/20 border-gray-700 text-gray-500 hover:bg-gray-700/50"}
                                        ${n?"":"pointer-events-none"}
                                    `,children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx("span",{className:"font-bold text-sm",children:a.label}),c&&R.jsx("span",{className:"text-indigo-400",children:""})]}),R.jsx("span",{className:"text-xs opacity-70",children:a.description})]},a.id)})})]})]}),R.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-8 w-full shadow-2xl border border-white/10",children:[R.jsxs("h3",{className:"text-xl text-gray-200 mb-4 border-b border-gray-600 pb-2",children:[" (",e.length,"/6)"]}),R.jsx("ul",{className:"space-y-3",children:e.map(a=>R.jsxs("li",{className:"flex items-center justify-between bg-black/20 p-3 rounded-lg",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:`w-3 h-3 rounded-full ${a.isHost?"bg-yellow-400 shadow-[0_0_10px_rgba(250,204,21,0.5)]":"bg-green-400"}`}),R.jsx("span",{className:"font-medium text-lg",children:a.name})]}),a.isHost&&R.jsx("span",{className:"text-xs font-bold bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded",children:""})]},a.id))}),n?R.jsx("button",{onClick:o,className:"w-full mt-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold text-lg rounded-lg shadow-lg transform transition hover:scale-[1.02]",children:""}):R.jsx("div",{className:"mt-8 text-center text-gray-400 animate-pulse",children:"..."})]})]})};let FL={data:""},jL=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||FL},UL=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,BL=/\/\*[^]*?\*\/|  +/g,y_=/\n+/g,Zn=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Zn(o,s):s+"{"+Zn(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Zn(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Zn.p?Zn.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Sn={},sS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+sS(t[n]);return e}return t},$L=(t,e,n,r,i)=>{let s=sS(t),o=Sn[s]||(Sn[s]=(u=>{let c=0,h=11;for(;c<u.length;)h=101*h+u.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Sn[o]){let u=s!==t?t:(c=>{let h,d,p=[{}];for(;h=UL.exec(c.replace(BL,""));)h[4]?p.shift():h[3]?(d=h[3].replace(y_," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(y_," ").trim();return p[0]})(t);Sn[o]=Zn(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&Sn.g?Sn.g:null;return n&&(Sn.g=Sn[o]),((u,c,h,d)=>{d?c.data=c.data.replace(d,u):c.data.indexOf(u)===-1&&(c.data=h?u+c.data:c.data+u)})(Sn[o],e,r,a),o},zL=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":Zn(a,""):a===!1?"":a}return r+i+(o??"")},"");function uc(t){let e=this||{},n=t.call?t(e.p):t;return $L(n.unshift?n.raw?zL(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,jL(e.target),e.g,e.o,e.k)}let oS,hf,df;uc.bind({g:1});let Bn=uc.bind({k:1});function WL(t,e,n,r){Zn.p=e,oS=t,hf=n,df=r}function Vr(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:hf&&hf()},a),n.o=/ *go\d+/.test(u),a.className=uc.apply(n,r)+(u?" "+u:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),df&&c[0]&&df(a),oS(c,a)}return i}}var KL=t=>typeof t=="function",Su=(t,e)=>KL(t)?t(e):t,qL=(()=>{let t=0;return()=>(++t).toString()})(),aS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),HL=20,Om="default",lS=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return lS(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Dl=[],uS={toasts:[],pausedAt:void 0,settings:{toastLimit:HL}},hn={},cS=(t,e=Om)=>{hn[e]=lS(hn[e]||uS,t),Dl.forEach(([n,r])=>{n===e&&r(hn[e])})},hS=t=>Object.keys(hn).forEach(e=>cS(t,e)),GL=t=>Object.keys(hn).find(e=>hn[e].toasts.some(n=>n.id===t)),cc=(t=Om)=>e=>{cS(e,t)},QL={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},YL=(t={},e=Om)=>{let[n,r]=V.useState(hn[e]||uS),i=V.useRef(hn[e]);V.useEffect(()=>(i.current!==hn[e]&&r(hn[e]),Dl.push([e,r]),()=>{let o=Dl.findIndex(([a])=>a===e);o>-1&&Dl.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,u,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||QL[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},XL=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||qL()}),_a=t=>(e,n)=>{let r=XL(e,t,n);return cc(r.toasterId||GL(r.id))({type:2,toast:r}),r.id},Oe=(t,e)=>_a("blank")(t,e);Oe.error=_a("error");Oe.success=_a("success");Oe.loading=_a("loading");Oe.custom=_a("custom");Oe.dismiss=(t,e)=>{let n={type:3,toastId:t};e?cc(e)(n):hS(n)};Oe.dismissAll=t=>Oe.dismiss(void 0,t);Oe.remove=(t,e)=>{let n={type:4,toastId:t};e?cc(e)(n):hS(n)};Oe.removeAll=t=>Oe.remove(void 0,t);Oe.promise=(t,e,n)=>{let r=Oe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Su(e.success,i):void 0;return s?Oe.success(s,{id:r,...n,...n==null?void 0:n.success}):Oe.dismiss(r),i}).catch(i=>{let s=e.error?Su(e.error,i):void 0;s?Oe.error(s,{id:r,...n,...n==null?void 0:n.error}):Oe.dismiss(r)}),t};var JL=1e3,ZL=(t,e="default")=>{let{toasts:n,pausedAt:r}=YL(t,e),i=V.useRef(new Map).current,s=V.useCallback((d,p=JL)=>{if(i.has(d))return;let g=setTimeout(()=>{i.delete(d),o({type:4,toastId:d})},p);i.set(d,g)},[]);V.useEffect(()=>{if(r)return;let d=Date.now(),p=n.map(g=>{if(g.duration===1/0)return;let T=(g.duration||0)+g.pauseDuration-(d-g.createdAt);if(T<0){g.visible&&Oe.dismiss(g.id);return}return setTimeout(()=>Oe.dismiss(g.id,e),T)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[n,r,e]);let o=V.useCallback(cc(e),[e]),a=V.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=V.useCallback((d,p)=>{o({type:1,toast:{id:d,height:p}})},[o]),c=V.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=V.useCallback((d,p)=>{let{reverseOrder:g=!1,gutter:T=8,defaultPosition:I}=p||{},P=n.filter(x=>(x.position||I)===(d.position||I)&&x.height),w=P.findIndex(x=>x.id===d.id),v=P.filter((x,b)=>b<w&&x.visible).length;return P.filter(x=>x.visible).slice(...g?[v+1]:[0,v]).reduce((x,b)=>x+(b.height||0)+T,0)},[n]);return V.useEffect(()=>{n.forEach(d=>{if(d.dismissed)s(d.id,d.removeDelay);else{let p=i.get(d.id);p&&(clearTimeout(p),i.delete(d.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:u,startPause:a,endPause:c,calculateOffset:h}}},e4=Bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,t4=Bn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,n4=Bn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,r4=Vr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${e4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${t4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${n4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,i4=Bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,s4=Vr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${i4} 1s linear infinite;
`,o4=Bn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,a4=Bn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,l4=Vr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${o4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${a4} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,u4=Vr("div")`
  position: absolute;
`,c4=Vr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,h4=Bn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,d4=Vr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${h4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,f4=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?V.createElement(d4,null,e):e:n==="blank"?null:V.createElement(c4,null,V.createElement(s4,{...r}),n!=="loading"&&V.createElement(u4,null,n==="error"?V.createElement(r4,{...r}):V.createElement(l4,{...r})))},p4=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,m4=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,g4="0%{opacity:0;} 100%{opacity:1;}",y4="0%{opacity:1;} 100%{opacity:0;}",v4=Vr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_4=Vr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,w4=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=aS()?[g4,y4]:[p4(n),m4(n)];return{animation:e?`${Bn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bn(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},E4=V.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?w4(t.position||e||"top-center",t.visible):{opacity:0},s=V.createElement(f4,{toast:t}),o=V.createElement(_4,{...t.ariaProps},Su(t.message,t));return V.createElement(v4,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):V.createElement(V.Fragment,null,s,o))});WL(V.createElement);var T4=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=V.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return V.createElement("div",{ref:s,className:e,style:n},i)},x4=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:aS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},S4=uc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ul=16,A4=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:u,handlers:c}=ZL(n,s);return V.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:ul,left:ul,right:ul,bottom:ul,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(h=>{let d=h.position||e,p=c.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),g=x4(d,p);return V.createElement(T4,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?S4:"",style:g},h.type==="custom"?Su(h.message,h):i?i(h):V.createElement(E4,{toast:h,position:d}))}))},Ph=Oe;let cl;const I4=new Uint8Array(16);function P4(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(I4)}const qe=[];for(let t=0;t<256;++t)qe.push((t+256).toString(16).slice(1));function C4(t,e=0){return qe[t[e+0]]+qe[t[e+1]]+qe[t[e+2]]+qe[t[e+3]]+"-"+qe[t[e+4]]+qe[t[e+5]]+"-"+qe[t[e+6]]+qe[t[e+7]]+"-"+qe[t[e+8]]+qe[t[e+9]]+"-"+qe[t[e+10]]+qe[t[e+11]]+qe[t[e+12]]+qe[t[e+13]]+qe[t[e+14]]+qe[t[e+15]]}const R4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v_={randomUUID:R4};function Ch(t,e,n){if(v_.randomUUID&&!t)return v_.randomUUID();t=t||{};const r=t.random||(t.rng||P4)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,C4(r)}const k4=({room:t,currentPlayerId:e})=>{var A,y;const n=((A=t.settings)==null?void 0:A.maxTopicsPerPlayer)||3,[r,i]=V.useState(Array(n).fill("")),[s,o]=V.useState({}),[a,u]=V.useState(!1),c=t.topics.some(E=>E.authorId===e),h=async()=>{const E=[...t.topics];for(let S=E.length-1;S>0;S--){const k=Math.floor(Math.random()*(S+1));[E[S],E[k]]=[E[k],E[S]]}await nn(Je(Ve,"rooms",t.id),{status:"selection",topics:E})},d=(E,S)=>{const k=[...r];if(k[E]=S,i(k),s[E]){const D={...s};delete D[E],o(D)}},p=E=>{var S;d(E,g_((S=t.settings)==null?void 0:S.gachaCategories))},g=()=>{const E=[...r];E.forEach((S,k)=>{var D;S.trim()||(E[k]=g_((D=t.settings)==null?void 0:D.gachaCategories))}),i(E)},[T,I]=V.useState(null),P=E=>{if(!s[E]){const S=r[E];if(!S.trim())return;const k=S.split("").map(D=>({id:Ch(),text:D,isHidden:!1}));o(D=>({...D,[E]:k}))}I(E)},w=E=>{T!==null&&o(S=>({...S,[T]:S[T].map(k=>k.id===E?{...k,isHidden:!k.isHidden}:k)}))},v=async()=>{if(r.some(E=>!E.trim())){Ph.error("",{icon:""});return}u(!0);try{const E=r.map(async(S,k)=>{let D=s[k];D||(D=S.split("").map(jt=>({id:Ch(),text:jt,isHidden:!1})));const C=[];D&&D.forEach((jt,zn)=>{jt.isHidden&&C.push(zn)});const We={id:Ch(),authorId:e,originalText:S,maskIndices:C,isRevealed:!1};return nS(t.id,We)});await Promise.all(E),Ph.success("")}catch(E){console.error(E),Ph.error(""),u(!1)}},x=(y=t.players.find(E=>E.id===e))==null?void 0:y.isHost,b=new Set(t.topics.map(E=>E.authorId)).size,M=t.players.length,O=b===M;return c?R.jsxs("div",{className:"w-full max-w-2xl mx-auto p-6 text-center text-white",children:[R.jsx("h2",{className:"text-3xl font-bold mb-6",children:""}),R.jsxs("div",{className:"flex flex-col items-center gap-4 mb-8",children:[R.jsx("p",{className:"text-xl",children:"..."}),R.jsxs("div",{className:"text-4xl font-mono font-bold bg-white/10 px-6 py-3 rounded-lg backdrop-blur-sm border border-white/20",children:[R.jsx("span",{className:O?"text-green-400":"text-yellow-400",children:b}),R.jsx("span",{className:"text-gray-400 mx-2",children:"/"}),R.jsx("span",{children:M})]}),!O&&R.jsx("div",{className:"animate-pulse text-2xl mt-2",children:""})]}),x&&R.jsxs("div",{className:"bg-white/10 p-6 rounded-xl mt-8 transition-all duration-300",children:[R.jsx("p",{className:"mb-4 text-gray-300",children:O?"":""}),R.jsx("button",{onClick:h,disabled:!O,className:`
                                font-bold py-4 px-8 rounded-full shadow-lg transition transform
                                ${O?"bg-red-600 hover:bg-red-500 hover:scale-105 text-white cursor-pointer":"bg-gray-600 text-gray-400 cursor-not-allowed grayscale"}
                            `,children:""})]})]}):R.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6 text-white pb-10",children:[R.jsx("h2",{className:"text-3xl font-bold mb-2 text-center",children:""}),R.jsx("p",{className:"text-gray-300 text-center mb-8",children:""}),R.jsx("div",{className:"space-y-6",children:r.map((E,S)=>R.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4 border border-white/10",children:[R.jsxs("div",{className:"flex justify-between items-center mb-2",children:[R.jsxs("span",{className:"font-bold text-indigo-300",children:["Topic #",S+1]}),R.jsx("button",{onClick:()=>p(S),className:"text-xs bg-purple-500/30 text-purple-200 px-3 py-1 rounded-full hover:bg-purple-500/50 transition border border-purple-500/30",children:" "})]}),R.jsxs("div",{className:"flex gap-4",children:[R.jsx("input",{type:"text",value:E,onChange:k=>d(S,k.target.value),className:"flex-1 bg-black/20 border border-gray-600 rounded px-4 py-3 text-white focus:border-indigo-500 outline-none transition",placeholder:S===0?": ":""}),R.jsx("button",{onClick:()=>P(S),disabled:!E.trim(),className:`px-2 md:px-4 py-2 rounded font-bold transition text-xs md:text-base
                                    ${s[S]?"bg-green-600 text-white border border-green-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
                                `,children:s[S]?"":""})]})]},S))}),R.jsxs("div",{className:"mt-8 flex gap-4 justify-center",children:[R.jsx("button",{onClick:g,className:"bg-gray-700 hover:bg-gray-600 text-gray-200 py-3 px-6 rounded-lg font-bold transition",children:""}),R.jsx("button",{onClick:v,disabled:a,className:"bg-indigo-600 hover:bg-indigo-500 text-white py-3 px-10 rounded-lg font-bold shadow-lg transition transform hover:scale-105 disabled:opacity-50",children:""})]}),T!==null&&s[T]&&R.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:R.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-2xl p-6 md:p-8 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[R.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-4 text-center",children:""}),R.jsx("p",{className:"text-center text-gray-400 mb-6 md:mb-8 text-sm md:text-base",children:""}),R.jsx("div",{className:"flex flex-wrap gap-1 justify-center text-2xl md:text-3xl font-bold leading-relaxed mb-6 md:mb-8 bg-black/30 p-4 md:p-8 rounded-xl min-h-[100px] md:min-h-[150px] items-center",children:s[T].map(E=>R.jsx("span",{onClick:()=>w(E.id),className:`cursor-pointer transition-all duration-200 select-none px-1 rounded mx-0.5 border ${E.isHidden?"bg-gray-700 text-transparent min-w-[1em] border-gray-500":"hover:bg-indigo-900 bg-gray-900 border-transparent text-white"}`,children:E.text},E.id))}),R.jsx("button",{onClick:()=>I(null),className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 md:py-4 rounded-xl transition sticky bottom-0 shadow-lg",children:""})]})})]})},V4=({topic:t,onClick:e,disabled:n,isSelected:r,isFinished:i,authorName:s,topicIndex:o})=>R.jsxs(Ye.div,{layoutId:`card-${t.id}`,onClick:n?void 0:e,className:`
                relative p-4 rounded-xl border backdrop-blur-sm transition-all duration-300 flex flex-col gap-3 min-h-[180px]
                ${i?"bg-zinc-900/95 border-zinc-800 shadow-inner":"bg-indigo-900/30 border-indigo-500/30 hover:bg-indigo-800/40 hover:border-indigo-400/60 hover:shadow-lg hover:shadow-indigo-500/20"} // Active: Indigo tint
                ${n?"cursor-default":"cursor-pointer"}
                ${r?"ring-4 ring-yellow-400 scale-[1.02] z-10":""}
            `,children:[i&&R.jsx("div",{className:"absolute top-2 right-2 text-green-400 font-extrabold border border-green-500/80 rounded-full px-3 py-1 text-xs bg-green-950/90 shadow-lg tracking-wider z-20",children:""}),R.jsx("div",{className:`text-xs uppercase tracking-wider font-bold ${i?"text-gray-500":"text-indigo-300"}`,children:i&&s?`#${o} by ${s}`:`Topic #${o}`}),R.jsx("div",{className:`flex-1 text-lg font-bold leading-relaxed break-words ${i?"text-gray-400":"text-white"}`,children:i||t.isRevealed?R.jsx("span",{children:t.originalText}):t.originalText.split("").map((a,u)=>R.jsx("span",{className:t.maskIndices.includes(u)?"text-indigo-400 bg-indigo-900/30 rounded px-0.5 mx-0.5":"",children:t.maskIndices.includes(u)?"?":a},u))})]}),D4=({roomId:t})=>{const[e,n]=V.useState([]),r=yf.useRef(null);return V.useEffect(()=>{const i=Mm(Je(Ve,"rooms",t),s=>{if(!s.exists())return;const o=s.data();if(o.latestReaction){const{emoji:a,timestamp:u,id:c}=o.latestReaction,h=c||String(u);if(r.current===h||Date.now()-u>5e3)return;r.current=h,n(d=>d.find(p=>p.id===h)?d:[...d,{id:h,emoji:a,x:(Math.random()-.5)*40}])}});return()=>i()},[t]),V.useEffect(()=>{const i=setInterval(()=>{n(s=>s.filter(o=>Date.now()-(Number(o.id)||0)<3e3))},1e3);return()=>clearInterval(i)},[]),R.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-50",children:R.jsx(gp,{children:e.map(i=>R.jsx(Ye.div,{initial:{y:"0%",opacity:1,x:`${i.x}vw`,scale:.5},animate:{y:"-50vh",opacity:0,scale:1.5},exit:{opacity:0},transition:{duration:2.5,ease:"easeOut"},className:"absolute bottom-20 left-1/2 text-6xl transform -translate-x-1/2",style:{marginLeft:`${i.x}vw`},children:i.emoji},i.id))})})},b4=async(t,e)=>{await nn(Je(Ve,"rooms",t),{latestReaction:{emoji:e,timestamp:Date.now(),id:Math.random().toString()}})},N4=({roomId:t,topicId:e,playerName:n})=>{const[r,i]=V.useState([]),[s,o]=V.useState(""),a=V.useRef(null);V.useEffect(()=>{const c=uf(Ve,"rooms",t,"messages"),h=Y1(c,X1("createdAt","asc")),d=Mm(h,p=>{const g=[];p.forEach(I=>{var w;const P=I.data();g.push({id:I.id,topicId:P.topicId,text:P.text,authorName:P.authorName,createdAt:((w=P.createdAt)==null?void 0:w.toMillis())||Date.now()})});const T=g.filter(I=>e?I.topicId===e:!I.topicId);i(T)});return()=>d()},[t,e]),V.useEffect(()=>{var c;(c=a.current)==null||c.scrollIntoView({behavior:"smooth"})},[r]);const u=async c=>{if(c.preventDefault(),!!s.trim())try{await IL(uf(Ve,"rooms",t,"messages"),{topicId:e,text:s.trim(),authorName:n,createdAt:kL()}),o("")}catch(h){console.error("Error sending message:",h)}};return R.jsxs("div",{className:"flex flex-col h-full bg-black/40 backdrop-blur-md rounded-xl border border-white/10 overflow-hidden shadow-xl",children:[R.jsxs("div",{className:"p-3 bg-white/5 border-b border-white/10 flex justify-between items-center",children:[R.jsx("span",{className:"font-bold text-gray-200 text-sm",children:e?" ":" "}),R.jsxs("span",{className:"text-xs text-gray-400",children:[r.length," "]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[r.length===0&&R.jsx("div",{className:"text-center text-gray-500 text-sm mt-4",children:""}),r.map(c=>{const h=c.authorName===n;return R.jsxs(Ye.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex flex-col ${h?"items-end":"items-start"}`,children:[R.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm shadow-sm ${h?"bg-indigo-600/80 text-white rounded-br-none":"bg-gray-700/80 text-gray-100 rounded-bl-none"}`,children:c.text}),R.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1",children:h?"":c.authorName})]},c.id)}),R.jsx("div",{ref:a})]}),R.jsxs("form",{onSubmit:u,className:"p-3 bg-white/5 border-t border-white/10 flex gap-2",children:[R.jsx("input",{type:"text",value:s,onChange:c=>o(c.target.value),placeholder:"...",className:"flex-1 bg-black/20 border border-gray-600 rounded-full px-4 py-2 text-sm text-white focus:outline-none focus:border-indigo-500 transition"}),R.jsx("button",{type:"submit",disabled:!s.trim(),className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-full p-2 w-10 h-10 flex items-center justify-center transition",children:""})]})]})},M4=({initialSeconds:t,isRunning:e,onComplete:n,triggerExtension:r})=>{const[i,s]=V.useState(t),o=V.useRef(void 0),[a,u]=V.useState(!1),[c,h]=V.useState(0);V.useEffect(()=>{s(t),o.current=void 0},[t]),V.useEffect(()=>{if(r&&r!==o.current)if(o.current!==void 0){s(T=>T+60),h(r),u(!0);const g=setTimeout(()=>u(!1),3e3);return o.current=r,()=>clearTimeout(g)}else o.current=r},[r]),V.useEffect(()=>{if(!e||i<=0)return;const g=setInterval(()=>{s(T=>T<=1?(clearInterval(g),n&&n(),0):T-1)},1e3);return()=>clearInterval(g)},[e,i,n]);const d=g=>{const T=Math.floor(g/60),I=g%60;return`${T}:${I.toString().padStart(2,"0")}`},p=i<=30;return R.jsx("div",{className:"w-full flex justify-center items-center",children:R.jsxs("div",{className:"relative",children:[R.jsx(Ye.div,{animate:a?{backgroundColor:["rgba(0,0,0,0.6)","rgba(22, 101, 52, 0.4)","rgba(0,0,0,0.6)"],borderColor:["rgba(255,255,255,0.2)","rgba(134, 239, 172, 0.8)","rgba(255,255,255,0.2)"],boxShadow:["0 0 0px rgba(74, 222, 128, 0)","0 0 40px rgba(74, 222, 128, 0.4)","0 0 0px rgba(74, 222, 128, 0)"]}:{},transition:{duration:1.5,ease:"easeInOut"},className:`
                        font-mono font-bold text-3xl px-6 py-3 rounded-xl bg-black/60 border-2 transition-colors duration-300 relative z-10
                        ${p&&!a?"text-red-400 border-red-500/50 animate-pulse shadow-[0_0_20px_rgba(239,68,68,0.5)]":"text-white border-white/20 shadow-lg"}
                    `,children:d(i)},`timer-box-${c}`),R.jsx(gp,{children:a&&R.jsx(Ye.div,{initial:{opacity:0,x:0,scale:.9,filter:"blur(4px)"},animate:{opacity:1,x:30,scale:1.1,filter:"blur(0px)"},exit:{opacity:0,x:60,scale:1.1,filter:"blur(10px)"},transition:{duration:2,ease:"easeOut"},className:"absolute left-[80%] top-[20%] -translate-y-1/2 font-bold text-2xl ml-2 pointer-events-none z-0 whitespace-nowrap flex items-center gap-2",style:{color:"#86efac",textShadow:"0 0 20px rgba(74, 222, 128, 0.5)"},children:R.jsx("span",{children:"+60"})},`effect-text-${c}`)})]})})},L4=({room:t,isHost:e,onExtendTimer:n,onBackToSelection:r,onFinishGame:i})=>{var s;return R.jsx("header",{className:"flex-none z-50 w-full bg-gray-900/80 backdrop-blur-md border-b border-white/10 shadow-lg",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-2 md:px-4 py-2 md:py-3 grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[R.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[R.jsx("div",{className:"flex items-center gap-2",children:R.jsx("div",{className:"text-white font-bold px-2 py-0.5 bg-white/10 rounded border border-white/10 uppercase tracking-widest text-[10px] flex-none",children:t.status==="discussion"?"DISCUSS":t.status})}),R.jsx("div",{className:"flex items-center gap-1 overflow-x-auto no-scrollbar mask-gradient-right w-full",children:t.players.map(o=>R.jsxs("div",{className:"flex-none flex items-center gap-1 text-[10px] text-gray-400 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/5 whitespace-nowrap",children:[R.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${o.isHost?"bg-indigo-400":"bg-emerald-500/80"}`}),o.name]},o.id))})]}),R.jsx("div",{className:"flex items-center justify-center min-w-[30px]",children:t.status==="discussion"&&R.jsx("div",{className:"scale-75 md:scale-100 origin-center",children:R.jsx(M4,{initialSeconds:((s=t.settings)==null?void 0:s.discussionTime)||180,isRunning:!0,triggerExtension:t.latestExtension})})}),R.jsx("div",{className:"flex items-center justify-end gap-1 md:gap-2",children:e&&R.jsxs(R.Fragment,{children:[t.status==="discussion"&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:n,className:"px-2 py-1.5 rounded bg-indigo-600/50 hover:bg-indigo-600 text-white text-[10px] md:text-xs font-bold border border-indigo-400/30 whitespace-nowrap",children:"+60"}),R.jsx("button",{onClick:r,className:"px-2 py-1.5 rounded bg-gray-700/80 hover:bg-gray-600 text-white text-[10px] md:text-xs font-bold border border-gray-600 whitespace-nowrap hidden md:block",children:""})]}),R.jsx("button",{onClick:i,className:"px-2 py-1.5 rounded bg-red-900/50 hover:bg-red-800 text-red-100 text-[10px] md:text-xs font-bold border border-red-800/50 whitespace-nowrap",children:""})]})})]})})},O4=({topic:t,roomPlayers:e,isHost:n,onReveal:r,onReaction:i})=>{var s;return R.jsxs("div",{className:"glass-panel rounded-3xl p-4 md:p-8 w-full h-full flex flex-col items-center justify-between text-center relative overflow-hidden backdrop-blur-xl border border-white/20 shadow-2xl shadow-purple-900/20",children:[R.jsxs("div",{className:"flex-none flex flex-col items-center gap-1 mb-4",children:[R.jsx("h3",{className:"text-indigo-200/50 text-[20px] font-bold uppercase tracking-[0.3em]",children:""}),R.jsxs("div",{className:"text-zinc-500 text-[20px] font-medium tracking-wider",children:[": ",((s=e.find(o=>o.id===t.authorId))==null?void 0:s.name)||"Unknown"]})]}),R.jsx("div",{className:"flex-1 flex items-center justify-center w-full min-h-0 relative",children:R.jsx("div",{className:"w-full max-h-full overflow-y-auto px-4 custom-scrollbar-thin",children:R.jsx("div",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-snug drop-shadow-lg break-words py-4",children:t.isRevealed?R.jsx(Ye.div,{initial:{opacity:0,scale:.9,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},transition:{type:"spring",bounce:.5},className:"premium-gradient-text",children:t.originalText}):R.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3 justify-center",children:t.originalText.split("").map((o,a)=>{const u=t.maskIndices.includes(a);return R.jsx("span",{className:`
                                                rounded-lg transition-all duration-500 flex items-center justify-center
                                                ${u?"bg-indigo-900/40 text-transparent min-w-[2rem] md:min-w-[3rem] h-10 md:h-14 border-2 border-dashed border-indigo-500/30":"text-white"}
                                            `,children:u?"":o},a)})})})})}),R.jsxs("div",{className:"flex-none w-full flex flex-col items-center gap-4 mt-4 pt-4 border-t border-white/5 relative z-20",children:[n&&!t.isRevealed&&R.jsx("button",{onClick:r,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-2 md:px-10 md:py-3 rounded-full font-bold text-lg shadow-lg shadow-indigo-500/40 hover:scale-105 active:scale-95 transition-all duration-200 border border-white/20",children:""}),R.jsx("div",{className:"flex justify-center gap-2 md:gap-3 flex-wrap",children:["","","","","",""].map(o=>R.jsx("button",{onClick:()=>i(o),className:"w-10 h-10 md:w-12 md:h-12 bg-white/5 backdrop-blur-sm rounded-full hover:bg-white/20 text-xl md:text-2xl transition active:scale-75 flex items-center justify-center border border-white/5",children:o},o))})]})]})},F4=({room:t,isHost:e,playerId:n})=>{var h;const r=((h=t.players.find(d=>d.id===n))==null?void 0:h.name)||"Unknown",i=async d=>{if(!e)return;const p=Je(Ve,"rooms",t.id);await nn(p,{status:"discussion",currentTopicId:d})},s=async()=>{if(!e||!t.currentTopicId)return;const d=t.topics.findIndex(g=>g.id===t.currentTopicId);if(d===-1)return;const p=[...t.topics];p[d]={...p[d],isRevealed:!0},await nn(Je(Ve,"rooms",t.id),{topics:p})},o=async()=>{e&&await nn(Je(Ve,"rooms",t.id),{status:"selection",currentTopicId:null})},a=async()=>{e&&await nn(Je(Ve,"rooms",t.id),{status:"summary"})},u=async()=>{e&&await nn(Je(Ve,"rooms",t.id),{latestExtension:Date.now()})},c=t.topics.find(d=>d.id===t.currentTopicId);return R.jsxs("div",{className:"fixed inset-0 w-full h-full text-white overflow-hidden flex flex-col",children:[R.jsx(L4,{room:t,isHost:e,onExtendTimer:u,onBackToSelection:o,onFinishGame:a}),R.jsx("main",{className:"flex-1 min-h-0 w-full max-w-7xl mx-auto p-4 z-10 relative flex flex-col",children:R.jsxs(gp,{mode:"wait",children:[t.status==="selection"&&R.jsx(Ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full overflow-y-auto pr-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-20 content-start custom-scrollbar",children:t.topics.map((d,p)=>({topic:d,originalIndex:p+1})).sort((d,p)=>d.topic.isRevealed===p.topic.isRevealed?0:d.topic.isRevealed?1:-1).map(({topic:d,originalIndex:p})=>{const g=t.players.find(T=>T.id===d.authorId);return R.jsx(V4,{topic:d,onClick:()=>i(d.id),disabled:!e,isFinished:d.isRevealed,authorName:g==null?void 0:g.name,topicIndex:p},d.id)})},"grid"),t.status==="discussion"&&c&&R.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col md:flex-row w-full h-full gap-4 min-h-0",children:[R.jsxs("div",{className:"flex-1 flex flex-col min-w-0 min-h-0 relative",children:[R.jsx(O4,{topic:c,roomPlayers:t.players,isHost:e,onReveal:s,onReaction:d=>b4(t.id,d)}),R.jsx(D4,{roomId:t.id})]}),R.jsx("div",{className:"w-full md:w-[350px] flex-none h-[35vh] md:h-auto z-20",children:R.jsx(N4,{roomId:t.id,topicId:c.id,playerName:r})})]},"active")]})})]})},j4=({room:t,isHost:e})=>{const n=hp(),[r,i]=V.useState("");V.useEffect(()=>{(async()=>{const h=`News Unpacked - Session ${t.id}
Date: ${new Date(t.createdAt).toLocaleDateString()}

`,d=`Participants: ${t.players.map(v=>v.name).join(", ")}

`;let p="";const g=uf(Ve,"rooms",t.id,"messages"),T=Y1(g,X1("createdAt","asc")),P=(await SL(T)).docs.map(v=>v.data());t.topics.forEach((v,x)=>{p+=`----------------------------------------
`;const b=t.players.find(O=>O.id===v.authorId);p+=`Topic #${x+1}: ${v.originalText}
`,p+=`Created by: ${(b==null?void 0:b.name)||"Unknown"}
`,p+=`Status: ${v.isRevealed?"[Discussed]":"[Skipped]"}
`,p+=`----------------------------------------

`;const M=P.filter(O=>O.topicId===v.id);M.length>0?(p+=`[Discussion Log]
`,M.forEach(O=>{const A=new Date(O.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});p+=`[${A}] ${O.authorName}: ${O.text}
`})):p+=`(No chat logs for this topic)
`,p+=`
`});const w=P.filter(v=>!v.topicId);w.length>0&&(p+=`----------------------------------------
`,p+=`General Chat / Lobby
`,p+=`----------------------------------------
`,w.forEach(v=>{const x=new Date(v.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});p+=`[${x}] ${v.authorName}: ${v.text}
`})),i(h+d+p)})()},[t]);const s=async()=>{try{await navigator.clipboard.writeText(r),alert("")}catch{alert("")}},o=()=>{const c=new Blob([r],{type:"text/plain"}),h=URL.createObjectURL(c),d=document.createElement("a");d.href=h,d.download=`news-unpacked-${t.id}.txt`,d.click(),URL.revokeObjectURL(h)},a=async()=>{e&&await nn(Je(Ve,"rooms",t.id),{status:"lobby",topics:[],currentTopicId:null,latestReaction:null,strokes:[]})},u=()=>{n("/")};return R.jsx("div",{className:"min-h-[calc(100vh-2rem)] flex items-center justify-center relative overflow-hidden rounded-2xl",children:R.jsxs("div",{className:"glass-panel rounded-3xl p-8 shadow-2xl max-w-3xl w-full relative z-10 border-t border-white/30",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("span",{className:"text-6xl mb-4 block",children:""}),R.jsx("h2",{className:"text-4xl font-black text-white mb-2 tracking-tight",children:""}),R.jsx("p",{className:"text-indigo-200",children:""})]}),R.jsx("div",{className:"bg-black/30 backdrop-blur-sm p-6 rounded-xl font-mono text-sm overflow-auto max-h-80 mb-8 whitespace-pre-wrap text-emerald-300 border border-white/5 shadow-inner custom-scrollbar",children:r||"..."}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[R.jsxs("button",{onClick:s,className:"bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all transform active:scale-95 flex items-center justify-center gap-2 group",children:[R.jsx("span",{className:"text-xl",children:""}),R.jsx("span",{children:""})]}),R.jsxs("button",{onClick:o,className:"bg-gray-700 hover:bg-gray-600 text-white py-4 rounded-xl font-bold shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2",children:[R.jsx("span",{className:"text-xl",children:""}),R.jsx("span",{children:"(.txt)"})]})]}),R.jsxs("div",{className:"border-t border-white/10 pt-6 flex justify-center",children:[R.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white px-6 py-2 rounded-lg hover:bg-white/5 transition-colors text-sm",children:""}),e&&R.jsx("button",{onClick:a,className:"ml-4 text-red-300 hover:text-red-100 px-6 py-2 rounded-lg hover:bg-red-900/30 transition-colors text-sm",children:""})]})]})})},U4="neun_player",B4=()=>{const[t,e]=V.useState(null);return V.useEffect(()=>{const n=localStorage.getItem(U4);if(n)try{e(JSON.parse(n))}catch(r){console.error("Failed to parse player data",r)}},[]),t},$4=(t,e)=>{const[n,r]=V.useState(null),[i,s]=V.useState(!0);return V.useEffect(()=>{if(!t){s(!1);return}s(!0);const o=Mm(Je(Ve,"rooms",t),a=>{a.exists()?r(a.data()):r(null),s(!1)},a=>{console.error("Error syncing room:",a),s(!1)});return()=>{o(),e&&iS(t,e).catch(a=>console.error("Failed to leave room:",a))}},[t,e]),{room:n,loading:i}},z4=()=>{var s;const{roomId:t}=GP(),e=B4(),{room:n,loading:r}=$4(t,e==null?void 0:e.id);if(r||!n||!e)return R.jsx("div",{className:"text-white text-center p-10",children:"Loading room..."});const i=((s=n.players.find(o=>o.id===e.id))==null?void 0:s.isHost)||!1;return R.jsxs("div",{className:"min-h-screen p-4 relative text-white",children:[R.jsx(yx,{}),n.status==="lobby"&&R.jsx(OL,{roomId:n.id,players:n.players,isHost:i,settings:n.settings}),n.status==="preparation"&&R.jsx(k4,{room:n,currentPlayerId:e.id}),(n.status==="selection"||n.status==="discussion")&&R.jsx(F4,{room:n,playerId:e.id,isHost:i}),n.status==="summary"&&R.jsx(j4,{room:n,isHost:i})]})};function W4(){return R.jsxs(yC,{basename:"/news-unpacked/",children:[R.jsx(A4,{position:"top-center",toastOptions:{style:{background:"#333",color:"#fff",zIndex:9999}}}),R.jsxs(cC,{children:[R.jsx(xd,{path:"/",element:R.jsx(Y2,{})}),R.jsx(xd,{path:"/room/:roomId",element:R.jsx(z4,{})})]})]})}Rh.createRoot(document.getElementById("root")).render(R.jsx(yf.StrictMode,{children:R.jsx(W4,{})}));
